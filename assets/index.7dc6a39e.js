var ze=Object.defineProperty,Ie=Object.defineProperties;var Fe=Object.getOwnPropertyDescriptors;var we=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable;var he=(e,l,n)=>l in e?ze(e,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[l]=n,ae=(e,l)=>{for(var n in l||(l={}))Re.call(l,n)&&he(e,n,l[n]);if(we)for(var n of we(l))Xe.call(l,n)&&he(e,n,l[n]);return e},ne=(e,l)=>Ie(e,Fe(l));import{E as Ye}from"./index.b70b7748.js";import{s as fe,x as le,v as Se,aF as te,bF as ge,aG as Le,ao as ce,b4 as Ke,g as _,a3 as Ae,a4 as We,aK as ue,B as b,ba as $e,bo as Ue,am as Oe,R as se,aZ as ke,a6 as je,bh as He,aY as Be,e as be,A as ye,h as Ne,b7 as ve,o as P,c as X,b as Pe,w as Ee,a as Q,t as pe,C as t,F as Y,b8 as Ge,aO as qe,S as Z,L as Te,af as xe,ak as Je,av as Ze,bc as Qe,aX as _e,aH as De,j as ie,H as oe,J as re,I as de,aq as el}from"./index.58bcf13a.js";const Me=Symbol("sliderContextKey"),ll=fe({modelValue:{type:le([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Se,inputSize:Se,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:le(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:le(Function),default:void 0},tooltipClass:{type:String,default:void 0},marks:{type:le(Object)}}),me=e=>ce(e)||Ke(e)&&e.every(ce),tl={[te]:me,[ge]:me,[Le]:me},al=(e,l,n)=>{const a=_();return Ae(async()=>{e.range?(Array.isArray(e.modelValue)?(l.firstValue=Math.max(e.min,e.modelValue[0]),l.secondValue=Math.min(e.max,e.modelValue[1])):(l.firstValue=e.min,l.secondValue=e.max),l.oldValue=[l.firstValue,l.secondValue]):(typeof e.modelValue!="number"||Number.isNaN(e.modelValue)?l.firstValue=e.min:l.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),l.oldValue=l.firstValue),We(window,"resize",n),await ue(),n()}),{sliderWrapper:a}},nl=e=>b(()=>e.marks?Object.keys(e.marks).map(parseFloat).sort((n,a)=>n-a).filter(n=>n<=e.max&&n>=e.min).map(n=>({point:n,position:(n-e.min)*100/(e.max-e.min),mark:e.marks[n]})):[]),ol=(e,l,n)=>{const{form:a,formItem:s}=$e(),v=Ue(),u=_(),V=_(),w={firstButton:u,secondButton:V},i=b(()=>e.disabled||(a==null?void 0:a.disabled)||!1),f=b(()=>Math.min(l.firstValue,l.secondValue)),r=b(()=>Math.max(l.firstValue,l.secondValue)),S=b(()=>e.range?`${100*(r.value-f.value)/(e.max-e.min)}%`:`${100*(l.firstValue-e.min)/(e.max-e.min)}%`),x=b(()=>e.range?`${100*(f.value-e.min)/(e.max-e.min)}%`:"0%"),C=b(()=>e.vertical?{height:e.height}:{}),I=b(()=>e.vertical?{height:S.value,bottom:x.value}:{width:S.value,left:x.value}),F=()=>{v.value&&(l.sliderSize=v.value[`client${e.vertical?"Height":"Width"}`])},L=m=>{const h=e.min+m*(e.max-e.min)/100;if(!e.range)return u;let B;return Math.abs(f.value-h)<Math.abs(r.value-h)?B=l.firstValue<l.secondValue?"firstButton":"secondButton":B=l.firstValue>l.secondValue?"firstButton":"secondButton",w[B]},k=m=>{const h=L(m);return h.value.setPosition(m),h},K=m=>{l.firstValue=m,g(e.range?[f.value,r.value]:m)},c=m=>{l.secondValue=m,e.range&&g([f.value,r.value])},g=m=>{n(te,m),n(ge,m)},j=async()=>{await ue(),n(Le,e.range?[f.value,r.value]:e.modelValue)},H=m=>{var h,B,G,q,J,U;if(i.value||l.dragging)return;F();let R=0;if(e.vertical){const N=(G=(B=(h=m.touches)==null?void 0:h.item(0))==null?void 0:B.clientY)!=null?G:m.clientY;R=(v.value.getBoundingClientRect().bottom-N)/l.sliderSize*100}else{const N=(U=(J=(q=m.touches)==null?void 0:q.item(0))==null?void 0:J.clientX)!=null?U:m.clientX,T=v.value.getBoundingClientRect().left;R=(N-T)/l.sliderSize*100}if(!(R<0||R>100))return k(R)};return{elFormItem:s,slider:v,firstButton:u,secondButton:V,sliderDisabled:i,minValue:f,maxValue:r,runwayStyle:C,barStyle:I,resetSize:F,setPosition:k,emitChange:j,onSliderWrapperPrevent:m=>{var h,B;(((h=w.firstButton.value)==null?void 0:h.dragging)||((B=w.secondButton.value)==null?void 0:B.dragging))&&m.preventDefault()},onSliderClick:m=>{H(m)&&j()},onSliderDown:async m=>{const h=H(m);h&&(await ue(),h.value.onButtonDown(m))},setFirstValue:K,setSecondValue:c}},{left:rl,down:sl,right:ul,up:il,home:dl,end:ml,pageUp:cl,pageDown:vl}=je,fl=(e,l,n)=>{const a=_(),s=_(!1),v=b(()=>l.value instanceof Function),u=b(()=>v.value&&l.value(e.modelValue)||e.modelValue),V=ke(()=>{n.value&&(s.value=!0)},50),w=ke(()=>{n.value&&(s.value=!1)},50);return{tooltip:a,tooltipVisible:s,formatValue:u,displayTooltip:V,hideTooltip:w}},gl=(e,l,n)=>{const{disabled:a,min:s,max:v,step:u,showTooltip:V,precision:w,sliderSize:i,formatTooltip:f,emitChange:r,resetSize:S,updateDragging:x}=Oe(Me),{tooltip:C,tooltipVisible:I,formatValue:F,displayTooltip:L,hideTooltip:k}=fl(e,f,V),K=_(),c=b(()=>`${(e.modelValue-s.value)/(v.value-s.value)*100}%`),g=b(()=>e.vertical?{bottom:c.value}:{left:c.value}),j=()=>{l.hovering=!0,L()},H=()=>{l.hovering=!1,l.dragging||k()},p=o=>{a.value||(o.preventDefault(),R(o),window.addEventListener("mousemove",N),window.addEventListener("touchmove",N),window.addEventListener("mouseup",T),window.addEventListener("touchend",T),window.addEventListener("contextmenu",T),K.value.focus())},A=o=>{a.value||(l.newPosition=Number.parseFloat(c.value)+o/(v.value-s.value)*100,W(l.newPosition),r())},$=()=>{A(-u.value)},m=()=>{A(u.value)},h=()=>{A(-u.value*4)},B=()=>{A(u.value*4)},G=()=>{a.value||(W(0),r())},q=()=>{a.value||(W(100),r())},J=o=>{let y=!0;[rl,sl].includes(o.key)?$():[ul,il].includes(o.key)?m():o.key===dl?G():o.key===ml?q():o.key===vl?h():o.key===cl?B():y=!1,y&&o.preventDefault()},U=o=>{let y,M;return o.type.startsWith("touch")?(M=o.touches[0].clientY,y=o.touches[0].clientX):(M=o.clientY,y=o.clientX),{clientX:y,clientY:M}},R=o=>{l.dragging=!0,l.isClick=!0;const{clientX:y,clientY:M}=U(o);e.vertical?l.startY=M:l.startX=y,l.startPosition=Number.parseFloat(c.value),l.newPosition=l.startPosition},N=o=>{if(l.dragging){l.isClick=!1,L(),S();let y;const{clientX:M,clientY:O}=U(o);e.vertical?(l.currentY=O,y=(l.startY-l.currentY)/i.value*100):(l.currentX=M,y=(l.currentX-l.startX)/i.value*100),l.newPosition=l.startPosition+y,W(l.newPosition)}},T=()=>{l.dragging&&(setTimeout(()=>{l.dragging=!1,l.hovering||k(),l.isClick||(W(l.newPosition),r())},0),window.removeEventListener("mousemove",N),window.removeEventListener("touchmove",N),window.removeEventListener("mouseup",T),window.removeEventListener("touchend",T),window.removeEventListener("contextmenu",T))},W=async o=>{if(o===null||Number.isNaN(+o))return;o<0?o=0:o>100&&(o=100);const y=100/((v.value-s.value)/u.value);let O=Math.round(o/y)*y*(v.value-s.value)*.01+s.value;O=Number.parseFloat(O.toFixed(w.value)),n(te,O),!l.dragging&&e.modelValue!==l.oldValue&&(l.oldValue=e.modelValue),await ue(),l.dragging&&L(),C.value.updatePopper()};return se(()=>l.dragging,o=>{x(o)}),{button:K,tooltip:C,tooltipVisible:I,showTooltip:V,wrapperStyle:g,formatValue:F,handleMouseEnter:j,handleMouseLeave:H,onButtonDown:p,onKeyDown:J,setPosition:W}},bl=(e,l,n,a)=>({stops:b(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const u=(e.max-e.min)/e.step,V=100*e.step/(e.max-e.min),w=Array.from({length:u-1}).map((i,f)=>(f+1)*V);return e.range?w.filter(i=>i<100*(n.value-e.min)/(e.max-e.min)||i>100*(a.value-e.min)/(e.max-e.min)):w.filter(i=>i>100*(l.firstValue-e.min)/(e.max-e.min))}),getStopStyle:u=>e.vertical?{bottom:`${u}%`}:{left:`${u}%`}}),yl=(e,l,n,a,s,v)=>{const u=i=>{s(te,i),s(ge,i)},V=()=>e.range?![n.value,a.value].every((i,f)=>i===l.oldValue[f]):e.modelValue!==l.oldValue,w=()=>{var i,f;if(e.min>e.max){He("Slider","min should not be greater than max.");return}const r=e.modelValue;e.range&&Array.isArray(r)?r[1]<e.min?u([e.min,e.min]):r[0]>e.max?u([e.max,e.max]):r[0]<e.min?u([e.min,r[1]]):r[1]>e.max?u([r[0],e.max]):(l.firstValue=r[0],l.secondValue=r[1],V()&&((i=v==null?void 0:v.validate)==null||i.call(v,"change").catch(S=>Be()),l.oldValue=r.slice())):!e.range&&typeof r=="number"&&!Number.isNaN(r)&&(r<e.min?u(e.min):r>e.max?u(e.max):(l.firstValue=r,V()&&((f=v==null?void 0:v.validate)==null||f.call(v,"change").catch(S=>Be()),l.oldValue=r)))};w(),se(()=>l.dragging,i=>{i||w()}),se(()=>e.modelValue,(i,f)=>{l.dragging||Array.isArray(i)&&Array.isArray(f)&&i.every((r,S)=>r===f[S])&&l.firstValue===i[0]&&l.secondValue===i[1]||w()},{deep:!0}),se(()=>[e.min,e.max],()=>{w()})},Vl=fe({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String}),wl={[te]:e=>ce(e)},hl={name:"ElSliderButton"},Sl=be(ne(ae({},hl),{props:Vl,emits:wl,setup(e,{expose:l,emit:n}){const a=e,s=ye("slider"),v=Ne({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:a.modelValue}),{button:u,tooltip:V,showTooltip:w,tooltipVisible:i,wrapperStyle:f,formatValue:r,handleMouseEnter:S,handleMouseLeave:x,onButtonDown:C,onKeyDown:I,setPosition:F}=gl(a,v,n),{hovering:L,dragging:k}=ve(v);return l({onButtonDown:C,onKeyDown:I,setPosition:F,hovering:L,dragging:k}),(K,c)=>(P(),X("div",{ref_key:"button",ref:u,class:Y([t(s).e("button-wrapper"),{hover:t(L),dragging:t(k)}]),style:Z(t(f)),tabindex:"0",onMouseenter:c[1]||(c[1]=(...g)=>t(S)&&t(S)(...g)),onMouseleave:c[2]||(c[2]=(...g)=>t(x)&&t(x)(...g)),onMousedown:c[3]||(c[3]=(...g)=>t(C)&&t(C)(...g)),onTouchstart:c[4]||(c[4]=(...g)=>t(C)&&t(C)(...g)),onFocus:c[5]||(c[5]=(...g)=>t(S)&&t(S)(...g)),onBlur:c[6]||(c[6]=(...g)=>t(x)&&t(x)(...g)),onKeydown:c[7]||(c[7]=(...g)=>t(I)&&t(I)(...g))},[Pe(t(qe),{ref_key:"tooltip",ref:V,visible:t(i),"onUpdate:visible":c[0]||(c[0]=g=>Ge(i)?i.value=g:null),placement:"top","stop-popper-mouse-event":!1,"popper-class":K.tooltipClass,disabled:!t(w),persistent:""},{content:Ee(()=>[Q("span",null,pe(t(r)),1)]),default:Ee(()=>[Q("div",{class:Y([t(s).e("button"),{hover:t(L),dragging:t(k)}])},null,2)]),_:1},8,["visible","popper-class","disabled"])],38))}}));var Ce=Te(Sl,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue"]]);const kl=fe({mark:{type:le([String,Object]),default:void 0}});var Bl=be({name:"ElSliderMarker",props:kl,setup(e){const l=ye("slider"),n=b(()=>xe(e.mark)?e.mark:e.mark.label),a=b(()=>xe(e.mark)?void 0:e.mark.style);return()=>Je("div",{class:l.e("marks-text"),style:a},n.value)}});const El=["id","role","aria-label","aria-labelledby"],xl={key:1},Cl={name:"ElSlider"},Ll=be(ne(ae({},Cl),{props:ll,emits:tl,setup(e,{expose:l,emit:n}){const a=e,s=ye("slider"),{t:v}=Ze(),u=Ne({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:V,slider:w,firstButton:i,secondButton:f,sliderDisabled:r,minValue:S,maxValue:x,runwayStyle:C,barStyle:I,resetSize:F,emitChange:L,onSliderWrapperPrevent:k,onSliderClick:K,onSliderDown:c,setFirstValue:g,setSecondValue:j}=ol(a,u,n),{stops:H,getStopStyle:p}=bl(a,u,S,x),{inputId:A,isLabeledByFormItem:$}=Qe(a,{formItemContext:V}),m=_e(),h=b(()=>a.inputSize||m.value),B=b(()=>a.label||v("el.slider.defaultLabel",{min:a.min,max:a.max})),G=b(()=>a.range?a.rangeStartLabel||v("el.slider.defaultRangeStartLabel"):B.value),q=b(()=>a.formatValueText?a.formatValueText(o.value):`${o.value}`),J=b(()=>a.rangeEndLabel||v("el.slider.defaultRangeEndLabel")),U=b(()=>a.formatValueText?a.formatValueText(y.value):`${y.value}`),R=b(()=>[s.b(),s.m(m.value),s.is("vertical",a.vertical),{[s.m("with-input")]:a.showInput}]),N=nl(a);yl(a,u,S,x,n,V);const T=b(()=>{const d=[a.min,a.max,a.step].map(z=>{const D=`${z}`.split(".")[1];return D?D.length:0});return Math.max.apply(null,d)}),{sliderWrapper:W}=al(a,u,F),{firstValue:o,secondValue:y,sliderSize:M}=ve(u),O=d=>{u.dragging=d};return De(Me,ne(ae({},ve(a)),{sliderSize:M,disabled:r,precision:T,emitChange:L,resetSize:F,updateDragging:O})),l({onSliderClick:K}),(d,z)=>{var D,Ve;return P(),X("div",{id:d.range?t(A):void 0,ref_key:"sliderWrapper",ref:W,class:Y(t(R)),role:d.range?"group":void 0,"aria-label":d.range&&!t($)?t(B):void 0,"aria-labelledby":d.range&&t($)?(D=t(V))==null?void 0:D.labelId:void 0,onTouchstart:z[2]||(z[2]=(...E)=>t(k)&&t(k)(...E)),onTouchmove:z[3]||(z[3]=(...E)=>t(k)&&t(k)(...E))},[Q("div",{ref_key:"slider",ref:w,class:Y([t(s).e("runway"),{"show-input":d.showInput&&!d.range},t(s).is("disabled",t(r))]),style:Z(t(C)),onMousedown:z[0]||(z[0]=(...E)=>t(c)&&t(c)(...E)),onTouchstart:z[1]||(z[1]=(...E)=>t(c)&&t(c)(...E))},[Q("div",{class:Y(t(s).e("bar")),style:Z(t(I))},null,6),Pe(Ce,{id:d.range?void 0:t(A),ref_key:"firstButton",ref:i,"model-value":t(o),vertical:d.vertical,"tooltip-class":d.tooltipClass,role:"slider","aria-label":d.range||!t($)?t(G):void 0,"aria-labelledby":!d.range&&t($)?(Ve=t(V))==null?void 0:Ve.labelId:void 0,"aria-valuemin":d.min,"aria-valuemax":d.range?t(y):d.max,"aria-valuenow":t(o),"aria-valuetext":t(q),"aria-orientation":d.vertical?"vertical":"horizontal","aria-disabled":t(r),"onUpdate:modelValue":t(g)},null,8,["id","model-value","vertical","tooltip-class","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),d.range?(P(),ie(Ce,{key:0,ref_key:"secondButton",ref:f,"model-value":t(y),vertical:d.vertical,"tooltip-class":d.tooltipClass,role:"slider","aria-label":t(J),"aria-valuemin":t(o),"aria-valuemax":d.max,"aria-valuenow":t(y),"aria-valuetext":t(U),"aria-orientation":d.vertical?"vertical":"horizontal","aria-disabled":t(r),"onUpdate:modelValue":t(j)},null,8,["model-value","vertical","tooltip-class","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):oe("v-if",!0),d.showStops?(P(),X("div",xl,[(P(!0),X(re,null,de(t(H),(E,ee)=>(P(),X("div",{key:ee,class:Y(t(s).e("stop")),style:Z(t(p)(E))},null,6))),128))])):oe("v-if",!0),t(N).length>0?(P(),X(re,{key:2},[Q("div",null,[(P(!0),X(re,null,de(t(N),(E,ee)=>(P(),X("div",{key:ee,style:Z(t(p)(E.position)),class:Y([t(s).e("stop"),t(s).e("marks-stop")])},null,6))),128))]),Q("div",{class:Y(t(s).e("marks"))},[(P(!0),X(re,null,de(t(N),(E,ee)=>(P(),ie(t(Bl),{key:ee,mark:E.mark,style:Z(t(p)(E.position))},null,8,["mark","style"]))),128))],2)],64)):oe("v-if",!0)],38),d.showInput&&!d.range?(P(),ie(t(Ye),{key:0,ref:"input","model-value":t(o),class:Y(t(s).e("input")),step:d.step,disabled:t(r),controls:d.showInputControls,min:d.min,max:d.max,debounce:d.debounce,size:t(h),"onUpdate:modelValue":t(g),onChange:t(L)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):oe("v-if",!0)],42,El)}}}));var Nl=Te(Ll,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/slider.vue"]]);const zl=el(Nl);export{zl as E};
