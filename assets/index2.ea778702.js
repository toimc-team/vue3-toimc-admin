var Se=Object.defineProperty,Te=Object.defineProperties;var Pe=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var De=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var Q=(l,t,s)=>t in l?Se(l,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[t]=s,W=(l,t)=>{for(var s in t||(t={}))De.call(t,s)&&Q(l,s,t[s]);if(J)for(var s of J(t))_e.call(t,s)&&Q(l,s,t[s]);return l},X=(l,t)=>Te(l,Pe(t));import{d as D}from"./dayjs.min.f0878e7a.js";import{b as Ve,g as Ce,d as we,T as Y,c as Re,t as Ae,e as xe,D as Ee,C as ye}from"./index2.5bd2f59a.js";import{s as Me,x as Oe,e as ee,av as Be,A as Z,am as He,B as P,g as ne,o as Ie,c as Ne,a as m,F as p,C as a,t as C,b as R,H as Fe,L as Ue,bN as H,bm as I,a6 as Ke,aH as Le,T as $e}from"./index.26463cbc.js";const je=Me({visible:Boolean,actualVisible:Boolean,parsedValue:{type:Oe(Array)},format:{type:String,default:""}}),ze=["disabled"],qe=ee({__name:"panel-time-range",props:je,emits:["pick","select-range","set-picker-option"],setup(l,{emit:t}){const s=l,b=(e,n)=>{const r=[];for(let c=e;c<=n;c++)r.push(c);return r},{t:S,lang:g}=Be(),o=Z("time"),f=Z("picker"),A=He("EP_PICKER_BASE"),{arrowControl:_,disabledHours:N,disabledMinutes:F,disabledSeconds:U,defaultValue:x}=A.props,v=P(()=>s.parsedValue[0]),k=P(()=>s.parsedValue[1]),ae=Ve(s),te=()=>{t("pick",ae.value,!1)},h=P(()=>s.format.includes("ss")),K=P(()=>s.format.includes("A")?"A":s.format.includes("a")?"a":""),se=(e=!1)=>{t("pick",[v.value,k.value],e)},oe=e=>{L(e.millisecond(0),k.value)},re=e=>{L(v.value,e.millisecond(0))},le=e=>{const n=e.map(c=>D(c).locale(g.value)),r=j(n);return n[0].isSame(r[0])&&n[1].isSame(r[1])},L=(e,n)=>{t("pick",[e,n],!0)},ce=P(()=>v.value>k.value),V=ne([0,2]),ie=(e,n)=>{t("select-range",e,n,"min"),V.value=[e,n]},$=P(()=>h.value?11:8),ue=(e,n)=>{t("select-range",e,n,"max");const r=a($);V.value=[e+r,n+r]},pe=e=>{const n=h.value?[0,3,6,11,14,17]:[0,3,8,11],r=["hours","minutes"].concat(h.value?["seconds"]:[]),i=(n.indexOf(V.value[0])+e+n.length)%n.length,u=n.length/2;i<u?O.start_emitSelectRange(r[i]):O.end_emitSelectRange(r[i-u])},de=e=>{const n=e.code,{left:r,right:c,up:i,down:u}=Ke;if([r,c].includes(n)){pe(n===r?-1:1),e.preventDefault();return}if([i,u].includes(n)){const d=n===i?-1:1,T=V.value[0]<$.value?"start":"end";O[`${T}_scrollDown`](d),e.preventDefault();return}},E=(e,n)=>{const r=N?N(e):[],c=e==="start",u=(n||(c?k.value:v.value)).hour(),d=c?b(u+1,23):b(0,u-1);return H(r,d)},y=(e,n,r)=>{const c=F?F(e,n):[],i=n==="start",u=r||(i?k.value:v.value),d=u.hour();if(e!==d)return c;const T=u.minute(),B=i?b(T+1,59):b(0,T-1);return H(c,B)},M=(e,n,r,c)=>{const i=U?U(e,n,r):[],u=r==="start",d=c||(u?k.value:v.value),T=d.hour(),B=d.minute();if(e!==T||n!==B)return i;const G=d.second(),he=u?b(G+1,59):b(0,G-1);return H(i,he)},j=([e,n])=>[z(e,"start",!0,n),z(n,"end",!1,e)],{getAvailableHours:me,getAvailableMinutes:fe,getAvailableSeconds:be}=Ce(E,y,M),{timePickerOptions:O,getAvailableTime:z,onSetOption:q}=we({getAvailableHours:me,getAvailableMinutes:fe,getAvailableSeconds:be}),ge=e=>e?I(e)?e.map(n=>D(n,s.format).locale(g.value)):D(e,s.format).locale(g.value):null,ve=e=>e?I(e)?e.map(n=>n.format(s.format)):e.format(s.format):null,ke=()=>{if(I(x))return x.map(n=>D(n).locale(g.value));const e=D(x).locale(g.value);return[e,e.add(60,"m")]};return t("set-picker-option",["formatToString",ve]),t("set-picker-option",["parseUserInput",ge]),t("set-picker-option",["isValidValue",le]),t("set-picker-option",["handleKeydownInput",de]),t("set-picker-option",["getDefaultValue",ke]),t("set-picker-option",["getRangeAvailableTime",j]),(e,n)=>e.actualVisible?(Ie(),Ne("div",{key:0,class:p([a(o).b("range-picker"),a(f).b("panel")])},[m("div",{class:p(a(o).be("range-picker","content"))},[m("div",{class:p(a(o).be("range-picker","cell"))},[m("div",{class:p(a(o).be("range-picker","header"))},C(a(S)("el.datepicker.startTime")),3),m("div",{class:p([a(o).be("range-picker","body"),a(o).be("panel","content"),a(o).is("arrow",a(_)),{"has-seconds":a(h)}])},[R(Y,{ref:"minSpinner",role:"start","show-seconds":a(h),"am-pm-mode":a(K),"arrow-control":a(_),"spinner-date":a(v),"disabled-hours":E,"disabled-minutes":y,"disabled-seconds":M,onChange:oe,onSetOption:a(q),onSelectRange:ie},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),m("div",{class:p(a(o).be("range-picker","cell"))},[m("div",{class:p(a(o).be("range-picker","header"))},C(a(S)("el.datepicker.endTime")),3),m("div",{class:p([a(o).be("range-picker","body"),a(o).be("panel","content"),a(o).is("arrow",a(_)),{"has-seconds":a(h)}])},[R(Y,{ref:"maxSpinner",role:"end","show-seconds":a(h),"am-pm-mode":a(K),"arrow-control":a(_),"spinner-date":a(k),"disabled-hours":E,"disabled-minutes":y,"disabled-seconds":M,onChange:re,onSetOption:a(q),onSelectRange:ue},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),m("div",{class:p(a(o).be("panel","footer"))},[m("button",{type:"button",class:p([a(o).be("panel","btn"),"cancel"]),onClick:n[0]||(n[0]=r=>te())},C(a(S)("el.datepicker.cancel")),3),m("button",{type:"button",class:p([a(o).be("panel","btn"),"confirm"]),disabled:a(ce),onClick:n[1]||(n[1]=r=>se())},C(a(S)("el.datepicker.confirm")),11,ze)],2)],2)):Fe("v-if",!0)}});var Ge=Ue(qe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);D.extend(Re);var Je=ee({name:"ElTimePicker",install:null,props:X(W({},Ae),{isRange:{type:Boolean,default:!1}}),emits:["update:modelValue"],setup(l,t){const s=ne(),[b,S]=l.isRange?["timerange",Ge]:["time",xe],g=o=>t.emit("update:modelValue",o);return Le("ElPopperOptions",l.popperOptions),t.expose({focus:o=>{var f;(f=s.value)==null||f.handleFocusInput(o)},blur:o=>{var f;(f=s.value)==null||f.handleBlurInput(o)}}),()=>{var o;const f=(o=l.format)!=null?o:Ee;return R(ye,$e(l,{ref:s,type:b,format:f,"onUpdate:modelValue":g}),{default:A=>R(S,A,null)})}}});const w=Je;w.install=l=>{l.component(w.name,w)};const Ze=w;export{Ze as E};
