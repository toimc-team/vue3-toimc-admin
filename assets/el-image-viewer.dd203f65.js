var ke=Object.defineProperty,ze=Object.defineProperties;var Ie=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var Le=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var fe=(o,l,n)=>l in o?ke(o,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[l]=n,F=(o,l)=>{for(var n in l||(l={}))Le.call(l,n)&&fe(o,n,l[n]);if(de)for(var n of de(l))xe.call(l,n)&&fe(o,n,l[n]);return o},Q=(o,l)=>ze(o,Ie(l));import{e as A,am as P,o as d,c as w,a as c,a9 as Y,Y as me,Z as le,ai as pe,cm as ve,aq as he,z as ge,ab as Ce,g as h,cn as Ee,A as b,b5 as we,N as re,aF as _e,a1 as ye,j as ie,b as u,w as $,C as f,ba as t,a7 as Oe,F as S,v as O,bg as Se,b2 as Ve,ao as Ae,H as ce,D as Ne,G as Te,a5 as Me,a6 as Be,O as ue,S as U,a8 as He,c4 as De,B as $e,co as oe,a4 as M,a2 as B,al as be,cp as Re,cq as Fe,t as Ye,P as Pe,ac as Xe,ad as je,cr as Ze,cs as We,ct as qe}from"./index.3688f571.js";import{z as Ge}from"./zoom-in.76f44113.js";const Ke=A({name:"FullScreen"}),Je={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Qe=c("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64l-192 .192zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64v-.064z"},null,-1),Ue=[Qe];function et(o,l,n,v,x,g){return d(),w("svg",Je,Ue)}var tt=P(Ke,[["render",et]]);const at=A({name:"RefreshLeft"}),nt={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},st=c("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"},null,-1),ot=[st];function lt(o,l,n,v,x,g){return d(),w("svg",nt,ot)}var rt=P(at,[["render",lt]]);const it=A({name:"RefreshRight"}),ct={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},ut=c("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"},null,-1),dt=[ut];function ft(o,l,n,v,x,g){return d(),w("svg",ct,dt)}var vt=P(it,[["render",ft]]);const mt=A({name:"ScaleToOriginal"}),pt={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},ht=c("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zM512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412zM512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512z"},null,-1),gt=[ht];function wt(o,l,n,v,x,g){return d(),w("svg",pt,gt)}var _t=P(mt,[["render",wt]]);const yt=A({name:"ZoomOut"}),$t={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},bt=c("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zM352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64z"},null,-1),kt=[bt];function zt(o,l,n,v,x,g){return d(),w("svg",$t,kt)}var It=P(yt,[["render",zt]]);const Lt=()=>Y&&/firefox/i.test(window.navigator.userAgent),xt=me({urlList:{type:le(Array),default:()=>pe([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0}}),Ct={close:()=>!0,switch:o=>typeof o=="number"},Et=["src"],Ot={name:"ElImageViewer"},St=A(Q(F({},Ot),{props:xt,emits:Ct,setup(o,{emit:l}){const n=o,v={CONTAIN:{name:"contain",icon:ve(tt)},ORIGINAL:{name:"original",icon:ve(_t)}},x=Lt()?"DOMMouseScroll":"mousewheel",{t:g}=he(),i=ge("image-viewer"),{nextZIndex:ee}=Ce(),k=h(),C=h([]),X=Ee(),E=h(!0),m=h(n.initialIndex),z=h(v.CONTAIN),r=h({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),H=b(()=>{const{urlList:e}=n;return e.length<=1}),N=b(()=>m.value===0),j=b(()=>m.value===n.urlList.length-1),te=b(()=>n.urlList[m.value]),D=b(()=>{const{scale:e,deg:a,offsetX:s,offsetY:p,enableTransition:I}=r.value;let _=s/e,L=p/e;switch(a%360){case 90:case-270:[_,L]=[L,-_];break;case 180:case-180:[_,L]=[-_,-L];break;case 270:case-90:[_,L]=[-L,_];break}const T={transform:`scale(${e}) rotate(${a}deg) translate(${_}px, ${L}px)`,transition:I?"transform .3s":""};return z.value.name===v.CONTAIN.name&&(T.maxWidth=T.maxHeight="100%"),T}),ae=b(()=>we(n.zIndex)?n.zIndex:ee());function V(){se(),l("close")}function ne(){const e=oe(s=>{switch(s.code){case M.esc:n.closeOnPressEscape&&V();break;case M.space:G();break;case M.left:K();break;case M.up:y("zoomIn");break;case M.right:J();break;case M.down:y("zoomOut");break}}),a=oe(s=>{(s.wheelDelta?s.wheelDelta:-s.detail)>0?y("zoomIn",{zoomRate:1.2,enableTransition:!1}):y("zoomOut",{zoomRate:1.2,enableTransition:!1})});X.run(()=>{B(document,"keydown",e),B(document,x,a)})}function se(){X.stop()}function Z(){E.value=!1}function W(e){E.value=!1,e.target.alt=g("el.image.error")}function q(e){if(E.value||e.button!==0||!k.value)return;r.value.enableTransition=!1;const{offsetX:a,offsetY:s}=r.value,p=e.pageX,I=e.pageY,_=oe(T=>{r.value=Q(F({},r.value),{offsetX:a+T.pageX-p,offsetY:s+T.pageY-I})}),L=B(document,"mousemove",_);B(document,"mouseup",()=>{L()}),e.preventDefault()}function R(){r.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function G(){if(E.value)return;const e=Object.keys(v),a=Object.values(v),s=z.value.name,I=(a.findIndex(_=>_.name===s)+1)%e.length;z.value=v[e[I]],R()}function K(){if(N.value&&!n.infinite)return;const e=n.urlList.length;m.value=(m.value-1+e)%e}function J(){if(j.value&&!n.infinite)return;const e=n.urlList.length;m.value=(m.value+1)%e}function y(e,a={}){if(E.value)return;const{zoomRate:s,rotateDeg:p,enableTransition:I}=F({zoomRate:1.4,rotateDeg:90,enableTransition:!0},a);switch(e){case"zoomOut":r.value.scale>.2&&(r.value.scale=Number.parseFloat((r.value.scale/s).toFixed(3)));break;case"zoomIn":r.value.scale<7&&(r.value.scale=Number.parseFloat((r.value.scale*s).toFixed(3)));break;case"clockwise":r.value.deg+=p;break;case"anticlockwise":r.value.deg-=p;break}r.value.enableTransition=I}return re(te,()=>{_e(()=>{const e=C.value[0];e!=null&&e.complete||(E.value=!0)})}),re(m,e=>{R(),l("switch",e)}),ye(()=>{var e,a;ne(),(a=(e=k.value)==null?void 0:e.focus)==null||a.call(e)}),(e,a)=>(d(),ie(De,{to:"body",disabled:!e.teleported},[u(He,{name:"viewer-fade",appear:""},{default:$(()=>[c("div",{ref_key:"wrapper",ref:k,tabindex:-1,class:f(t(i).e("wrapper")),style:ue({zIndex:t(ae)})},[c("div",{class:f(t(i).e("mask")),onClick:a[0]||(a[0]=Oe(s=>e.hideOnClickModal&&V(),["self"]))},null,2),S(" CLOSE "),c("span",{class:f([t(i).e("btn"),t(i).e("close")]),onClick:V},[u(t(O),null,{default:$(()=>[u(t(Se))]),_:1})],2),S(" ARROW "),t(H)?S("v-if",!0):(d(),w(ce,{key:0},[c("span",{class:f([t(i).e("btn"),t(i).e("prev"),t(i).is("disabled",!e.infinite&&t(N))]),onClick:K},[u(t(O),null,{default:$(()=>[u(t(Ve))]),_:1})],2),c("span",{class:f([t(i).e("btn"),t(i).e("next"),t(i).is("disabled",!e.infinite&&t(j))]),onClick:J},[u(t(O),null,{default:$(()=>[u(t(Ae))]),_:1})],2)],64)),S(" ACTIONS "),c("div",{class:f([t(i).e("btn"),t(i).e("actions")])},[c("div",{class:f(t(i).e("actions__inner"))},[u(t(O),{onClick:a[1]||(a[1]=s=>y("zoomOut"))},{default:$(()=>[u(t(It))]),_:1}),u(t(O),{onClick:a[2]||(a[2]=s=>y("zoomIn"))},{default:$(()=>[u(t(Ge))]),_:1}),c("i",{class:f(t(i).e("actions__divider"))},null,2),u(t(O),{onClick:G},{default:$(()=>[(d(),ie(Ne(z.value.icon)))]),_:1}),c("i",{class:f(t(i).e("actions__divider"))},null,2),u(t(O),{onClick:a[3]||(a[3]=s=>y("anticlockwise"))},{default:$(()=>[u(t(rt))]),_:1}),u(t(O),{onClick:a[4]||(a[4]=s=>y("clockwise"))},{default:$(()=>[u(t(vt))]),_:1})],2)],2),S(" CANVAS "),c("div",{class:f(t(i).e("canvas"))},[(d(!0),w(ce,null,Te(e.urlList,(s,p)=>Me((d(),w("img",{ref_for:!0,ref:I=>C.value[p]=I,key:s,src:s,style:ue(t(D)),class:f(t(i).e("img")),onLoad:Z,onError:W,onMousedown:q},null,46,Et)),[[Be,p===m.value]])),128))],2),U(e.$slots,"default")],6)]),_:3})],8,["disabled"]))}}));var Vt=$e(St,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const At=be(Vt),Nt=me({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},lazy:{type:Boolean,default:!1},scrollContainer:{type:le([String,Object])},previewSrcList:{type:le(Array),default:()=>pe([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0}}),Tt={error:o=>o instanceof Event,switch:o=>we(o),close:()=>!0},Mt=["src"],Bt={key:0},Ht={name:"ElImage",inheritAttrs:!1},Dt=A(Q(F({},Ht),{props:Nt,emits:Tt,setup(o,{emit:l}){const n=o;let v="";const{t:x}=he(),g=ge("image"),i=Re(),ee=Fe(),k=h(!1),C=h(!0),X=h(0),E=h(0),m=h(!1),z=h(),r=h();let H,N;const j=b(()=>i.style),te=b(()=>{const{fit:e}=n;return Y&&e?{objectFit:e}:{}}),D=b(()=>{const{previewSrcList:e}=n;return Array.isArray(e)&&e.length>0}),ae=b(()=>{const{previewSrcList:e,initialIndex:a}=n;let s=a;return a>e.length-1&&(s=0),s}),V=()=>{if(!Y)return;C.value=!0,k.value=!1;const e=new Image,a=n.src;e.addEventListener("load",s=>{a===n.src&&ne(s,e)}),e.addEventListener("error",s=>{a===n.src&&se(s)}),Object.entries(i).forEach(([s,p])=>{s.toLowerCase()!=="onload"&&e.setAttribute(s,p)}),e.src=a};function ne(e,a){X.value=a.width,E.value=a.height,C.value=!1,k.value=!1}function se(e){C.value=!1,k.value=!0,l("error",e)}function Z(){We(z.value,r.value)&&(V(),R())}const W=qe(Z,200);async function q(){var e;if(!Y)return;await _e();const{scrollContainer:a}=n;Xe(a)?r.value=a:je(a)&&a!==""?r.value=(e=document.querySelector(a))!=null?e:void 0:z.value&&(r.value=Ze(z.value)),r.value&&(H=B(r,"scroll",W),setTimeout(()=>Z(),100))}function R(){!Y||!r.value||!W||(H==null||H(),r.value=void 0)}function G(e){if(!!e.ctrlKey){if(e.deltaY<0)return e.preventDefault(),!1;if(e.deltaY>0)return e.preventDefault(),!1}}function K(){!D.value||(N=B("wheel",G,{passive:!1}),v=document.body.style.overflow,document.body.style.overflow="hidden",m.value=!0)}function J(){N==null||N(),document.body.style.overflow=v,m.value=!1,l("close")}function y(e){l("switch",e)}return re(()=>n.src,()=>{n.lazy?(C.value=!0,k.value=!1,R(),q()):V()}),ye(()=>{n.lazy?q():V()}),(e,a)=>(d(),w("div",{ref_key:"container",ref:z,class:f([t(g).b(),e.$attrs.class]),style:ue(t(j))},[C.value?U(e.$slots,"placeholder",{key:0},()=>[c("div",{class:f(t(g).e("placeholder"))},null,2)]):k.value?U(e.$slots,"error",{key:1},()=>[c("div",{class:f(t(g).e("error"))},Ye(t(x)("el.image.error")),3)]):(d(),w("img",Pe({key:2},t(ee),{src:e.src,style:t(te),class:[t(g).e("inner"),t(D)?t(g).e("preview"):""],onClick:K}),null,16,Mt)),t(D)?(d(),w(ce,{key:3},[m.value?(d(),ie(t(At),{key:0,"z-index":e.zIndex,"initial-index":t(ae),infinite:e.infinite,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:J,onSwitch:y},{default:$(()=>[e.$slots.viewer?(d(),w("div",Bt,[U(e.$slots,"viewer")])):S("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):S("v-if",!0)],2112)):S("v-if",!0)],6))}}));var Rt=$e(Dt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const Xt=be(Rt);export{Xt as E};
