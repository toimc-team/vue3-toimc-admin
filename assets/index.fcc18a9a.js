import{g as w,R as W,C as m,d0 as Q,cO as ee,d6 as H,cU as te,e as V,Y as j,h as Y,d7 as q,B as P,c0 as ne,b as r,a5 as z,T as se,d8 as A,_ as oe,l as ie,c as N,w as $,J as ae,o as O,a as M,j as J,k as F}from"./index.6b8e7d20.js";import{_ as re}from"./TCard.9fbf5138.js";import{h as ce}from"./brian.dad58c18.js";import"./el-card.caf13488.js";import"./TransitionList.a35e13b1.js";import"./BasicTransition.658eb3e6.js";function le({el:e=window,name:i,listener:v,options:_,autoRemove:t=!0,isDebounce:n=!0,wait:u=80}){let f=()=>{};const y=w(!1);if(e){const T=w(e),C=n?Q(v,u):ee(v,u),h=u?C:v,R=o=>{y.value=!0,o.removeEventListener(i,h,_)},k=o=>o.addEventListener(i,h,_),E=W(T,(o,g,p)=>{o&&(!m(y)&&k(o),p(()=>{t&&R(o)}))},{immediate:!0});f=()=>{R(T.value),E()}}return{removeEvent:f}}const G={value:{type:Boolean,default:!1},isSlot:{type:Boolean,default:!1},text:{type:[String],default:H("components.verify.dragText")},successText:{type:[String],default:H("components.verify.successText")},height:{type:[Number,String],default:40},width:{type:[Number,String],default:220},circle:{type:Boolean,default:!1},wrapStyle:{type:Object,default:{}},contentStyle:{type:Object,default:{}},barStyle:{type:Object,default:{}},actionStyle:{type:Object,default:{}}},ue={...G,src:{type:String},imgWidth:{type:Number,default:260},imgWrapStyle:{type:Object,default:{}},minDegree:{type:Number,default:90},maxDegree:{type:Number,default:270},diffDegree:{type:Number,default:20}};function U(e,i="default",v){if(!e||!Reflect.has(e,i))return null;if(!te(e[i]))return console.error(`${i} is not a function!`),null;const _=e[i];return _?_(v):null}const K=V({name:"BaseDargVerify",components:{Icon:j},props:G,emits:["success","update:value","change","start","move","end"],setup(e,{emit:i,slots:v,expose:_}){const t=Y({isMoving:!1,isPassing:!1,moveDistance:0,toLeft:!1,startTime:0,endTime:0}),n=w(null),u=w(null),f=w(null),y=w(null),{t:T}=q();le({el:document,name:"mouseup",listener:()=>{t.isMoving&&b()}});const C=P(()=>{const{height:s,actionStyle:c}=e,l=`${parseInt(s)}px`;return{left:0,width:l,height:l,...c}}),h=P(()=>{const{height:s,width:c,circle:l,wrapStyle:a}=e,d=parseInt(s);return{width:`${parseInt(c)}px`,height:`${d}px`,lineHeight:`${d}px`,borderRadius:l?d/2+"px":0,...a}}),R=P(()=>{const{height:s,circle:c,barStyle:l}=e,a=parseInt(s);return{height:`${a}px`,borderRadius:c?a/2+"px 0 0 "+a/2+"px":0,...l}}),k=P(()=>{const{height:s,width:c,contentStyle:l}=e,a=`${parseInt(s)}px`,d=`${parseInt(c)}px`;return{height:a,width:d,...l}});W(()=>t.isPassing,s=>{if(s){const{startTime:c,endTime:l}=t,a=(l-c)/1e3;i("success",{isPassing:s,time:a.toFixed(1)}),i("update:value",s),i("change",s)}}),ne(()=>{t.isPassing=!!e.value});function E(s){return s.pageX||s.touches[0].pageX}function o(s){if(t.isPassing)return;const c=m(y);!c||(i("start",s),t.moveDistance=E(s)-parseInt(c.style.left.replace("px",""),10),t.startTime=new Date().getTime(),t.isMoving=!0)}function g(s){const c=parseInt(s.style.width),{width:l}=e,a=parseInt(l);return{offset:a-c-6,widthNum:a,actionWidth:c}}function p(s){const{isMoving:c,moveDistance:l}=t;if(c){const a=m(y),d=m(u);if(!a||!d)return;const{offset:S,widthNum:I,actionWidth:L}=g(a),D=E(s)-l;i("move",{event:s,moveDistance:l,moveX:D}),D>0&&D<=S?(a.style.left=`${D}px`,d.style.width=`${D+L/2}px`):D>S&&(a.style.left=`${I-L}px`,d.style.width=`${I-L/2}px`,e.isSlot||B())}}function x(s){const{isMoving:c,isPassing:l,moveDistance:a}=t;if(c&&!l){i("end",s);const d=m(y),S=m(u);if(!d||!S)return;const I=E(s)-a,{offset:L,widthNum:D,actionWidth:X}=g(d);I<L?e.isSlot?setTimeout(()=>{if(!e.value)b();else{const Z=m(f);Z&&(Z.style.width=`${parseInt(S.style.width)}px`)}},0):b():(d.style.left=`${D-X}px`,S.style.width=`${D-X/2}px`,B()),t.isMoving=!1}}function B(){if(e.isSlot){b();return}t.endTime=new Date().getTime(),t.isPassing=!0,t.isMoving=!1}function b(){t.isMoving=!1,t.isPassing=!1,t.moveDistance=0,t.toLeft=!1,t.startTime=0,t.endTime=0;const s=m(y),c=m(u),l=m(f);!s||!c||!l||(t.toLeft=!0,z(()=>{t.toLeft=!1,s.style.left="0",c.style.width="0"},300),l.style.width=m(k).width)}return _({resume:b}),()=>{const s=()=>{const a=["darg-verify-bar"];return t.toLeft&&a.push("to-left"),r("div",{class:a,ref:u,style:m(R)},null)},c=()=>{const a=["darg-verify-content"],{isPassing:d}=t,{text:S,successText:I}=e;return d&&a.push("success"),r("div",{class:a,ref:f,style:m(k)},[U(v,"text",d)||T(d?I:S)])},l=()=>{const a=["darg-verify-action"],{toLeft:d,isPassing:S}=t;return d&&a.push("to-left"),r("div",{class:a,onMousedown:o,onTouchstart:o,style:m(C),ref:y},[U(v,"actionIcon",S)||(S?r(j,{icon:"ant-design:check-outlined",class:"darg-verify-action__icon"},null):r(j,{icon:"ant-design:double-right-outlined",class:"darg-verify-action__icon"},null))])};return r("div",{class:"darg-verify",ref:n,style:m(h),onMousemove:p,onTouchmove:p,onMouseleave:x,onMouseup:x,onTouchend:x},[s(),c(),l()])}}});const de=V({name:"ImgRotateDragVerify",inheritAttrs:!1,props:ue,emits:["success","change","update:value"],setup(e,{emit:i,attrs:v,expose:_}){const t=w(null),n=Y({showTip:!1,isPassing:!1,imgStyle:{},randomRotate:0,currentRotate:0,toOrigin:!1,startTime:0,endTime:0,draged:!1}),{t:u}=q();W(()=>n.isPassing,o=>{if(o){const{startTime:g,endTime:p}=n,x=(p-g)/1e3;i("success",{isPassing:o,time:x.toFixed(1)}),i("change",o),i("update:value",o)}});const f=P(()=>{const{imgWrapStyle:o,imgWidth:g}=e;return{width:`${g}px`,height:`${g}px`,...o}}),y=P(()=>{const{minDegree:o,maxDegree:g}=e;return o===g?Math.floor(1+Math.random()*1)/10+1:1});function T(){n.startTime=new Date().getTime()}function C(o){n.draged=!0;const{imgWidth:g,height:p,maxDegree:x}=e,{moveX:B}=o,b=Math.ceil(B/(g-parseInt(p))*x*m(y));n.currentRotate=b,n.imgStyle=A("transform",`rotateZ(${n.randomRotate-b}deg)`)}function h(){const{minDegree:o,maxDegree:g}=e,p=Math.floor(o+Math.random()*(g-o));n.randomRotate=p,n.imgStyle=A("transform",`rotateZ(${p}deg)`)}function R(){const{randomRotate:o,currentRotate:g}=n,{diffDegree:p}=e;Math.abs(o-g)>=(p||20)?(n.imgStyle=A("transform",`rotateZ(${o}deg)`),n.toOrigin=!0,z(()=>{n.toOrigin=!1,n.showTip=!0},300)):k(),n.showTip=!0}function k(){n.isPassing=!0,n.endTime=new Date().getTime()}function E(){n.showTip=!1;const o=m(t);!o||(n.isPassing=!1,o.resume(),h())}return _({resume:E}),()=>{const{src:o}=e,{toOrigin:g,isPassing:p,startTime:x,endTime:B}=n,b=[];g&&b.push("to-origin");const s=(B-x)/1e3;return r("div",{class:"img-rotate-verify"},[r("div",{class:"img-rotate-verify-img__wrap",style:m(f)},[r("img",{src:o,onLoad:h,width:parseInt(e.width),class:b,style:n.imgStyle,onClick:()=>{E()},alt:"verify"},null),n.showTip&&r("span",{class:["img-rotate-verify-img__tip",n.isPassing?"success":"error"]},[n.isPassing?u("components.verify.time",{time:s.toFixed(1)}):u("components.verify.error")]),!n.showTip&&!n.draged&&r("span",{class:["img-rotate-verify-img__tip","normal"]},[u("components.verify.redoTip")])]),r(K,se({class:"img-rotate-verify-drag__bar",onMove:C,onEnd:R,onStart:T,ref:t},{...v,...e},{value:p,isSlot:!0}),null)])}}});const fe=V({setup(){const e=w(null),i=w(null),v=w(null),_=w(null),t=w(null);function n(f){}function u(f){!f||f.resume()}return{handleSuccess:n,el1:e,el2:i,el3:v,el4:_,el5:t,handleBtnClick:u,img:ce}}});const ge={class:"flex justify-center p-4 items-center bg-gray-700"},me=F(" \u8FD8\u539F "),he={class:"flex justify-center p-4 items-center bg-gray-700"},ye=F(" \u8FD8\u539F "),pe={class:"flex justify-center p-4 items-center bg-gray-700"},ve=F(" \u8FD8\u539F "),_e={class:"flex justify-center p-4 items-center bg-gray-700"},Se=F(" \u8FD8\u539F "),we={class:"flex justify-center p-4 items-center bg-gray-700"},be={key:0},Te=F(" \u6210\u529F "),xe={key:1},De=F(" \u62D6\u52A8 "),$e=F(" \u8FD8\u539F "),Ee={class:"flex justify-center p-4 items-center bg-gray-700"};function Ce(e,i,v,_,t,n){const u=K,f=ie,y=j,T=re,C=de;return O(),N(ae,null,[r(T,{header:"\u62D6\u52A8\u6821\u9A8C\u793A\u4F8B"},{default:$(()=>[M("div",ge,[r(u,{ref:"el1",onSuccess:e.handleSuccess},null,8,["onSuccess"]),r(f,{type:"primary",class:"ml-2",onClick:i[0]||(i[0]=h=>e.handleBtnClick(e.el1))},{default:$(()=>[me]),_:1})]),M("div",he,[r(u,{ref:"el2",circle:"",onSuccess:e.handleSuccess},null,8,["onSuccess"]),r(f,{type:"primary",class:"ml-2",onClick:i[1]||(i[1]=h=>e.handleBtnClick(e.el2))},{default:$(()=>[ye]),_:1})]),M("div",pe,[r(u,{ref:"el3",text:"\u62D6\u52A8\u4EE5\u8FDB\u884C\u6821\u9A8C","success-text":"\u6821\u9A8C\u6210\u529F","bar-style":{backgroundColor:"#018ffb"},onSuccess:e.handleSuccess},null,8,["onSuccess"]),r(f,{type:"primary",class:"ml-2",onClick:i[2]||(i[2]=h=>e.handleBtnClick(e.el3))},{default:$(()=>[ve]),_:1})]),M("div",_e,[r(u,{ref:"el4",onSuccess:e.handleSuccess},{actionIcon:$(h=>[h?(O(),J(y,{key:0,icon:"ant-design:bug-outlined"})):(O(),J(y,{key:1,icon:"ant-design:right-outlined"}))]),_:1},8,["onSuccess"]),r(f,{type:"primary",class:"ml-2",onClick:i[3]||(i[3]=h=>e.handleBtnClick(e.el4))},{default:$(()=>[Se]),_:1})]),M("div",we,[r(u,{ref:"el5",onSuccess:e.handleSuccess},{text:$(h=>[h?(O(),N("div",be,[r(y,{icon:"ant-design:bug-outlined"}),Te])):(O(),N("div",xe,[De,r(y,{icon:"ant-design:right-outlined"})]))]),_:1},8,["onSuccess"]),r(f,{type:"primary",class:"ml-2",onClick:i[4]||(i[4]=h=>e.handleBtnClick(e.el5))},{default:$(()=>[$e]),_:1})])]),_:1}),r(T,{header:"\u65CB\u8F6C\u793A\u4F8B"},{default:$(()=>[M("div",Ee,[r(C,{ref:"el",src:e.img,onSuccess:e.handleSuccess},null,8,["src","onSuccess"])])]),_:1})],64)}const Pe=oe(fe,[["render",Ce],["__scopeId","data-v-5861ed53"]]);export{Pe as default};
