var se=Object.defineProperty,oe=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var J=(e,t,c)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:c}):e[t]=c,D=(e,t)=>{for(var c in t||(t={}))re.call(t,c)&&J(e,c,t[c]);if(H)for(var c of H(t))ae.call(t,c)&&J(e,c,t[c]);return e},Y=(e,t)=>oe(e,ie(t));import{g as x,R as z,C as p,cZ as ce,cM as le,d3 as q,cR as ue,e as V,Y as N,h as Q,d4 as U,B as P,b_ as de,b as a,a5 as ee,T as fe,d5 as O,_ as ge,o as A,c as W,w as $,a as j,j as G,J as me,k as R,l as pe}from"./index.2df2d850.js";import{_ as he}from"./TCard.85879223.js";import{h as ye}from"./brian.da19e50d.js";import"./el-card.efed475c.js";import"./TransitionList.ef35ff8b.js";import"./BasicTransition.258ab3d5.js";function ve({el:e=window,name:t,listener:c,options:b,autoRemove:n=!0,isDebounce:s=!0,wait:d=80}){let g=()=>{};const y=x(!1);if(e){const k=x(e),F=s?ce(c,d):le(c,d),h=d?F:c,C=i=>{y.value=!0,i.removeEventListener(t,h,b)},B=i=>i.addEventListener(t,h,b),E=z(k,(i,m,v)=>{i&&(!p(y)&&B(i),v(()=>{n&&C(i)}))},{immediate:!0});g=()=>{C(k.value),E()}}return{removeEvent:g}}const te={value:{type:Boolean,default:!1},isSlot:{type:Boolean,default:!1},text:{type:[String],default:q("components.verify.dragText")},successText:{type:[String],default:q("components.verify.successText")},height:{type:[Number,String],default:40},width:{type:[Number,String],default:220},circle:{type:Boolean,default:!1},wrapStyle:{type:Object,default:{}},contentStyle:{type:Object,default:{}},barStyle:{type:Object,default:{}},actionStyle:{type:Object,default:{}}},_e=Y(D({},te),{src:{type:String},imgWidth:{type:Number,default:260},imgWrapStyle:{type:Object,default:{}},minDegree:{type:Number,default:90},maxDegree:{type:Number,default:270},diffDegree:{type:Number,default:20}});function K(e,t="default",c){if(!e||!Reflect.has(e,t))return null;if(!ue(e[t]))return console.error(`${t} is not a function!`),null;const b=e[t];return b?b(c):null}var ne=V({name:"BaseDargVerify",components:{Icon:N},props:te,emits:["success","update:value","change","start","move","end"],setup(e,{emit:t,slots:c,expose:b}){const n=Q({isMoving:!1,isPassing:!1,moveDistance:0,toLeft:!1,startTime:0,endTime:0}),s=x(null),d=x(null),g=x(null),y=x(null),{t:k}=U();ve({el:document,name:"mouseup",listener:()=>{n.isMoving&&w()}});const F=P(()=>{const{height:o,actionStyle:l}=e,u=`${parseInt(o)}px`;return D({left:0,width:u,height:u},l)}),h=P(()=>{const{height:o,width:l,circle:u,wrapStyle:r}=e,f=parseInt(o),_=`${parseInt(l)}px`;return D({width:_,height:`${f}px`,lineHeight:`${f}px`,borderRadius:u?f/2+"px":0},r)}),C=P(()=>{const{height:o,circle:l,barStyle:u}=e,r=parseInt(o);return D({height:`${r}px`,borderRadius:l?r/2+"px 0 0 "+r/2+"px":0},u)}),B=P(()=>{const{height:o,width:l,contentStyle:u}=e,r=`${parseInt(o)}px`,f=`${parseInt(l)}px`;return D({height:r,width:f},u)});z(()=>n.isPassing,o=>{if(o){const{startTime:l,endTime:u}=n,r=(u-l)/1e3;t("success",{isPassing:o,time:r.toFixed(1)}),t("update:value",o),t("change",o)}}),de(()=>{n.isPassing=!!e.value});function E(o){return o.pageX||o.touches[0].pageX}function i(o){if(n.isPassing)return;const l=p(y);!l||(t("start",o),n.moveDistance=E(o)-parseInt(l.style.left.replace("px",""),10),n.startTime=new Date().getTime(),n.isMoving=!0)}function m(o){const l=parseInt(o.style.width),{width:u}=e,r=parseInt(u);return{offset:r-l-6,widthNum:r,actionWidth:l}}function v(o){const{isMoving:l,moveDistance:u}=n;if(l){const r=p(y),f=p(d);if(!r||!f)return;const{offset:_,widthNum:I,actionWidth:L}=m(r),T=E(o)-u;t("move",{event:o,moveDistance:u,moveX:T}),T>0&&T<=_?(r.style.left=`${T}px`,f.style.width=`${T+L/2}px`):T>_&&(r.style.left=`${I-L}px`,f.style.width=`${I-L/2}px`,e.isSlot||M())}}function S(o){const{isMoving:l,isPassing:u,moveDistance:r}=n;if(l&&!u){t("end",o);const f=p(y),_=p(d);if(!f||!_)return;const I=E(o)-r,{offset:L,widthNum:T,actionWidth:X}=m(f);I<L?e.isSlot?setTimeout(()=>{if(!e.value)w();else{const Z=p(g);Z&&(Z.style.width=`${parseInt(_.style.width)}px`)}},0):w():(f.style.left=`${T-X}px`,_.style.width=`${T-X/2}px`,M()),n.isMoving=!1}}function M(){if(e.isSlot){w();return}n.endTime=new Date().getTime(),n.isPassing=!0,n.isMoving=!1}function w(){n.isMoving=!1,n.isPassing=!1,n.moveDistance=0,n.toLeft=!1,n.startTime=0,n.endTime=0;const o=p(y),l=p(d),u=p(g);!o||!l||!u||(n.toLeft=!0,ee(()=>{n.toLeft=!1,o.style.left="0",l.style.width="0"},300),u.style.width=p(B).width)}return b({resume:w}),()=>{const o=()=>{const r=["darg-verify-bar"];return n.toLeft&&r.push("to-left"),a("div",{class:r,ref:d,style:p(C)},null)},l=()=>{const r=["darg-verify-content"],{isPassing:f}=n,{text:_,successText:I}=e;return f&&r.push("success"),a("div",{class:r,ref:g,style:p(B)},[K(c,"text",f)||k(f?I:_)])},u=()=>{const r=["darg-verify-action"],{toLeft:f,isPassing:_}=n;return f&&r.push("to-left"),a("div",{class:r,onMousedown:i,onTouchstart:i,style:p(F),ref:y},[K(c,"actionIcon",_)||(_?a(N,{icon:"ant-design:check-outlined",class:"darg-verify-action__icon"},null):a(N,{icon:"ant-design:double-right-outlined",class:"darg-verify-action__icon"},null))])};return a("div",{class:"darg-verify",ref:s,style:p(h),onMousemove:v,onTouchmove:v,onMouseleave:S,onMouseup:S,onTouchend:S},[o(),l(),u()])}}});var be=V({name:"ImgRotateDragVerify",inheritAttrs:!1,props:_e,emits:["success","change","update:value"],setup(e,{emit:t,attrs:c,expose:b}){const n=x(null),s=Q({showTip:!1,isPassing:!1,imgStyle:{},randomRotate:0,currentRotate:0,toOrigin:!1,startTime:0,endTime:0,draged:!1}),{t:d}=U();z(()=>s.isPassing,i=>{if(i){const{startTime:m,endTime:v}=s,S=(v-m)/1e3;t("success",{isPassing:i,time:S.toFixed(1)}),t("change",i),t("update:value",i)}});const g=P(()=>{const{imgWrapStyle:i,imgWidth:m}=e;return D({width:`${m}px`,height:`${m}px`},i)}),y=P(()=>{const{minDegree:i,maxDegree:m}=e;return i===m?Math.floor(1+Math.random()*1)/10+1:1});function k(){s.startTime=new Date().getTime()}function F(i){s.draged=!0;const{imgWidth:m,height:v,maxDegree:S}=e,{moveX:M}=i,w=Math.ceil(M/(m-parseInt(v))*S*p(y));s.currentRotate=w,s.imgStyle=O("transform",`rotateZ(${s.randomRotate-w}deg)`)}function h(){const{minDegree:i,maxDegree:m}=e,v=Math.floor(i+Math.random()*(m-i));s.randomRotate=v,s.imgStyle=O("transform",`rotateZ(${v}deg)`)}function C(){const{randomRotate:i,currentRotate:m}=s,{diffDegree:v}=e;Math.abs(i-m)>=(v||20)?(s.imgStyle=O("transform",`rotateZ(${i}deg)`),s.toOrigin=!0,ee(()=>{s.toOrigin=!1,s.showTip=!0},300)):B(),s.showTip=!0}function B(){s.isPassing=!0,s.endTime=new Date().getTime()}function E(){s.showTip=!1;const i=p(n);!i||(s.isPassing=!1,i.resume(),h())}return b({resume:E}),()=>{const{src:i}=e,{toOrigin:m,isPassing:v,startTime:S,endTime:M}=s,w=[];m&&w.push("to-origin");const o=(M-S)/1e3;return a("div",{class:"img-rotate-verify"},[a("div",{class:"img-rotate-verify-img__wrap",style:p(g)},[a("img",{src:i,onLoad:h,width:parseInt(e.width),class:w,style:s.imgStyle,onClick:()=>{E()},alt:"verify"},null),s.showTip&&a("span",{class:["img-rotate-verify-img__tip",s.isPassing?"success":"error"]},[s.isPassing?d("components.verify.time",{time:o.toFixed(1)}):d("components.verify.error")]),!s.showTip&&!s.draged&&a("span",{class:["img-rotate-verify-img__tip","normal"]},[d("components.verify.redoTip")])]),a(ne,fe({class:"img-rotate-verify-drag__bar",onMove:F,onEnd:C,onStart:k,ref:n},D(D({},c),e),{value:v,isSlot:!0}),null)])}}});const xe=V({setup(){const e=x(null),t=x(null),c=x(null),b=x(null),n=x(null);function s(g){}function d(g){!g||g.resume()}return{handleSuccess:s,el1:e,el2:t,el3:c,el4:b,el5:n,handleBtnClick:d,img:ye}}}),we={class:"flex justify-center p-4 items-center bg-gray-700"},ke=R(" \u8FD8\u539F "),Se={class:"flex justify-center p-4 items-center bg-gray-700"},Te=R(" \u8FD8\u539F "),De={class:"flex justify-center p-4 items-center bg-gray-700"},$e=R(" \u8FD8\u539F "),Ee={class:"flex justify-center p-4 items-center bg-gray-700"},Fe=R(" \u8FD8\u539F "),Re={class:"flex justify-center p-4 items-center bg-gray-700"},Ce={key:0},Be=R(" \u6210\u529F "),Me={key:1},Ie=R(" \u62D6\u52A8 "),je=R(" \u8FD8\u539F "),Pe={class:"flex justify-center p-4 items-center bg-gray-700"};function Le(e,t,c,b,n,s){const d=ne,g=pe,y=N,k=he,F=be;return A(),W(me,null,[a(k,{header:"\u62D6\u52A8\u6821\u9A8C\u793A\u4F8B"},{default:$(()=>[j("div",we,[a(d,{ref:"el1",onSuccess:e.handleSuccess},null,8,["onSuccess"]),a(g,{type:"primary",class:"ml-2",onClick:t[0]||(t[0]=h=>e.handleBtnClick(e.el1))},{default:$(()=>[ke]),_:1})]),j("div",Se,[a(d,{ref:"el2",circle:"",onSuccess:e.handleSuccess},null,8,["onSuccess"]),a(g,{type:"primary",class:"ml-2",onClick:t[1]||(t[1]=h=>e.handleBtnClick(e.el2))},{default:$(()=>[Te]),_:1})]),j("div",De,[a(d,{ref:"el3",text:"\u62D6\u52A8\u4EE5\u8FDB\u884C\u6821\u9A8C","success-text":"\u6821\u9A8C\u6210\u529F","bar-style":{backgroundColor:"#018ffb"},onSuccess:e.handleSuccess},null,8,["onSuccess"]),a(g,{type:"primary",class:"ml-2",onClick:t[2]||(t[2]=h=>e.handleBtnClick(e.el3))},{default:$(()=>[$e]),_:1})]),j("div",Ee,[a(d,{ref:"el4",onSuccess:e.handleSuccess},{actionIcon:$(h=>[h?(A(),G(y,{key:0,icon:"ant-design:bug-outlined"})):(A(),G(y,{key:1,icon:"ant-design:right-outlined"}))]),_:1},8,["onSuccess"]),a(g,{type:"primary",class:"ml-2",onClick:t[3]||(t[3]=h=>e.handleBtnClick(e.el4))},{default:$(()=>[Fe]),_:1})]),j("div",Re,[a(d,{ref:"el5",onSuccess:e.handleSuccess},{text:$(h=>[h?(A(),W("div",Ce,[a(y,{icon:"ant-design:bug-outlined"}),Be])):(A(),W("div",Me,[Ie,a(y,{icon:"ant-design:right-outlined"})]))]),_:1},8,["onSuccess"]),a(g,{type:"primary",class:"ml-2",onClick:t[4]||(t[4]=h=>e.handleBtnClick(e.el5))},{default:$(()=>[je]),_:1})])]),_:1}),a(k,{header:"\u65CB\u8F6C\u793A\u4F8B"},{default:$(()=>[j("div",Pe,[a(F,{ref:"el",src:e.img,onSuccess:e.handleSuccess},null,8,["src","onSuccess"])])]),_:1})],64)}var Ze=ge(xe,[["render",Le],["__scopeId","data-v-7bf8f1b1"]]);export{Ze as default};
