import{s as ue,x as S,al as O,bL as b,bM as P,bN as ie,aS as ce,aG as de,ao as z,aF as h,e as fe,am as L,aV as ve,aW as me,aX as pe,A as he,bc as ye,g as _,B as n,b4 as K,ap as W,R as be,o as d,c as V,J as Ve,I as xe,F as p,C as t,b as we,w as $,j as E,G as R,H as I,S as G,D as q,t as Ce,L as ge,a6 as x,bA as X,aq as Se}from"./index.6b8e7d20.js";const _e=ue({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:S([Array,Object]),default:()=>O(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:S([Array,Object]),default:()=>[b,b,b]},voidIcon:{type:P,default:()=>ie},disabledVoidIcon:{type:P,default:()=>b},disabled:{type:Boolean},allowHalf:{type:Boolean},showText:{type:Boolean},showScore:{type:Boolean},textColor:{type:String,default:""},texts:{type:S(Array),default:()=>O(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:{type:String,validator:ce},label:{type:String,default:void 0}}),Ee={[de]:m=>z(m),[h]:m=>z(m)},Ie=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],Te=["onMousemove","onClick"],Ne={name:"ElRate"},De=fe({...Ne,props:_e,emits:Ee,setup(m,{expose:J,emit:c}){const e=m;function w(a,l){const o=i=>W(i),g=Object.keys(l).map(i=>+i).filter(i=>{const y=l[i];return(o(y)?y.excluded:!1)?a<i:a<=i}).sort((i,y)=>i-y),v=l[g[0]];return o(v)&&v.value||v}const T=L(ve,void 0),N=L(me,void 0),U=pe(),r=he("rate"),{inputId:Q,isLabeledByFormItem:D}=ye(e,{formItemContext:N}),s=_(e.modelValue),C=_(-1),f=_(!0),Y=n(()=>[r.b(),r.m(U.value)]),u=n(()=>e.disabled||(T==null?void 0:T.disabled)),Z=n(()=>r.cssVarBlock({"void-color":e.voidColor,"disabled-void-color":e.disabledVoidColor,"fill-color":A.value})),H=n(()=>{let a="";return e.showScore?a=e.scoreTemplate.replace(/\{\s*value\s*\}/,u.value?`${e.modelValue}`:`${s.value}`):e.showText&&(a=e.texts[Math.ceil(s.value)-1]),a}),M=n(()=>e.modelValue*100-Math.floor(e.modelValue)*100),ee=n(()=>K(e.colors)?{[e.lowThreshold]:e.colors[0],[e.highThreshold]:{value:e.colors[1],excluded:!0},[e.max]:e.colors[2]}:e.colors),A=n(()=>{const a=w(s.value,ee.value);return W(a)?"":a}),ae=n(()=>{let a="";return u.value?a=`${M.value}%`:e.allowHalf&&(a="50%"),{color:A.value,width:a}}),k=n(()=>K(e.icons)?{[e.lowThreshold]:e.icons[0],[e.highThreshold]:{value:e.icons[1],excluded:!0},[e.max]:e.icons[2]}:e.icons),le=n(()=>w(e.modelValue,k.value)),oe=n(()=>u.value?e.disabledVoidIcon:e.voidIcon),te=n(()=>w(s.value,k.value)),se=n(()=>{const a=Array.from({length:e.max}),l=s.value;return a.fill(te.value,0,l),a.fill(oe.value,l,e.max),a});function B(a){const l=u.value&&M.value>0&&a-1<e.modelValue&&a>e.modelValue,o=e.allowHalf&&f.value&&a-.5<=s.value&&a>s.value;return l||o}function re(a){u.value||(e.allowHalf&&f.value?(c(h,s.value),e.modelValue!==s.value&&c("change",s.value)):(c(h,a),e.modelValue!==a&&c("change",a)))}function ne(a){if(u.value)return;let l=s.value;const o=a.code;return o===x.up||o===x.right?(e.allowHalf?l+=.5:l+=1,a.stopPropagation(),a.preventDefault()):(o===x.left||o===x.down)&&(e.allowHalf?l-=.5:l-=1,a.stopPropagation(),a.preventDefault()),l=l<0?0:l,l=l>e.max?e.max:l,c(h,l),c("change",l),l}function j(a,l){if(!u.value){if(e.allowHalf){let o=l.target;X(o,r.e("item"))&&(o=o.querySelector(`.${r.e("icon")}`)),(o.clientWidth===0||X(o,r.e("decimal")))&&(o=o.parentNode),f.value=l.offsetX*2<=o.clientWidth,s.value=f.value?a-.5:a}else s.value=a;C.value=a}}function F(){u.value||(e.allowHalf&&(f.value=e.modelValue!==Math.floor(e.modelValue)),s.value=e.modelValue,C.value=-1)}return be(()=>e.modelValue,a=>{s.value=a,f.value=e.modelValue!==Math.floor(e.modelValue)}),e.modelValue||c(h,0),J({setCurrentValue:j,resetCurrentValue:F}),(a,l)=>(d(),V("div",{id:t(Q),class:p([t(Y),t(r).is("disabled",t(u))]),role:"slider","aria-label":t(D)?void 0:a.label||"rating","aria-labelledby":t(D)?t(N).labelId:void 0,"aria-valuenow":s.value,"aria-valuetext":t(H)||void 0,"aria-valuemin":"0","aria-valuemax":a.max,tabindex:"0",style:G(t(Z)),onKeydown:ne},[(d(!0),V(Ve,null,xe(a.max,(o,g)=>(d(),V("span",{key:g,class:p(t(r).e("item")),onMousemove:v=>j(o,v),onMouseleave:F,onClick:v=>re(o)},[we(t(q),{class:p([t(r).e("icon"),{hover:C.value===o},t(r).is("active",o<=s.value)])},{default:$(()=>[B(o)?I("v-if",!0):(d(),E(R(t(se)[o-1]),{key:0})),B(o)?(d(),E(t(q),{key:1,style:G(t(ae)),class:p([t(r).e("icon"),t(r).e("decimal")])},{default:$(()=>[(d(),E(R(t(le))))]),_:1},8,["style","class"])):I("v-if",!0)]),_:2},1032,["class"])],42,Te))),128)),a.showText||a.showScore?(d(),V("span",{key:0,class:p(t(r).e("text"))},Ce(t(H)),3)):I("v-if",!0)],46,Ie))}});var He=ge(De,[["__file","/home/runner/work/element-plus/element-plus/packages/components/rate/src/rate.vue"]]);const ke=Se(He);export{ke as E};
