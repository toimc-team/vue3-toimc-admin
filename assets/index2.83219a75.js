var ue=Object.defineProperty,se=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var R=(t,i,s)=>i in t?ue(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,$=(t,i)=>{for(var s in i||(i={}))oe.call(i,s)&&R(t,s,i[s]);if(L)for(var s of L(i))ce.call(i,s)&&R(t,s,i[s]);return t},H=(t,i)=>se(t,ie(i));import{s as de,v as me,an as p,aF as pe,bC as be,be as I,aE as fe,e as ve,au as Ne,A as Ve,g as he,h as Ie,bD as ge,B as h,az as _,aW as we,bo as ye,R as _e,a3 as Ee,bE as Se,o as f,c as C,a7 as W,C as a,F as x,b1 as E,b as D,w as Y,j as S,aP as Pe,bF as Fe,D as j,H as X,bw as Ae,bG as ke,a9 as B,M as Ce,L as xe,af as De,aX as q,ap as Be}from"./index.b0500663.js";import{v as J}from"./index2.aa525e01.js";const Te=de({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,disabled:Boolean,size:me,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||p(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)}}),ze={[pe]:(t,i)=>t!==i,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[be]:t=>p(t)||I(t),[fe]:t=>p(t)||I(t)},Me=["aria-label","onKeydown"],Ke=["aria-label","onKeydown"],Oe={name:"ElInputNumber"},Ue=ve(H($({},Oe),{props:Te,emits:ze,setup(t,{expose:i,emit:s}){const r=t,{t:T}=Ne(),m=Ve("input-number"),N=he(),o=Ie({currentValue:r.modelValue,userInput:null}),{formItem:v}=ge(),z=h(()=>p(r.modelValue)&&g(r.modelValue,-1)<r.min),M=h(()=>p(r.modelValue)&&g(r.modelValue)>r.max),Q=h(()=>{const e=U(r.step);return _(r.precision)?Math.max(U(r.modelValue),e):(e>r.precision,r.precision)}),P=h(()=>r.controls&&r.controlsPosition==="right"),K=we(),V=ye(),Z=h(()=>{if(o.userInput!==null)return o.userInput;let e=o.currentValue;if(I(e))return"";if(p(e)){if(Number.isNaN(e))return"";_(r.precision)||(e=e.toFixed(r.precision))}return e}),O=(e,n)=>{if(_(n)&&(n=Q.value),n===0)return Math.round(e);let l=String(e);const u=l.indexOf(".");if(u===-1||!l.replace(".","").split("")[u+n])return e;const w=l.length;return l.charAt(w-1)==="5"&&(l=`${l.slice(0,Math.max(0,w-1))}6`),Number.parseFloat(Number(l).toFixed(n))},U=e=>{if(I(e))return 0;const n=e.toString(),l=n.indexOf(".");let u=0;return l!==-1&&(u=n.length-l-1),u},g=(e,n=1)=>p(e)?O(e+r.step*n):o.currentValue,F=()=>{if(V.value||M.value)return;const e=r.modelValue||0,n=g(e);k(n)},A=()=>{if(V.value||z.value)return;const e=r.modelValue||0,n=g(e,-1);k(n)},G=(e,n)=>{const{max:l,min:u,step:c,precision:b,stepStrictly:w,valueOnClear:y}=r;let d=Number(e);if(I(e)||Number.isNaN(d))return null;if(e===""){if(y===null)return null;d=De(y)?{min:u,max:l}[y]:y}return w&&(d=Math.round(d/c)*c),_(b)||(d=O(d,b)),(d>l||d<u)&&(d=d>l?l:u,n&&s("update:modelValue",d)),d},k=e=>{var n;const l=o.currentValue,u=G(e);l!==u&&(o.userInput=null,s("update:modelValue",u),s("input",u),s("change",u,l),(n=v==null?void 0:v.validate)==null||n.call(v,"change").catch(c=>q()),o.currentValue=u)},ee=e=>o.userInput=e,ne=e=>{const n=e!==""?Number(e):"";(p(n)&&!Number.isNaN(n)||e==="")&&k(n),o.userInput=null},te=()=>{var e,n;(n=(e=N.value)==null?void 0:e.focus)==null||n.call(e)},ae=()=>{var e,n;(n=(e=N.value)==null?void 0:e.blur)==null||n.call(e)},re=e=>{s("focus",e)},le=e=>{var n;s("blur",e),(n=v==null?void 0:v.validate)==null||n.call(v,"blur").catch(l=>q())};return _e(()=>r.modelValue,e=>{o.currentValue=G(e,!0),o.userInput=null},{immediate:!0}),Ee(()=>{var e;const{min:n,max:l,modelValue:u}=r,c=(e=N.value)==null?void 0:e.input;if(c.setAttribute("role","spinbutton"),Number.isFinite(l)?c.setAttribute("aria-valuemax",String(l)):c.removeAttribute("aria-valuemax"),Number.isFinite(n)?c.setAttribute("aria-valuemin",String(n)):c.removeAttribute("aria-valuemin"),c.setAttribute("aria-valuenow",String(o.currentValue)),c.setAttribute("aria-disabled",String(V.value)),!p(u)&&u!=null){let b=Number(u);Number.isNaN(b)&&(b=null),s("update:modelValue",b)}}),Se(()=>{var e;const n=(e=N.value)==null?void 0:e.input;n==null||n.setAttribute("aria-valuenow",`${o.currentValue}`)}),i({focus:te,blur:ae}),(e,n)=>(f(),C("div",{class:x([a(m).b(),a(m).m(a(K)),a(m).is("disabled",a(V)),a(m).is("without-controls",!e.controls),a(m).is("controls-right",a(P))]),onDragstart:n[0]||(n[0]=B(()=>{},["prevent"]))},[e.controls?W((f(),C("span",{key:0,role:"button","aria-label":a(T)("el.inputNumber.decrease"),class:x([a(m).e("decrease"),a(m).is("disabled",a(z))]),onKeydown:E(A,["enter"])},[D(a(j),null,{default:Y(()=>[a(P)?(f(),S(a(Pe),{key:0})):(f(),S(a(Fe),{key:1}))]),_:1})],42,Me)),[[a(J),A]]):X("v-if",!0),e.controls?W((f(),C("span",{key:1,role:"button","aria-label":a(T)("el.inputNumber.increase"),class:x([a(m).e("increase"),a(m).is("disabled",a(M))]),onKeydown:E(F,["enter"])},[D(a(j),null,{default:Y(()=>[a(P)?(f(),S(a(Ae),{key:0})):(f(),S(a(ke),{key:1}))]),_:1})],42,Ke)),[[a(J),F]]):X("v-if",!0),D(a(Ce),{id:e.id,ref_key:"input",ref:N,type:"number",step:e.step,"model-value":a(Z),placeholder:e.placeholder,disabled:a(V),size:a(K),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[E(B(F,["prevent"]),["up"]),E(B(A,["prevent"]),["down"])],onBlur:le,onFocus:re,onInput:ee,onChange:ne},null,8,["id","step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown"])],34))}}));var Ge=xe(Ue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const He=Be(Ge);export{He as E};
