var T=Object.defineProperty,V=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var w=(t,e,a)=>e in t?T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,f=(t,e)=>{for(var a in e||(e={}))P.call(e,a)&&w(t,a,e[a]);if(C)for(var a of C(e))O.call(e,a)&&w(t,a,e[a]);return t},p=(t,e)=>V(t,E(e));import{b4 as R,A as z,g as $,h as j,co as q,cp as x,ak as g,w as K,a7 as Z,a8 as D,b as F,aa as H,ab as M,aK as B,af as I,ad as Y,cq as m,cr as L,ap as N,cs as G,bc as J}from"./index.2df2d850.js";function Q(t){let e;const a=z("loading"),n=$(!1),l=j(p(f({},t),{originalPosition:"",originalOverflow:"",visible:!1}));function o(s){l.text=s}function d(){const s=l.parent;if(!s.vLoadingAddClassList){let i=s.getAttribute("loading-number");i=Number.parseInt(i)-1,i?s.setAttribute("loading-number",i.toString()):(x(s,a.bm("parent","relative")),s.removeAttribute("loading-number")),x(s,a.bm("parent","hidden"))}u(),v.unmount()}function u(){var s,i;(i=(s=r.$el)==null?void 0:s.parentNode)==null||i.removeChild(r.$el)}function y(){var s;if(t.beforeClose&&!t.beforeClose())return;const i=l.parent;i.vLoadingAddClassList=void 0,n.value=!0,clearTimeout(e),e=window.setTimeout(()=>{n.value&&(n.value=!1,d())},400),l.visible=!1,(s=t.closed)==null||s.call(t)}function c(){!n.value||(n.value=!1,d())}const v=q({name:"ElLoading",setup(){return()=>{const s=l.spinner||l.svg,i=g("svg",f({class:"circular",viewBox:l.svgViewBox?l.svgViewBox:"25 25 50 50"},s?{innerHTML:s}:{}),[g("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none"})]),S=l.text?g("p",{class:a.b("text")},[l.text]):void 0;return g(H,{name:a.b("fade"),onAfterLeave:c},{default:K(()=>[Z(F("div",{style:{backgroundColor:l.background||""},class:[a.b("mask"),l.customClass,l.fullscreen?"is-fullscreen":""]},[g("div",{class:a.b("spinner")},[i,S])]),[[D,l.visible]])])})}}}),r=v.mount(document.createElement("div"));return p(f({},R(l)),{setText:o,removeElLoadingChild:u,close:y,handleAfterLeave:c,vm:r,get $el(){return r.$el}})}let b;const U=function(t={}){if(!M)return;const e=W(t);if(e.fullscreen&&b)return b;const a=Q(p(f({},e),{closed:()=>{var l;(l=e.closed)==null||l.call(e),e.fullscreen&&(b=void 0)}}));X(e,e.parent,a),A(e,e.parent,a),e.parent.vLoadingAddClassList=()=>A(e,e.parent,a);let n=e.parent.getAttribute("loading-number");return n?n=`${Number.parseInt(n)+1}`:n="1",e.parent.setAttribute("loading-number",n),e.parent.appendChild(a.$el),B(()=>a.visible.value=e.visible),e.fullscreen&&(b=a),a},W=t=>{var e,a,n,l;let o;return I(t.target)?o=(e=document.querySelector(t.target))!=null?e:document.body:o=t.target||document.body,{parent:o===document.body||t.body?document.body:o,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:o===document.body&&((a=t.fullscreen)!=null?a:!0),lock:(n=t.lock)!=null?n:!1,customClass:t.customClass||"",visible:(l=t.visible)!=null?l:!0,target:o}},X=async(t,e,a)=>{const{nextZIndex:n}=Y(),l={};if(t.fullscreen)a.originalPosition.value=m(document.body,"position"),a.originalOverflow.value=m(document.body,"overflow"),l.zIndex=n();else if(t.parent===document.body){a.originalPosition.value=m(document.body,"position"),await B();for(const o of["top","left"]){const d=o==="top"?"scrollTop":"scrollLeft";l[o]=`${t.target.getBoundingClientRect()[o]+document.body[d]+document.documentElement[d]-Number.parseInt(m(document.body,`margin-${o}`),10)}px`}for(const o of["height","width"])l[o]=`${t.target.getBoundingClientRect()[o]}px`}else a.originalPosition.value=m(e,"position");for(const[o,d]of Object.entries(l))a.$el.style[o]=d},A=(t,e,a)=>{const n=z("loading");a.originalPosition.value!=="absolute"&&a.originalPosition.value!=="fixed"?L(e,n.bm("parent","relative")):x(e,n.bm("parent","relative")),t.fullscreen&&t.lock?L(e,n.bm("parent","hidden")):x(e,n.bm("parent","hidden"))},k=Symbol("ElLoading"),_=(t,e)=>{var a,n,l,o;const d=e.instance,u=r=>N(e.value)?e.value[r]:void 0,y=r=>{const s=I(r)&&(d==null?void 0:d[r])||r;return s&&$(s)},c=r=>y(u(r)||t.getAttribute(`element-loading-${G(r)}`)),h=(a=u("fullscreen"))!=null?a:e.modifiers.fullscreen,v={text:c("text"),svg:c("svg"),svgViewBox:c("svgViewBox"),spinner:c("spinner"),background:c("background"),customClass:c("customClass"),fullscreen:h,target:(n=u("target"))!=null?n:h?void 0:t,body:(l=u("body"))!=null?l:e.modifiers.body,lock:(o=u("lock"))!=null?o:e.modifiers.lock};t[k]={options:v,instance:U(v)}},ee=(t,e)=>{for(const a of Object.keys(e))J(e[a])&&(e[a].value=t[a])},le={mounted(t,e){e.value&&_(t,e)},updated(t,e){const a=t[k];e.oldValue!==e.value&&(e.value&&!e.oldValue?_(t,e):e.value&&e.oldValue?N(e.value)&&ee(e.value,a.options):a==null||a.instance.close())},unmounted(t){var e;(e=t[k])==null||e.instance.close()}};export{le as v};
