var Se=Object.defineProperty,Pe=Object.defineProperties;var Te=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var De=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var X=(l,t,s)=>t in l?Se(l,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[t]=s,H=(l,t)=>{for(var s in t||(t={}))De.call(t,s)&&X(l,s,t[s]);if(W)for(var s of W(t))_e.call(t,s)&&X(l,s,t[s]);return l},I=(l,t)=>Pe(l,Te(t));import{d as D}from"./dayjs.min.5ea46fba.js";import{t as Ve,b as Ce,d as we,e as Re,T as Y,c as xe,f as Ae,g as Ee,D as Me,C as Oe}from"./index.0b6f6dcd.js";import{s as ye,x as Be,e as ee,av as He,A as Z,am as Ie,B as T,g as ne,o as Fe,c as Ne,a as m,F as p,C as a,t as C,b as R,H as Ue,L as Ke,bP as F,b4 as N,a6 as Le,aH as $e,T as je}from"./index.58bcf13a.js";const ze=ye(I(H({},Ve),{parsedValue:{type:Be(Array)}})),Ge=["disabled"],qe=ee({__name:"panel-time-range",props:ze,emits:["pick","select-range","set-picker-option"],setup(l,{emit:t}){const s=l,b=(e,n)=>{const r=[];for(let c=e;c<=n;c++)r.push(c);return r},{t:S,lang:v}=He(),o=Z("time"),f=Z("picker"),x=Ie("EP_PICKER_BASE"),{arrowControl:_,disabledHours:U,disabledMinutes:K,disabledSeconds:L,defaultValue:A}=x.props,g=T(()=>s.parsedValue[0]),k=T(()=>s.parsedValue[1]),ae=Ce(s),te=()=>{t("pick",ae.value,!1)},h=T(()=>s.format.includes("ss")),$=T(()=>s.format.includes("A")?"A":s.format.includes("a")?"a":""),se=(e=!1)=>{t("pick",[g.value,k.value],e)},oe=e=>{j(e.millisecond(0),k.value)},re=e=>{j(g.value,e.millisecond(0))},le=e=>{const n=e.map(c=>D(c).locale(v.value)),r=G(n);return n[0].isSame(r[0])&&n[1].isSame(r[1])},j=(e,n)=>{t("pick",[e,n],!0)},ce=T(()=>g.value>k.value),V=ne([0,2]),ie=(e,n)=>{t("select-range",e,n,"min"),V.value=[e,n]},z=T(()=>h.value?11:8),ue=(e,n)=>{t("select-range",e,n,"max");const r=a(z);V.value=[e+r,n+r]},pe=e=>{const n=h.value?[0,3,6,11,14,17]:[0,3,8,11],r=["hours","minutes"].concat(h.value?["seconds"]:[]),i=(n.indexOf(V.value[0])+e+n.length)%n.length,u=n.length/2;i<u?y.start_emitSelectRange(r[i]):y.end_emitSelectRange(r[i-u])},de=e=>{const n=e.code,{left:r,right:c,up:i,down:u}=Le;if([r,c].includes(n)){pe(n===r?-1:1),e.preventDefault();return}if([i,u].includes(n)){const d=n===i?-1:1,P=V.value[0]<z.value?"start":"end";y[`${P}_scrollDown`](d),e.preventDefault();return}},E=(e,n)=>{const r=U?U(e):[],c=e==="start",u=(n||(c?k.value:g.value)).hour(),d=c?b(u+1,23):b(0,u-1);return F(r,d)},M=(e,n,r)=>{const c=K?K(e,n):[],i=n==="start",u=r||(i?k.value:g.value),d=u.hour();if(e!==d)return c;const P=u.minute(),B=i?b(P+1,59):b(0,P-1);return F(c,B)},O=(e,n,r,c)=>{const i=L?L(e,n,r):[],u=r==="start",d=c||(u?k.value:g.value),P=d.hour(),B=d.minute();if(e!==P||n!==B)return i;const Q=d.second(),he=u?b(Q+1,59):b(0,Q-1);return F(i,he)},G=([e,n])=>[q(e,"start",!0,n),q(n,"end",!1,e)],{getAvailableHours:me,getAvailableMinutes:fe,getAvailableSeconds:be}=we(E,M,O),{timePickerOptions:y,getAvailableTime:q,onSetOption:J}=Re({getAvailableHours:me,getAvailableMinutes:fe,getAvailableSeconds:be}),ve=e=>e?N(e)?e.map(n=>D(n,s.format).locale(v.value)):D(e,s.format).locale(v.value):null,ge=e=>e?N(e)?e.map(n=>n.format(s.format)):e.format(s.format):null,ke=()=>{if(N(A))return A.map(n=>D(n).locale(v.value));const e=D(A).locale(v.value);return[e,e.add(60,"m")]};return t("set-picker-option",["formatToString",ge]),t("set-picker-option",["parseUserInput",ve]),t("set-picker-option",["isValidValue",le]),t("set-picker-option",["handleKeydownInput",de]),t("set-picker-option",["getDefaultValue",ke]),t("set-picker-option",["getRangeAvailableTime",G]),(e,n)=>e.actualVisible?(Fe(),Ne("div",{key:0,class:p([a(o).b("range-picker"),a(f).b("panel")])},[m("div",{class:p(a(o).be("range-picker","content"))},[m("div",{class:p(a(o).be("range-picker","cell"))},[m("div",{class:p(a(o).be("range-picker","header"))},C(a(S)("el.datepicker.startTime")),3),m("div",{class:p([a(o).be("range-picker","body"),a(o).be("panel","content"),a(o).is("arrow",a(_)),{"has-seconds":a(h)}])},[R(Y,{ref:"minSpinner",role:"start","show-seconds":a(h),"am-pm-mode":a($),"arrow-control":a(_),"spinner-date":a(g),"disabled-hours":E,"disabled-minutes":M,"disabled-seconds":O,onChange:oe,onSetOption:a(J),onSelectRange:ie},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),m("div",{class:p(a(o).be("range-picker","cell"))},[m("div",{class:p(a(o).be("range-picker","header"))},C(a(S)("el.datepicker.endTime")),3),m("div",{class:p([a(o).be("range-picker","body"),a(o).be("panel","content"),a(o).is("arrow",a(_)),{"has-seconds":a(h)}])},[R(Y,{ref:"maxSpinner",role:"end","show-seconds":a(h),"am-pm-mode":a($),"arrow-control":a(_),"spinner-date":a(k),"disabled-hours":E,"disabled-minutes":M,"disabled-seconds":O,onChange:re,onSetOption:a(J),onSelectRange:ue},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),m("div",{class:p(a(o).be("panel","footer"))},[m("button",{type:"button",class:p([a(o).be("panel","btn"),"cancel"]),onClick:n[0]||(n[0]=r=>te())},C(a(S)("el.datepicker.cancel")),3),m("button",{type:"button",class:p([a(o).be("panel","btn"),"confirm"]),disabled:a(ce),onClick:n[1]||(n[1]=r=>se())},C(a(S)("el.datepicker.confirm")),11,Ge)],2)],2)):Ue("v-if",!0)}});var Je=Ke(qe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);D.extend(xe);var Qe=ee({name:"ElTimePicker",install:null,props:I(H({},Ae),{isRange:{type:Boolean,default:!1}}),emits:["update:modelValue"],setup(l,t){const s=ne(),[b,S]=l.isRange?["timerange",Je]:["time",Ee],v=o=>t.emit("update:modelValue",o);return $e("ElPopperOptions",l.popperOptions),t.expose({focus:o=>{var f;(f=s.value)==null||f.handleFocusInput(o)},blur:o=>{var f;(f=s.value)==null||f.handleBlurInput(o)}}),()=>{var o;const f=(o=l.format)!=null?o:Me;return R(Oe,je(l,{ref:s,type:b,format:f,"onUpdate:modelValue":v}),{default:x=>R(S,x,null)})}}});const w=Qe;w.install=l=>{l.component(w.name,w)};const en=w;export{en as E};
