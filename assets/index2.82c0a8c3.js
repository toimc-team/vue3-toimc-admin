var ke=Object.defineProperty,Te=Object.defineProperties;var Ce=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var De=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var J=(e,s,t)=>s in e?ke(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,y=(e,s)=>{for(var t in s||(s={}))De.call(s,t)&&J(e,t,s[t]);if(G)for(var t of G(s))we.call(s,t)&&J(e,t,s[t]);return e},M=(e,s)=>Te(e,Ce(s));import{d as T}from"./dayjs.min.9b8196c1.js";import{T as Re,d as Ae,g as Pe,c as ye,t as Me,e as Ve,D as Ee,C as Oe}from"./index2.7aa29399.js";import{e as Y,aq as Be,z as Q,A as v,g as E,aj as He,B as Ie,a4 as S,bE as $,r as $e,o as Fe,c as Ne,a as g,C as b,t as V,b as W,F as Ue,aC as je,ah as X}from"./index.d62185ec.js";const k=(e,s)=>{const t=[];for(let d=e;d<=s;d++)t.push(d);return t},Ke=Y({components:{TimeSpinner:Re},props:{visible:Boolean,actualVisible:Boolean,parsedValue:{type:[Array]},format:{type:String,default:""}},emits:["pick","select-range","set-picker-option"],setup(e,s){const{t,lang:d}=Be(),D=Q("time"),w=Q("picker"),i=v(()=>e.parsedValue[0]),u=v(()=>e.parsedValue[1]),C=Ae(e),Z=()=>{s.emit("pick",C.value,!1)},R=v(()=>e.format.includes("ss")),_=v(()=>e.format.includes("A")?"A":e.format.includes("a")?"a":""),x=E([]),ee=E([]),ne=(n=!1)=>{s.emit("pick",[i.value,u.value],n)},ae=n=>{F(n.millisecond(0),u.value)},se=n=>{F(i.value,n.millisecond(0))},oe=n=>{const a=n.map(l=>T(l).locale(d.value)),o=K(a);return a[0].isSame(o[0])&&a[1].isSame(o[1])},F=(n,a)=>{s.emit("pick",[n,a],!0)},te=v(()=>i.value>u.value),A=E([0,2]),ie=(n,a)=>{s.emit("select-range",n,a,"min"),A.value=[n,a]},B=v(()=>R.value?11:8),re=(n,a)=>{s.emit("select-range",n,a,"max"),A.value=[n+B.value,a+B.value]},le=n=>{const a=R.value?[0,3,6,11,14,17]:[0,3,8,11],o=["hours","minutes"].concat(R.value?["seconds"]:[]),c=(a.indexOf(A.value[0])+n+a.length)%a.length,r=a.length/2;c<r?P.start_emitSelectRange(o[c]):P.end_emitSelectRange(o[c-r])},ce=n=>{const a=n.code;if(a===S.left||a===S.right){const o=a===S.left?-1:1;le(o),n.preventDefault();return}if(a===S.up||a===S.down){const o=a===S.up?-1:1,l=A.value[0]<B.value?"start":"end";P[`${l}_scrollDown`](o),n.preventDefault();return}},N=(n,a)=>{const o=z?z(n):[],l=n==="start",r=(a||(l?u.value:i.value)).hour(),p=l?k(r+1,23):k(0,r-1);return $(o,p)},U=(n,a,o)=>{const l=L?L(n,a):[],c=a==="start",r=o||(c?u.value:i.value),p=r.hour();if(n!==p)return l;const f=r.minute(),m=c?k(f+1,59):k(0,f-1);return $(l,m)},j=(n,a,o,l)=>{const c=q?q(n,a,o):[],r=o==="start",p=l||(r?u.value:i.value),f=p.hour(),m=p.minute();if(n!==f||a!==m)return c;const h=p.second(),I=r?k(h+1,59):k(0,h-1);return $(c,I)},K=n=>n.map((a,o)=>pe(n[0],n[1],o===0?"start":"end")),{getAvailableHours:de,getAvailableMinutes:me,getAvailableSeconds:ue}=Pe(N,U,j),pe=(n,a,o)=>{const l={hour:de,minute:me,second:ue},c=o==="start";let r=c?n:a;const p=c?a:n;return["hour","minute","second"].forEach(f=>{if(l[f]){let m;const h=l[f];if(f==="minute"?m=h(r.hour(),o,p):f==="second"?m=h(r.hour(),r.minute(),o,p):m=h(o,p),m&&m.length&&!m.includes(r[f]())){const I=c?0:m.length-1;r=r[f](m[I])}}}),r},fe=n=>n?Array.isArray(n)?n.map(a=>T(a,e.format).locale(d.value)):T(n,e.format).locale(d.value):null,be=n=>n?Array.isArray(n)?n.map(a=>a.format(e.format)):n.format(e.format):null,ge=()=>{if(Array.isArray(H))return H.map(a=>T(a).locale(d.value));const n=T(H).locale(d.value);return[n,n.add(60,"m")]};s.emit("set-picker-option",["formatToString",be]),s.emit("set-picker-option",["parseUserInput",fe]),s.emit("set-picker-option",["isValidValue",oe]),s.emit("set-picker-option",["handleKeydownInput",ce]),s.emit("set-picker-option",["getDefaultValue",ge]),s.emit("set-picker-option",["getRangeAvailableTime",K]);const P={},he=n=>{P[n[0]]=n[1]},ve=He("EP_PICKER_BASE"),{arrowControl:Se,disabledHours:z,disabledMinutes:L,disabledSeconds:q,defaultValue:H}=ve.props;return{nsTime:D,nsPicker:w,arrowControl:Se,onSetOption:he,setMaxSelectionRange:re,setMinSelectionRange:ie,btnConfirmDisabled:te,handleCancel:Z,handleConfirm:ne,t,showSeconds:R,minDate:i,maxDate:u,amPmMode:_,handleMinChange:ae,handleMaxChange:se,minSelectableRange:x,maxSelectableRange:ee,disabledHours_:N,disabledMinutes_:U,disabledSeconds_:j}}}),ze=["disabled"];function Le(e,s,t,d,D,w){const i=$e("time-spinner");return e.actualVisible?(Fe(),Ne("div",{key:0,class:b([e.nsTime.b("range-picker"),e.nsPicker.b("panel")])},[g("div",{class:b(e.nsTime.be("range-picker","content"))},[g("div",{class:b(e.nsTime.be("range-picker","cell"))},[g("div",{class:b(e.nsTime.be("range-picker","header"))},V(e.t("el.datepicker.startTime")),3),g("div",{class:b([e.nsTime.be("range-picker","body"),e.nsTime.be("panel","content"),e.nsTime.is("arrow",e.arrowControl),{"has-seconds":e.showSeconds}])},[W(i,{ref:"minSpinner",role:"start","show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,"spinner-date":e.minDate,"disabled-hours":e.disabledHours_,"disabled-minutes":e.disabledMinutes_,"disabled-seconds":e.disabledSeconds_,onChange:e.handleMinChange,onSetOption:e.onSetOption,onSelectRange:e.setMinSelectionRange},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onChange","onSetOption","onSelectRange"])],2)],2),g("div",{class:b(e.nsTime.be("range-picker","cell"))},[g("div",{class:b(e.nsTime.be("range-picker","header"))},V(e.t("el.datepicker.endTime")),3),g("div",{class:b([e.nsTime.be("range-picker","body"),e.nsTime.be("panel","content"),e.nsTime.is("arrow",e.arrowControl),{"has-seconds":e.showSeconds}])},[W(i,{ref:"maxSpinner",role:"end","show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,"spinner-date":e.maxDate,"disabled-hours":e.disabledHours_,"disabled-minutes":e.disabledMinutes_,"disabled-seconds":e.disabledSeconds_,onChange:e.handleMaxChange,onSetOption:e.onSetOption,onSelectRange:e.setMaxSelectionRange},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onChange","onSetOption","onSelectRange"])],2)],2)],2),g("div",{class:b(e.nsTime.be("panel","footer"))},[g("button",{type:"button",class:b([e.nsTime.be("panel","btn"),"cancel"]),onClick:s[0]||(s[0]=u=>e.handleCancel())},V(e.t("el.datepicker.cancel")),3),g("button",{type:"button",class:b([e.nsTime.be("panel","btn"),"confirm"]),disabled:e.btnConfirmDisabled,onClick:s[1]||(s[1]=u=>e.handleConfirm())},V(e.t("el.datepicker.confirm")),11,ze)],2)],2)):Ue("v-if",!0)}var qe=Ie(Ke,[["render",Le],["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);T.extend(ye);var Ge=Y({name:"ElTimePicker",install:null,props:M(y({},Me),{isRange:{type:Boolean,default:!1}}),emits:["update:modelValue"],setup(e,s){const t=E(null),d=e.isRange?"timerange":"time",D=e.isRange?qe:Ve,w=M(y({},e),{focus:()=>{var i;(i=t.value)==null||i.handleFocusInput()},blur:()=>{var i;(i=t.value)==null||i.handleBlurInput()}});return je("ElPopperOptions",e.popperOptions),s.expose(w),()=>{var i;const u=(i=e.format)!=null?i:Ee;return X(Oe,M(y({},e),{format:u,type:d,ref:t,"onUpdate:modelValue":C=>s.emit("update:modelValue",C)}),{default:C=>X(D,C)})}}});const O=Ge;O.install=e=>{e.component(O.name,O)};const Ye=O;export{Ye as E};
