var Da=Object.defineProperty,Sa=Object.defineProperties;var za=Object.getOwnPropertyDescriptors;var Je=Object.getOwnPropertySymbols;var La=Object.prototype.hasOwnProperty,Ma=Object.prototype.propertyIsEnumerable;var Xe=(e,a,l)=>a in e?Da(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l,te=(e,a)=>{for(var l in a||(a={}))La.call(a,l)&&Xe(e,l,a[l]);if(Je)for(var l of Je(a))Ma.call(a,l)&&Xe(e,l,a[l]);return e},ue=(e,a)=>Sa(e,za(a));import{e as ce,A as ie,ak as xe,D as we,ar as oa,as as sa,at as ra,am as _e,B as y,L as ke,r as K,o as k,c as A,H as j,j as q,a9 as ye,w as D,b as F,F as T,J as de,a as ee,au as ia,av as ze,g as I,aw as xa,I as ve,k as da,t as Z,ax as Ia,ay as ne,az as Ie,aA as Ae,aB as Ye,aC as Ce,aD as Aa,aE as Ha,aF as ge,aG as me,aH as Ba,h as Ke,R as J,aI as Fa,a3 as ca,aJ as Oa,aK as pe,ab as ua,aL as Ka,a6 as G,aM as $e,aN as pa,M as ha,aO as Ra,aP as qa,z as Ua,aQ as ja,aR as Ga,aS as Wa,aT as Za,aU as Ja,aV as Xa,aW as Ya,aX as Qa,aY as fa,aZ as el,a_ as al,a$ as ll,b0 as tl,b1 as nl,a7 as fe,b2 as ol,b3 as sl,S as rl,a8 as Pe,W as De,s as va,x as Q,al as il,b4 as Se,b5 as dl,b6 as ga,b7 as cl,C as u,b8 as Me,b9 as ul,ba as pl,bb as hl,l as Qe,aq as fl}from"./index.58bcf13a.js";import{E as He,a as vl}from"./el-checkbox.74176d1c.js";import{E as gl}from"./index.9aa45e58.js";import{u as ea,a as aa}from"./index.0b6f6dcd.js";var ml=ce({name:"NodeContent",setup(){return{ns:ie("cascader-node")}},render(){const{ns:e}=this,{node:a,panel:l}=this.$parent,{data:t,label:n}=a,{renderLabelFn:s}=l;return xe("span",{class:e.e("label")},s?s({node:a,data:t}):n)}});const Re=Symbol(),bl=ce({name:"ElCascaderNode",components:{ElCheckbox:He,ElRadio:gl,NodeContent:ml,ElIcon:we,Check:oa,Loading:sa,ArrowRight:ra},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:a}){const l=_e(Re),t=ie("cascader-node"),n=y(()=>l.isHoverMenu),s=y(()=>l.config.multiple),i=y(()=>l.config.checkStrictly),d=y(()=>{var m;return(m=l.checkedNodes[0])==null?void 0:m.uid}),v=y(()=>e.node.isDisabled),f=y(()=>e.node.isLeaf),c=y(()=>i.value&&!f.value||!v.value),g=y(()=>N(l.expandingNode)),b=y(()=>i.value&&l.checkedNodes.some(N)),N=m=>{var M;const{level:C,uid:oe}=e.node;return((M=m==null?void 0:m.pathNodes[C-1])==null?void 0:M.uid)===oe},$=()=>{g.value||l.expandNode(e.node)},U=m=>{const{node:M}=e;m!==M.checked&&l.handleCheckChange(M,m)},r=()=>{l.lazyLoad(e.node,()=>{f.value||$()})},_=m=>{!n.value||(H(),!f.value&&a("expand",m))},H=()=>{const{node:m}=e;!c.value||m.loading||(m.loaded?$():r())},O=()=>{n.value&&!f.value||(f.value&&!v.value&&!i.value&&!s.value?S(!0):H())},L=m=>{i.value?(U(m),e.node.loaded&&$()):S(m)},S=m=>{e.node.loaded?(U(m),!i.value&&$()):r()};return{panel:l,isHoverMenu:n,multiple:s,checkStrictly:i,checkedNodeId:d,isDisabled:v,isLeaf:f,expandable:c,inExpandingPath:g,inCheckedPath:b,ns:t,handleHoverExpand:_,handleExpand:H,handleClick:O,handleCheck:S,handleSelectCheck:L}}}),kl=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],yl=ee("span",null,null,-1);function Cl(e,a,l,t,n,s){const i=K("el-checkbox"),d=K("el-radio"),v=K("check"),f=K("el-icon"),c=K("node-content"),g=K("loading"),b=K("arrow-right");return k(),A("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:T([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:a[2]||(a[2]=(...N)=>e.handleHoverExpand&&e.handleHoverExpand(...N)),onFocus:a[3]||(a[3]=(...N)=>e.handleHoverExpand&&e.handleHoverExpand(...N)),onClick:a[4]||(a[4]=(...N)=>e.handleClick&&e.handleClick(...N))},[j(" prefix "),e.multiple?(k(),q(i,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:a[0]||(a[0]=ye(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(k(),q(d,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:a[1]||(a[1]=ye(()=>{},["stop"]))},{default:D(()=>[j(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),yl]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(k(),q(f,{key:2,class:T(e.ns.e("prefix"))},{default:D(()=>[F(v)]),_:1},8,["class"])):j("v-if",!0),j(" content "),F(c),j(" postfix "),e.isLeaf?j("v-if",!0):(k(),A(de,{key:3},[e.node.loading?(k(),q(f,{key:0,class:T([e.ns.is("loading"),e.ns.e("postfix")])},{default:D(()=>[F(g)]),_:1},8,["class"])):(k(),q(f,{key:1,class:T(["arrow-right",e.ns.e("postfix")])},{default:D(()=>[F(b)]),_:1},8,["class"]))],64))],42,kl)}var wl=ke(bl,[["render",Cl],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const El=ce({name:"ElCascaderMenu",components:{Loading:sa,ElIcon:we,ElScrollbar:ia,ElCascaderNode:wl},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const a=Ia(),l=ie("cascader-menu"),{t}=ze(),n=xa();let s=null,i=null;const d=_e(Re),v=I(null),f=y(()=>!e.nodes.length),c=y(()=>!d.initialLoaded),g=y(()=>`cascader-menu-${n}-${e.index}`),b=r=>{s=r.target},N=r=>{if(!(!d.isHoverMenu||!s||!v.value))if(s.contains(r.target)){$();const _=a.vnode.el,{left:H}=_.getBoundingClientRect(),{offsetWidth:O,offsetHeight:L}=_,S=r.clientX-H,m=s.offsetTop,M=m+s.offsetHeight;v.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${S} ${m} L${O} 0 V${m} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${S} ${M} L${O} ${L} V${M} Z" />
        `}else i||(i=window.setTimeout(U,d.config.hoverThreshold))},$=()=>{!i||(clearTimeout(i),i=null)},U=()=>{!v.value||(v.value.innerHTML="",$())};return{ns:l,panel:d,hoverZone:v,isEmpty:f,isLoading:c,menuId:g,t,handleExpand:b,handleMouseMove:N,clearHoverZone:U}}});function Nl(e,a,l,t,n,s){const i=K("el-cascader-node"),d=K("loading"),v=K("el-icon"),f=K("el-scrollbar");return k(),q(f,{key:e.menuId,tag:"ul",role:"menu",class:T(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:D(()=>{var c;return[(k(!0),A(de,null,ve(e.nodes,g=>(k(),q(i,{key:g.uid,node:g,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(k(),A("div",{key:0,class:T(e.ns.e("empty-text"))},[F(v,{size:"14",class:T(e.ns.is("loading"))},{default:D(()=>[F(d)]),_:1},8,["class"]),da(" "+Z(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(k(),A("div",{key:1,class:T(e.ns.e("empty-text"))},Z(e.t("el.cascader.noData")),3)):(c=e.panel)!=null&&c.isHoverMenu?(k(),A("svg",{key:2,ref:"hoverZone",class:T(e.ns.e("hover-zone"))},null,2)):j("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var $l=ke(El,[["render",Nl],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]),qe=(e=>(e.CLICK="click",e.HOVER="hover",e))(qe||{});let Tl=0;const Vl=e=>{const a=[e];let{parent:l}=e;for(;l;)a.unshift(l),l=l.parent;return a};class be{constructor(a,l,t,n=!1){this.data=a,this.config=l,this.parent=t,this.root=n,this.uid=Tl++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:s,label:i,children:d}=l,v=a[d],f=Vl(this);this.level=n?0:t?t.level+1:1,this.value=a[s],this.label=a[i],this.pathNodes=f,this.pathValues=f.map(c=>c.value),this.pathLabels=f.map(c=>c.label),this.childrenData=v,this.children=(v||[]).map(c=>new be(c,l,this)),this.loaded=!l.lazy||this.isLeaf||!ne(v)}get isDisabled(){const{data:a,parent:l,config:t}=this,{disabled:n,checkStrictly:s}=t;return(Ie(n)?n(a,this):!!a[n])||!s&&(l==null?void 0:l.isDisabled)}get isLeaf(){const{data:a,config:l,childrenData:t,loaded:n}=this,{lazy:s,leaf:i}=l,d=Ie(i)?i(a,this):a[i];return Ae(d)?s&&!n?!1:!(Array.isArray(t)&&t.length):!!d}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(a){const{childrenData:l,children:t}=this,n=new be(a,this.config,this);return Array.isArray(l)?l.push(a):this.childrenData=[a],t.push(n),n}calcText(a,l){const t=a?this.pathLabels.join(l):this.label;return this.text=t,t}broadcast(a,...l){const t=`onParent${Ye(a)}`;this.children.forEach(n=>{n&&(n.broadcast(a,...l),n[t]&&n[t](...l))})}emit(a,...l){const{parent:t}=this,n=`onChild${Ye(a)}`;t&&(t[n]&&t[n](...l),t.emit(a,...l))}onParentCheck(a){this.isDisabled||this.setCheckState(a)}onChildCheck(){const{children:a}=this,l=a.filter(n=>!n.isDisabled),t=l.length?l.every(n=>n.checked):!1;this.setCheckState(t)}setCheckState(a){const l=this.children.length,t=this.children.reduce((n,s)=>{const i=s.checked?1:s.indeterminate?.5:0;return n+i},0);this.checked=this.loaded&&this.children.filter(n=>!n.isDisabled).every(n=>n.loaded&&n.checked)&&a,this.indeterminate=this.loaded&&t!==l&&t>0}doCheck(a){if(this.checked===a)return;const{checkStrictly:l,multiple:t}=this.config;l||!t?this.checked=a:(this.broadcast("check",a),this.setCheckState(a),this.emit("check"))}}const Be=(e,a)=>e.reduce((l,t)=>(t.isLeaf?l.push(t):(!a&&l.push(t),l=l.concat(Be(t.children,a))),l),[]);class la{constructor(a,l){this.config=l;const t=(a||[]).map(n=>new be(n,this.config));this.nodes=t,this.allNodes=Be(t,!1),this.leafNodes=Be(t,!0)}getNodes(){return this.nodes}getFlattedNodes(a){return a?this.leafNodes:this.allNodes}appendNode(a,l){const t=l?l.appendChild(a):new be(a,this.config);l||this.nodes.push(t),this.allNodes.push(t),t.isLeaf&&this.leafNodes.push(t)}appendNodes(a,l){a.forEach(t=>this.appendNode(t,l))}getNodeByValue(a,l=!1){return!a&&a!==0?null:this.getFlattedNodes(l).find(n=>Ce(n.value,a)||Ce(n.pathValues,a))||null}getSameNode(a){return a&&this.getFlattedNodes(!1).find(({value:t,level:n})=>Ce(a.value,t)&&a.level===n)||null}}const ma={modelValue:[Number,String,Array],options:{type:Array,default:()=>[]},props:{type:Object,default:()=>({})}},_l={expandTrigger:qe.CLICK,multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Aa,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Pl=e=>y(()=>te(te({},_l),e.props)),ta=e=>{if(!e)return 0;const a=e.id.split("-");return Number(a[a.length-2])},Dl=e=>{if(!e)return;const a=e.querySelector("input");a?a.click():Ha(e)&&e.click()},Sl=(e,a)=>{const l=a.slice(0),t=l.map(s=>s.uid),n=e.reduce((s,i)=>{const d=t.indexOf(i.uid);return d>-1&&(s.push(i),l.splice(d,1),t.splice(d,1)),s},[]);return n.push(...l),n},zl=ce({name:"ElCascaderPanel",components:{ElCascaderMenu:$l},props:ue(te({},ma),{border:{type:Boolean,default:!0},renderLabel:Function}),emits:[ge,me,"close","expand-change"],setup(e,{emit:a,slots:l}){let t=!1;const n=ie("cascader"),s=Pl(e);let i=null;const d=I(!0),v=I([]),f=I(null),c=I([]),g=I(null),b=I([]),N=y(()=>s.value.expandTrigger===qe.HOVER),$=y(()=>e.renderLabel||l.default),U=()=>{const{options:h}=e,w=s.value;t=!1,i=new la(h,w),c.value=[i.getNodes()],w.lazy&&ne(e.options)?(d.value=!1,r(void 0,E=>{E&&(i=new la(E,w),c.value=[i.getNodes()]),d.value=!0,C(!1,!0)})):C(!1,!0)},r=(h,w)=>{const E=s.value;h=h||new be({},E,void 0,!0),h.loading=!0;const z=P=>{const x=h,X=x.root?null:x;P&&(i==null||i.appendNodes(P,X)),x.loading=!1,x.loaded=!0,x.childrenData=x.childrenData||[],w&&w(P)};E.lazyLoad(h,z)},_=(h,w)=>{var E;const{level:z}=h,P=c.value.slice(0,z);let x;h.isLeaf?x=h.pathNodes[z-2]:(x=h,P.push(h.children)),((E=g.value)==null?void 0:E.uid)!==(x==null?void 0:x.uid)&&(g.value=h,c.value=P,!w&&a("expand-change",(h==null?void 0:h.pathValues)||[]))},H=(h,w,E=!0)=>{const{checkStrictly:z,multiple:P}=s.value,x=b.value[0];t=!0,!P&&(x==null||x.doCheck(!1)),h.doCheck(w),M(),E&&!P&&!z&&a("close"),!E&&!P&&!z&&O(h)},O=h=>{!h||(h=h.parent,O(h),h&&_(h))},L=h=>i==null?void 0:i.getFlattedNodes(h),S=h=>{var w;return(w=L(h))==null?void 0:w.filter(E=>E.checked!==!1)},m=()=>{b.value.forEach(h=>h.doCheck(!1)),M()},M=()=>{var h;const{checkStrictly:w,multiple:E}=s.value,z=b.value,P=S(!w),x=Sl(z,P),X=x.map(B=>B.valueByOption);b.value=x,f.value=E?X:(h=X[0])!=null?h:null},C=(h=!1,w=!1)=>{const{modelValue:E}=e,{lazy:z,multiple:P,checkStrictly:x}=s.value,X=!x;if(!(!d.value||t||!w&&Ce(E,f.value)))if(z&&!h){const ae=ea(Oa(aa(E))).map(W=>i==null?void 0:i.getNodeByValue(W)).filter(W=>!!W&&!W.loaded&&!W.loading);ae.length?ae.forEach(W=>{r(W,()=>C(!1,w))}):C(!0,w)}else{const B=P?aa(E):[E],ae=ea(B.map(W=>i==null?void 0:i.getNodeByValue(W,X)));oe(ae,!1),f.value=E}},oe=(h,w=!0)=>{const{checkStrictly:E}=s.value,z=b.value,P=h.filter(B=>!!B&&(E||B.isLeaf)),x=i==null?void 0:i.getSameNode(g.value),X=w&&x||P[0];X?X.pathNodes.forEach(B=>_(B,!0)):g.value=null,z.forEach(B=>B.doCheck(!1)),P.forEach(B=>B.doCheck(!0)),b.value=P,pe(Ne)},Ne=()=>{!ua||v.value.forEach(h=>{const w=h==null?void 0:h.$el;if(w){const E=w.querySelector(`.${n.namespace.value}-scrollbar__wrap`),z=w.querySelector(`.${n.b("node")}.${n.is("active")}`)||w.querySelector(`.${n.b("node")}.in-active-path`);Ka(E,z)}})},se=h=>{const w=h.target,{code:E}=h;switch(E){case G.up:case G.down:{h.preventDefault();const z=E===G.up?-1:1;$e(pa(w,z,`.${n.b("node")}[tabindex="-1"]`));break}case G.left:{h.preventDefault();const z=v.value[ta(w)-1],P=z==null?void 0:z.$el.querySelector(`.${n.b("node")}[aria-expanded="true"]`);$e(P);break}case G.right:{h.preventDefault();const z=v.value[ta(w)+1],P=z==null?void 0:z.$el.querySelector(`.${n.b("node")}[tabindex="-1"]`);$e(P);break}case G.enter:Dl(w);break}};return Ba(Re,Ke({config:s,expandingNode:g,checkedNodes:b,isHoverMenu:N,initialLoaded:d,renderLabelFn:$,lazyLoad:r,expandNode:_,handleCheckChange:H})),J([s,()=>e.options],U,{deep:!0,immediate:!0}),J(()=>e.modelValue,()=>{t=!1,C()}),J(f,h=>{Ce(h,e.modelValue)||(a(ge,h),a(me,h))}),Fa(()=>v.value=[]),ca(()=>!ne(e.modelValue)&&C()),{ns:n,menuList:v,menus:c,checkedNodes:b,handleKeyDown:se,handleCheckChange:H,getFlattedNodes:L,getCheckedNodes:S,clearCheckedNodes:m,calculateCheckedValue:M,scrollToExpandingNode:Ne}}});function Ll(e,a,l,t,n,s){const i=K("el-cascader-menu");return k(),A("div",{class:T([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:a[0]||(a[0]=(...d)=>e.handleKeyDown&&e.handleKeyDown(...d))},[(k(!0),A(de,null,ve(e.menus,(d,v)=>(k(),q(i,{key:v,ref_for:!0,ref:f=>e.menuList[v]=f,index:v,nodes:[...d]},null,8,["index","nodes"]))),128))],34)}var Te=ke(zl,[["render",Ll],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);Te.install=e=>{e.component(Te.name,Te)};const Ml=Te,xl=40,Il={large:36,default:32,small:28},Al={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:a,placement:l}=e;["right","left","bottom","top"].includes(l)||(a.arrow.x=35)},requires:["arrow"]}]},Hl="ElCascader",Bl=ce({name:Hl,components:{ElCascaderPanel:Ml,ElInput:ha,ElTooltip:Ra,ElScrollbar:ia,ElTag:qa,ElIcon:we,CircleClose:Ua,Check:oa,ArrowDown:ja},directives:{Clickoutside:Ga},props:ue(te({},ma),{size:{type:String,validator:Wa},placeholder:{type:String},disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Function,default:(e,a)=>e.text.includes(a)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:Function,default:()=>!0},popperClass:{type:String,default:""},teleported:Za.teleported,tagType:ue(te({},Ja.type),{default:"info"})}),emits:[ge,me,"focus","blur","visible-change","expand-change","remove-tag"],setup(e,{emit:a}){let l=0,t=0;const n=ie("cascader"),s=ie("input"),{t:i}=ze(),d=_e(Xa,{}),v=_e(Ya,{}),f=I(null),c=I(null),g=I(null),b=I(null),N=I(null),$=I(!1),U=I(!1),r=I(!1),_=I(""),H=I(""),O=I([]),L=I([]),S=I([]),m=I(!1),M=y(()=>e.disabled||d.disabled),C=y(()=>e.placeholder||i("el.cascader.placeholder")),oe=Qa(),Ne=y(()=>["small"].includes(oe.value)?"small":"default"),se=y(()=>!!e.props.multiple),h=y(()=>!e.filterable||se.value),w=y(()=>se.value?H.value:_.value),E=y(()=>{var o;return((o=b.value)==null?void 0:o.checkedNodes)||[]}),z=y(()=>!e.clearable||M.value||r.value||!U.value?!1:!!E.value.length),P=y(()=>{const{showAllLevels:o,separator:p}=e,V=E.value;return V.length?se.value?" ":V[0].calcText(o,p):""}),x=y({get(){return e.modelValue},set(o){var p;a(ge,o),a(me,o),(p=v.validate)==null||p.call(v,"change").catch(V=>fa())}}),X=y(()=>{var o,p;return(p=(o=f.value)==null?void 0:o.popperRef)==null?void 0:p.contentRef}),B=o=>{var p,V,R;if(!M.value&&(o=o!=null?o:!$.value,o!==$.value)){if($.value=o,(V=(p=c.value)==null?void 0:p.input)==null||V.setAttribute("aria-expanded",`${o}`),o)ae(),pe((R=b.value)==null?void 0:R.scrollToExpandingNode);else if(e.filterable){const{value:le}=P;_.value=le,H.value=le}a("visible-change",o)}},ae=()=>{pe(()=>{var o;(o=f.value)==null||o.updatePopper()})},W=()=>{r.value=!1},Le=o=>{const{showAllLevels:p,separator:V}=e;return{node:o,key:o.uid,text:o.calcText(p,V),hitState:!1,closable:!M.value&&!o.isDisabled,isCollapseTag:!1}},Ue=o=>{var p;const V=o.node;V.doCheck(!1),(p=b.value)==null||p.calculateCheckedValue(),a("remove-tag",V.valueByOption)},ya=()=>{if(!se.value)return;const o=E.value,p=[],V=[];if(o.forEach(R=>V.push(Le(R))),L.value=V,o.length){const[R,...le]=o,re=le.length;p.push(Le(R)),re&&(e.collapseTags?p.push({key:-1,text:`+ ${re}`,closable:!1,isCollapseTag:!0}):le.forEach(Y=>p.push(Le(Y))))}O.value=p},je=()=>{var o,p;const{filterMethod:V,showAllLevels:R,separator:le}=e,re=(p=(o=b.value)==null?void 0:o.getFlattedNodes(!e.props.checkStrictly))==null?void 0:p.filter(Y=>Y.isDisabled?!1:(Y.calcText(R,le),V(Y,w.value)));se.value&&(O.value.forEach(Y=>{Y.hitState=!1}),L.value.forEach(Y=>{Y.hitState=!1})),r.value=!0,S.value=re,ae()},Ge=()=>{var o;let p;r.value&&N.value?p=N.value.$el.querySelector(`.${n.e("suggestion-item")}`):p=(o=b.value)==null?void 0:o.$el.querySelector(`.${n.b("node")}[tabindex="-1"]`),p&&(p.focus(),!r.value&&p.click())},We=()=>{var o,p;const V=(o=c.value)==null?void 0:o.input,R=g.value,le=(p=N.value)==null?void 0:p.$el;if(!(!ua||!V)){if(le){const re=le.querySelector(`.${n.e("suggestion-list")}`);re.style.minWidth=`${V.offsetWidth}px`}if(R){const{offsetHeight:re}=R,Y=O.value.length>0?`${Math.max(re+6,l)}px`:`${l}px`;V.style.height=Y,ae()}}},Ca=o=>{var p;return(p=b.value)==null?void 0:p.getCheckedNodes(o)},wa=o=>{ae(),a("expand-change",o)},Ea=o=>{var p;const V=(p=o.target)==null?void 0:p.value;if(o.type==="compositionend")m.value=!1,pe(()=>Ze(V));else{const R=V[V.length-1]||"";m.value=!tl(R)}},Na=o=>{if(!m.value)switch(o.code){case G.enter:B();break;case G.down:B(!0),pe(Ge),o.preventDefault();break;case G.esc:$.value===!0&&(o.preventDefault(),o.stopPropagation(),B(!1));break;case G.tab:B(!1);break}},$a=()=>{var o;(o=b.value)==null||o.clearCheckedNodes(),B(!1)},Ta=o=>{var p,V;const{checked:R}=o;se.value?(p=b.value)==null||p.handleCheckChange(o,!R,!1):(!R&&((V=b.value)==null||V.handleCheckChange(o,!0,!1)),B(!1))},Va=o=>{const p=o.target,{code:V}=o;switch(V){case G.up:case G.down:{const R=V===G.up?-1:1;$e(pa(p,R,`.${n.e("suggestion-item")}[tabindex="-1"]`));break}case G.enter:p.click();break}},_a=()=>{const o=O.value,p=o[o.length-1];t=H.value?0:t+1,!(!p||!t)&&(p.hitState?Ue(p):p.hitState=!0)},Pa=el(()=>{const{value:o}=w;if(!o)return;const p=e.beforeFilter(o);al(p)?p.then(je).catch(()=>{}):p!==!1?je():W()},e.debounce),Ze=(o,p)=>{!$.value&&B(!0),!(p!=null&&p.isComposing)&&(o?Pa():W())};return J(r,ae),J([E,M],ya),J(O,()=>{pe(()=>We())}),J(P,o=>_.value=o,{immediate:!0}),ca(()=>{var o;const p=(o=c.value)==null?void 0:o.$el;l=(p==null?void 0:p.offsetHeight)||Il[oe.value]||xl,ll(p,We)}),{popperOptions:Al,tooltipRef:f,popperPaneRef:X,input:c,tagWrapper:g,panel:b,suggestionPanel:N,popperVisible:$,inputHover:U,inputPlaceholder:C,filtering:r,presentText:P,checkedValue:x,inputValue:_,searchInputValue:H,presentTags:O,allPresentTags:L,suggestions:S,isDisabled:M,isOnComposition:m,realSize:oe,tagSize:Ne,multiple:se,readonly:h,clearBtnVisible:z,nsCascader:n,nsInput:s,t:i,togglePopperVisible:B,hideSuggestionPanel:W,deleteTag:Ue,focusFirstNode:Ge,getCheckedNodes:Ca,handleExpandChange:wa,handleKeyDown:Na,handleComposition:Ea,handleClear:$a,handleSuggestionClick:Ta,handleSuggestionKeyDown:Va,handleDelete:_a,handleInput:Ze}}}),Fl={key:0},Ol={class:"el-cascader__collapse-tags"},Kl=["placeholder"],Rl=["onClick"];function ql(e,a,l,t,n,s){const i=K("circle-close"),d=K("el-icon"),v=K("arrow-down"),f=K("el-input"),c=K("el-tag"),g=K("el-tooltip"),b=K("el-cascader-panel"),N=K("check"),$=K("el-scrollbar"),U=nl("clickoutside");return k(),q(g,{ref:"tooltipRef",visible:e.popperVisible,"onUpdate:visible":a[17]||(a[17]=r=>e.popperVisible=r),teleported:e.teleported,"popper-class":[e.nsCascader.e("dropdown"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${e.nsCascader.namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:e.hideSuggestionPanel},{default:D(()=>[fe((k(),A("div",{class:T([e.nsCascader.b(),e.nsCascader.m(e.realSize),e.nsCascader.is("disabled",e.isDisabled),e.$attrs.class]),style:rl(e.$attrs.style),onClick:a[11]||(a[11]=()=>e.togglePopperVisible(e.readonly?void 0:!0)),onKeydown:a[12]||(a[12]=(...r)=>e.handleKeyDown&&e.handleKeyDown(...r)),onMouseenter:a[13]||(a[13]=r=>e.inputHover=!0),onMouseleave:a[14]||(a[14]=r=>e.inputHover=!1)},[F(f,{ref:"input",modelValue:e.inputValue,"onUpdate:modelValue":a[1]||(a[1]=r=>e.inputValue=r),placeholder:e.searchInputValue?"":e.inputPlaceholder,readonly:e.readonly,disabled:e.isDisabled,"validate-event":!1,size:e.realSize,class:T(e.nsCascader.is("focus",e.popperVisible)),onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onFocus:a[2]||(a[2]=r=>e.$emit("focus",r)),onBlur:a[3]||(a[3]=r=>e.$emit("blur",r)),onInput:e.handleInput},{suffix:D(()=>[e.clearBtnVisible?(k(),q(d,{key:"clear",class:T([e.nsInput.e("icon"),"icon-circle-close"]),onClick:ye(e.handleClear,["stop"])},{default:D(()=>[F(i)]),_:1},8,["class","onClick"])):(k(),q(d,{key:"arrow-down",class:T([e.nsInput.e("icon"),"icon-arrow-down",e.nsCascader.is("reverse",e.popperVisible)]),onClick:a[0]||(a[0]=ye(r=>e.togglePopperVisible(),["stop"]))},{default:D(()=>[F(v)]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","onCompositionstart","onCompositionupdate","onCompositionend","onInput"]),e.multiple?(k(),A("div",{key:0,ref:"tagWrapper",class:T(e.nsCascader.e("tags"))},[(k(!0),A(de,null,ve(e.presentTags,r=>(k(),q(c,{key:r.key,type:e.tagType,size:e.tagSize,hit:r.hitState,closable:r.closable,"disable-transitions":"",onClose:_=>e.deleteTag(r)},{default:D(()=>[r.isCollapseTag===!1?(k(),A("span",Fl,Z(r.text),1)):(k(),q(g,{key:1,teleported:!1,disabled:e.popperVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:D(()=>[ee("span",null,Z(r.text),1)]),content:D(()=>[ee("div",Ol,[(k(!0),A(de,null,ve(e.allPresentTags,(_,H)=>(k(),A("div",{key:H,class:"el-cascader__collapse-tag"},[(k(),q(c,{key:_.key,class:"in-tooltip",type:e.tagType,size:e.tagSize,hit:_.hitState,closable:_.closable,"disable-transitions":"",onClose:O=>e.deleteTag(_)},{default:D(()=>[ee("span",null,Z(_.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))]))),128))])]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),e.filterable&&!e.isDisabled?fe((k(),A("input",{key:0,"onUpdate:modelValue":a[4]||(a[4]=r=>e.searchInputValue=r),type:"text",class:T(e.nsCascader.e("search-input")),placeholder:e.presentText?"":e.inputPlaceholder,onInput:a[5]||(a[5]=r=>e.handleInput(e.searchInputValue,r)),onClick:a[6]||(a[6]=ye(r=>e.togglePopperVisible(!0),["stop"])),onKeydown:a[7]||(a[7]=ol((...r)=>e.handleDelete&&e.handleDelete(...r),["delete"])),onCompositionstart:a[8]||(a[8]=(...r)=>e.handleComposition&&e.handleComposition(...r)),onCompositionupdate:a[9]||(a[9]=(...r)=>e.handleComposition&&e.handleComposition(...r)),onCompositionend:a[10]||(a[10]=(...r)=>e.handleComposition&&e.handleComposition(...r))},null,42,Kl)),[[sl,e.searchInputValue]]):j("v-if",!0)],2)):j("v-if",!0)],38)),[[U,()=>e.togglePopperVisible(!1),e.popperPaneRef]])]),content:D(()=>[fe(F(b,{ref:"panel",modelValue:e.checkedValue,"onUpdate:modelValue":a[15]||(a[15]=r=>e.checkedValue=r),options:e.options,props:e.props,border:!1,"render-label":e.$slots.default,onExpandChange:e.handleExpandChange,onClose:a[16]||(a[16]=r=>e.$nextTick(()=>e.togglePopperVisible(!1)))},null,8,["modelValue","options","props","render-label","onExpandChange"]),[[Pe,!e.filtering]]),e.filterable?fe((k(),q($,{key:0,ref:"suggestionPanel",tag:"ul",class:T(e.nsCascader.e("suggestion-panel")),"view-class":e.nsCascader.e("suggestion-list"),onKeydown:e.handleSuggestionKeyDown},{default:D(()=>[e.suggestions.length?(k(!0),A(de,{key:0},ve(e.suggestions,r=>(k(),A("li",{key:r.uid,class:T([e.nsCascader.e("suggestion-item"),e.nsCascader.is("checked",r.checked)]),tabindex:-1,onClick:_=>e.handleSuggestionClick(r)},[ee("span",null,Z(r.text),1),r.checked?(k(),q(d,{key:0},{default:D(()=>[F(N)]),_:1})):j("v-if",!0)],10,Rl))),128)):De(e.$slots,"empty",{key:1},()=>[ee("li",{class:T(e.nsCascader.e("empty-text"))},Z(e.t("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class","onKeydown"])),[[Pe,e.filtering]]):j("v-if",!0)]),_:3},8,["visible","teleported","popper-class","popper-options","transition","onHide"])}var Ve=ke(Bl,[["render",ql],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/index.vue"]]);Ve.install=e=>{e.component(Ve.name,Ve)};const Ul=Ve,ut=Ul,ba="left-check-change",ka="right-check-change",he=va({data:{type:Q(Array),default:()=>[]},titles:{type:Q(Array),default:()=>[]},buttonTexts:{type:Q(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:Q(Function)},leftDefaultChecked:{type:Q(Array),default:()=>[]},rightDefaultChecked:{type:Q(Array),default:()=>[]},renderContent:{type:Q(Function)},modelValue:{type:Q(Array),default:()=>[]},format:{type:Q(Object),default:()=>({})},filterable:Boolean,props:{type:Q(Object),default:()=>il({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"}}),Fe=(e,a)=>[e,a].every(Se)||Se(e)&&dl(a),jl={[me]:(e,a,l)=>[e,l].every(Se)&&["left","right"].includes(a),[ge]:e=>Se(e),[ba]:Fe,[ka]:Fe},Oe="checked-change",Gl=va({data:he.data,optionRender:{type:Q(Function)},placeholder:String,title:String,filterable:Boolean,format:he.format,filterMethod:he.filterMethod,defaultChecked:he.leftDefaultChecked,props:he.props}),Wl={[Oe]:Fe},Ee=e=>{const a={label:"label",key:"key",disabled:"disabled"};return y(()=>te(te({},a),e.props))},Zl=(e,a,l)=>{const t=Ee(e),n=y(()=>e.data.filter(c=>Ie(e.filterMethod)?e.filterMethod(a.query,c):String(c[t.value.label]||c[t.value.key]).toLowerCase().includes(a.query.toLowerCase()))),s=y(()=>n.value.filter(c=>!c[t.value.disabled])),i=y(()=>{const c=a.checked.length,g=e.data.length,{noChecked:b,hasChecked:N}=e.format;return b&&N?c>0?N.replace(/\${checked}/g,c.toString()).replace(/\${total}/g,g.toString()):b.replace(/\${total}/g,g.toString()):`${c}/${g}`}),d=y(()=>{const c=a.checked.length;return c>0&&c<s.value.length}),v=()=>{const c=s.value.map(g=>g[t.value.key]);a.allChecked=c.length>0&&c.every(g=>a.checked.includes(g))},f=c=>{a.checked=c?s.value.map(g=>g[t.value.key]):[]};return J(()=>a.checked,(c,g)=>{if(v(),a.checkChangeByUser){const b=c.concat(g).filter(N=>!c.includes(N)||!g.includes(N));l(Oe,c,b)}else l(Oe,c),a.checkChangeByUser=!0}),J(s,()=>{v()}),J(()=>e.data,()=>{const c=[],g=n.value.map(b=>b[t.value.key]);a.checked.forEach(b=>{g.includes(b)&&c.push(b)}),a.checkChangeByUser=!1,a.checked=c}),J(()=>e.defaultChecked,(c,g)=>{if(g&&c.length===g.length&&c.every($=>g.includes($)))return;const b=[],N=s.value.map($=>$[t.value.key]);c.forEach($=>{N.includes($)&&b.push($)}),a.checkChangeByUser=!1,a.checked=b},{immediate:!0}),{filteredData:n,checkableData:s,checkedSummary:i,isIndeterminate:d,updateAllChecked:v,handleAllCheckedChange:f}},Jl=(e,a)=>({onSourceCheckedChange:(n,s)=>{e.leftChecked=n,s&&a(ba,n,s)},onTargetCheckedChange:(n,s)=>{e.rightChecked=n,s&&a(ka,n,s)}}),Xl=e=>{const a=Ee(e),l=y(()=>e.data.reduce((s,i)=>(s[i[a.value.key]]=i)&&s,{})),t=y(()=>e.data.filter(s=>!e.modelValue.includes(s[a.value.key]))),n=y(()=>e.targetOrder==="original"?e.data.filter(s=>e.modelValue.includes(s[a.value.key])):e.modelValue.reduce((s,i)=>{const d=l.value[i];return d&&s.push(d),s},[]));return{sourceData:t,targetData:n}},Yl=(e,a,l)=>{const t=Ee(e),n=(d,v,f)=>{l(ge,d),l(me,d,v,f)};return{addToLeft:()=>{const d=e.modelValue.slice();a.rightChecked.forEach(v=>{const f=d.indexOf(v);f>-1&&d.splice(f,1)}),n(d,"left",a.rightChecked)},addToRight:()=>{let d=e.modelValue.slice();const v=e.data.filter(f=>{const c=f[t.value.key];return a.leftChecked.includes(c)&&!e.modelValue.includes(c)}).map(f=>f[t.value.key]);d=e.targetOrder==="unshift"?v.concat(d):d.concat(v),e.targetOrder==="original"&&(d=e.data.filter(f=>d.includes(f[t.value.key])).map(f=>f[t.value.key])),n(d,"right",a.leftChecked)}}},Ql={name:"ElTransferPanel"},et=ce(ue(te({},Ql),{props:Gl,emits:Wl,setup(e,{expose:a,emit:l}){const t=e,n=ga(),s=({option:L})=>L,{t:i}=ze(),d=ie("transfer"),v=Ke({checked:[],allChecked:!1,query:"",inputHover:!1,checkChangeByUser:!0}),f=Ee(t),{filteredData:c,checkedSummary:g,isIndeterminate:b,handleAllCheckedChange:N}=Zl(t,v,l),$=y(()=>!ne(v.query)&&ne(c.value)),U=y(()=>!ne(n.default()[0].children)),{checked:r,allChecked:_,query:H,inputHover:O}=cl(v);return a({query:H}),(L,S)=>(k(),A("div",{class:T(u(d).b("panel"))},[ee("p",{class:T(u(d).be("panel","header"))},[F(u(He),{modelValue:u(_),"onUpdate:modelValue":S[0]||(S[0]=m=>Me(_)?_.value=m:null),indeterminate:u(b),onChange:u(N)},{default:D(()=>[da(Z(L.title)+" ",1),ee("span",null,Z(u(g)),1)]),_:1},8,["modelValue","indeterminate","onChange"])],2),ee("div",{class:T([u(d).be("panel","body"),u(d).is("with-footer",u(U))])},[L.filterable?(k(),q(u(ha),{key:0,modelValue:u(H),"onUpdate:modelValue":S[1]||(S[1]=m=>Me(H)?H.value=m:null),class:T(u(d).be("panel","filter")),size:"default",placeholder:L.placeholder,"prefix-icon":u(ul),clearable:"",onMouseenter:S[2]||(S[2]=m=>O.value=!0),onMouseleave:S[3]||(S[3]=m=>O.value=!1)},null,8,["modelValue","class","placeholder","prefix-icon"])):j("v-if",!0),fe(F(u(vl),{modelValue:u(r),"onUpdate:modelValue":S[4]||(S[4]=m=>Me(r)?r.value=m:null),class:T([u(d).is("filterable",L.filterable),u(d).be("panel","list")])},{default:D(()=>[(k(!0),A(de,null,ve(u(c),m=>(k(),q(u(He),{key:m[u(f).key],class:T(u(d).be("panel","item")),label:m[u(f).key],disabled:m[u(f).disabled]},{default:D(()=>{var M;return[F(s,{option:(M=L.optionRender)==null?void 0:M.call(L,m)},null,8,["option"])]}),_:2},1032,["class","label","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[Pe,!u($)&&!u(ne)(L.data)]]),fe(ee("p",{class:T(u(d).be("panel","empty"))},Z(u($)?u(i)("el.transfer.noMatch"):u(i)("el.transfer.noData")),3),[[Pe,u($)||u(ne)(L.data)]])],2),u(U)?(k(),A("p",{key:0,class:T(u(d).be("panel","footer"))},[De(L.$slots,"default")],2)):j("v-if",!0)],2))}}));var na=ke(et,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer-panel.vue"]]);const at={key:0},lt={key:0},tt={name:"ElTransfer"},nt=ce(ue(te({},tt),{props:he,emits:jl,setup(e,{expose:a,emit:l}){const t=e,n=ga(),{t:s}=ze(),i=ie("transfer"),{formItem:d}=pl(),v=Ke({leftChecked:[],rightChecked:[]}),f=Ee(t),{sourceData:c,targetData:g}=Xl(t),{onSourceCheckedChange:b,onTargetCheckedChange:N}=Jl(v,l),{addToLeft:$,addToRight:U}=Yl(t,v,l),r=I(),_=I(),H=C=>{switch(C){case"left":r.value.query="";break;case"right":_.value.query="";break}},O=y(()=>t.buttonTexts.length===2),L=y(()=>t.titles[0]||s("el.transfer.titles.0")),S=y(()=>t.titles[1]||s("el.transfer.titles.1")),m=y(()=>t.filterPlaceholder||s("el.transfer.filterPlaceholder"));J(()=>t.modelValue,()=>{var C;(C=d==null?void 0:d.validate)==null||C.call(d,"change").catch(oe=>fa())});const M=y(()=>C=>t.renderContent?t.renderContent(xe,C):n.default?n.default({option:C}):xe("span",C[f.value.label]||C[f.value.key]));return a({clearQuery:H,leftPanel:r,rightPanel:_}),(C,oe)=>(k(),A("div",{class:T(u(i).b())},[F(na,{ref_key:"leftPanel",ref:r,data:u(c),"option-render":u(M),placeholder:u(m),title:u(L),filterable:C.filterable,format:C.format,"filter-method":C.filterMethod,"default-checked":C.leftDefaultChecked,props:t.props,onCheckedChange:u(b)},{default:D(()=>[De(C.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),ee("div",{class:T(u(i).e("buttons"))},[F(u(Qe),{type:"primary",class:T([u(i).e("button"),u(i).is("with-texts",u(O))]),disabled:u(ne)(v.rightChecked),onClick:u($)},{default:D(()=>[F(u(we),null,{default:D(()=>[F(u(hl))]),_:1}),u(Ae)(C.buttonTexts[0])?j("v-if",!0):(k(),A("span",at,Z(C.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),F(u(Qe),{type:"primary",class:T([u(i).e("button"),u(i).is("with-texts",u(O))]),disabled:u(ne)(v.leftChecked),onClick:u(U)},{default:D(()=>[u(Ae)(C.buttonTexts[1])?j("v-if",!0):(k(),A("span",lt,Z(C.buttonTexts[1]),1)),F(u(we),null,{default:D(()=>[F(u(ra))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),F(na,{ref_key:"rightPanel",ref:_,data:u(g),"option-render":u(M),placeholder:u(m),filterable:C.filterable,format:C.format,"filter-method":C.filterMethod,title:u(S),"default-checked":C.rightDefaultChecked,props:t.props,onCheckedChange:u(N)},{default:D(()=>[De(C.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}}));var ot=ke(nt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer.vue"]]);const pt=fl(ot);export{ut as E,pt as a};
