var se=Object.defineProperty,oe=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var Q=(e,t,c)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:c}):e[t]=c,$=(e,t)=>{for(var c in t||(t={}))ae.call(t,c)&&Q(e,c,t[c]);if(G)for(var c of G(t))re.call(t,c)&&Q(e,c,t[c]);return e},U=(e,t)=>oe(e,ie(t));import{g as b,N as V,ba as h,cG as ce,ct as le,cN as q,cy as ue,e as X,U as O,h as K,cO as Y,A as N,bQ as de,b as r,a3 as ee,P as fe,cP as j,_ as ge,o as L,c as W,w as E,a as P,j as z,H as me,k as C,l as he}from"./index.909ce898.js";import{_ as ye}from"./TCard.fcf5d45c.js";import{h as pe}from"./brian.da19e50d.js";import"./el-card.b1210263.js";import"./TransitionList.31fb1d4f.js";import"./BasicTransition.a5a70a23.js";function ve({el:e=window,name:t,listener:c,options:S,autoRemove:n=!0,isDebounce:s=!0,wait:d=80}){let g=()=>{};const p=b(!1);if(e){const T=b(e),k=s?ce(c,d):le(c,d),y=d?k:c,R=i=>{p.value=!0,i.removeEventListener(t,y,S)},B=i=>i.addEventListener(t,y,S),F=V(T,(i,m,v)=>{i&&(!h(p)&&B(i),v(()=>{n&&R(i)}))},{immediate:!0});g=()=>{R(T.value),F()}}return{removeEvent:g}}const te={value:{type:Boolean,default:!1},isSlot:{type:Boolean,default:!1},text:{type:[String],default:q("components.verify.dragText")},successText:{type:[String],default:q("components.verify.successText")},height:{type:[Number,String],default:40},width:{type:[Number,String],default:220},circle:{type:Boolean,default:!1},wrapStyle:{type:Object,default:{}},contentStyle:{type:Object,default:{}},barStyle:{type:Object,default:{}},actionStyle:{type:Object,default:{}}},_e=U($({},te),{src:{type:String},imgWidth:{type:Number,default:260},imgWrapStyle:{type:Object,default:{}},minDegree:{type:Number,default:90},maxDegree:{type:Number,default:270},diffDegree:{type:Number,default:20}});function J(e,t="default",c){if(!e||!Reflect.has(e,t))return null;if(!ue(e[t]))return console.error(`${t} is not a function!`),null;const S=e[t];return S?S(c):null}var ne=X({name:"BaseDargVerify",components:{Icon:O},props:te,emits:["success","update:value","change","start","move","end"],setup(e,{emit:t,slots:c,expose:S}){const n=K({isMoving:!1,isPassing:!1,moveDistance:0,toLeft:!1,startTime:0,endTime:0}),s=b(null),d=b(null),g=b(null),p=b(null),{t:T}=Y();ve({el:document,name:"mouseup",listener:()=>{n.isMoving&&w()}});const k=N(()=>{const{height:o,actionStyle:l}=e,u=`${parseInt(o)}px`;return $({left:0,width:u,height:u},l)}),y=N(()=>{const{height:o,width:l,circle:u,wrapStyle:a}=e,f=parseInt(o),_=`${parseInt(l)}px`;return $({width:_,height:`${f}px`,lineHeight:`${f}px`,borderRadius:u?f/2+"px":0},a)}),R=N(()=>{const{height:o,circle:l,barStyle:u}=e,a=parseInt(o);return $({height:`${a}px`,borderRadius:l?a/2+"px 0 0 "+a/2+"px":0},u)}),B=N(()=>{const{height:o,width:l,contentStyle:u}=e,a=`${parseInt(o)}px`,f=`${parseInt(l)}px`;return $({height:a,width:f},u)});V(()=>n.isPassing,o=>{if(o){const{startTime:l,endTime:u}=n,a=(u-l)/1e3;t("success",{isPassing:o,time:a.toFixed(1)}),t("update:value",o),t("change",o)}}),de(()=>{n.isPassing=!!e.value});function F(o){return o.pageX||o.touches[0].pageX}function i(o){if(n.isPassing)return;const l=h(p);!l||(t("start",o),n.moveDistance=F(o)-parseInt(l.style.left.replace("px",""),10),n.startTime=new Date().getTime(),n.isMoving=!0)}function m(o){const l=parseInt(o.style.width),{width:u}=e,a=parseInt(u);return{offset:a-l-6,widthNum:a,actionWidth:l}}function v(o){const{isMoving:l,moveDistance:u}=n;if(l){const a=h(p),f=h(d);if(!a||!f)return;const{offset:_,widthNum:M,actionWidth:A}=m(a),D=F(o)-u;t("move",{event:o,moveDistance:u,moveX:D}),D>0&&D<=_?(a.style.left=`${D}px`,f.style.width=`${D+A/2}px`):D>_&&(a.style.left=`${M-A}px`,f.style.width=`${M-A/2}px`,e.isSlot||I())}}function x(o){const{isMoving:l,isPassing:u,moveDistance:a}=n;if(l&&!u){t("end",o);const f=h(p),_=h(d);if(!f||!_)return;const M=F(o)-a,{offset:A,widthNum:D,actionWidth:H}=m(f);M<A?e.isSlot?setTimeout(()=>{if(!e.value)w();else{const Z=h(g);Z&&(Z.style.width=`${parseInt(_.style.width)}px`)}},0):w():(f.style.left=`${D-H}px`,_.style.width=`${D-H/2}px`,I()),n.isMoving=!1}}function I(){if(e.isSlot){w();return}n.endTime=new Date().getTime(),n.isPassing=!0,n.isMoving=!1}function w(){n.isMoving=!1,n.isPassing=!1,n.moveDistance=0,n.toLeft=!1,n.startTime=0,n.endTime=0;const o=h(p),l=h(d),u=h(g);!o||!l||!u||(n.toLeft=!0,ee(()=>{n.toLeft=!1,o.style.left="0",l.style.width="0"},300),u.style.width=h(B).width)}return S({resume:w}),()=>{const o=()=>{const a=["darg-verify-bar"];return n.toLeft&&a.push("to-left"),r("div",{class:a,ref:d,style:h(R)},null)},l=()=>{const a=["darg-verify-content"],{isPassing:f}=n,{text:_,successText:M}=e;return f&&a.push("success"),r("div",{class:a,ref:g,style:h(B)},[J(c,"text",f)||T(f?M:_)])},u=()=>{const a=["darg-verify-action"],{toLeft:f,isPassing:_}=n;return f&&a.push("to-left"),r("div",{class:a,onMousedown:i,onTouchstart:i,style:h(k),ref:p},[J(c,"actionIcon",_)||(_?r(O,{icon:"ant-design:check-outlined",class:"darg-verify-action__icon"},null):r(O,{icon:"ant-design:double-right-outlined",class:"darg-verify-action__icon"},null))])};return r("div",{class:"darg-verify",ref:s,style:h(y),onMousemove:v,onTouchmove:v,onMouseleave:x,onMouseup:x,onTouchend:x},[o(),l(),u()])}}});var Se=X({name:"ImgRotateDragVerify",inheritAttrs:!1,props:_e,emits:["success","change","update:value"],setup(e,{emit:t,attrs:c,expose:S}){const n=b(null),s=K({showTip:!1,isPassing:!1,imgStyle:{},randomRotate:0,currentRotate:0,toOrigin:!1,startTime:0,endTime:0,draged:!1}),{t:d}=Y();V(()=>s.isPassing,i=>{if(i){const{startTime:m,endTime:v}=s,x=(v-m)/1e3;t("success",{isPassing:i,time:x.toFixed(1)}),t("change",i),t("update:value",i)}});const g=N(()=>{const{imgWrapStyle:i,imgWidth:m}=e;return $({width:`${m}px`,height:`${m}px`},i)}),p=N(()=>{const{minDegree:i,maxDegree:m}=e;return i===m?Math.floor(1+Math.random()*1)/10+1:1});function T(){s.startTime=new Date().getTime()}function k(i){s.draged=!0;const{imgWidth:m,height:v,maxDegree:x}=e,{moveX:I}=i,w=Math.ceil(I/(m-parseInt(v))*x*h(p));s.currentRotate=w,s.imgStyle=j("transform",`rotateZ(${s.randomRotate-w}deg)`)}function y(){const{minDegree:i,maxDegree:m}=e,v=Math.floor(i+Math.random()*(m-i));s.randomRotate=v,s.imgStyle=j("transform",`rotateZ(${v}deg)`)}function R(){const{randomRotate:i,currentRotate:m}=s,{diffDegree:v}=e;Math.abs(i-m)>=(v||20)?(s.imgStyle=j("transform",`rotateZ(${i}deg)`),s.toOrigin=!0,ee(()=>{s.toOrigin=!1,s.showTip=!0},300)):B(),s.showTip=!0}function B(){s.isPassing=!0,s.endTime=new Date().getTime()}function F(){s.showTip=!1;const i=h(n);!i||(s.isPassing=!1,i.resume(),y())}return S({resume:F}),()=>{const{src:i}=e,{toOrigin:m,isPassing:v,startTime:x,endTime:I}=s,w=[];m&&w.push("to-origin");const o=(I-x)/1e3;return r("div",{class:"img-rotate-verify"},[r("div",{class:"img-rotate-verify-img__wrap",style:h(g)},[r("img",{src:i,onLoad:y,width:parseInt(e.width),class:w,style:s.imgStyle,onClick:()=>{F()},alt:"verify"},null),s.showTip&&r("span",{class:["img-rotate-verify-img__tip",s.isPassing?"success":"error"]},[s.isPassing?d("components.verify.time",{time:o.toFixed(1)}):d("components.verify.error")]),!s.showTip&&!s.draged&&r("span",{class:["img-rotate-verify-img__tip","normal"]},[d("components.verify.redoTip")])]),r(ne,fe({class:"img-rotate-verify-drag__bar",onMove:k,onEnd:R,onStart:T,ref:n},$($({},c),e),{value:v,isSlot:!0}),null)])}}});const be=X({setup(){const e=b(null),t=b(null),c=b(null),S=b(null),n=b(null);function s(g){}function d(g){!g||g.resume()}return{handleSuccess:s,el1:e,el2:t,el3:c,el4:S,el5:n,handleBtnClick:d,img:pe}}}),we={class:"flex justify-center p-4 items-center bg-gray-700"},Te=C(" \u8FD8\u539F "),xe={class:"flex justify-center p-4 items-center bg-gray-700"},De=C(" \u8FD8\u539F "),$e={class:"flex justify-center p-4 items-center bg-gray-700"},Ee=C(" \u8FD8\u539F "),Fe={class:"flex justify-center p-4 items-center bg-gray-700"},ke=C(" \u8FD8\u539F "),Ce={class:"flex justify-center p-4 items-center bg-gray-700"},Re={key:0},Be=C(" \u6210\u529F "),Ie={key:1},Me=C(" \u62D6\u52A8 "),Pe=C(" \u8FD8\u539F "),Ne={class:"flex justify-center p-4 items-center bg-gray-700"};function Ae(e,t,c,S,n,s){const d=ne,g=he,p=O,T=ye,k=Se;return L(),W(me,null,[r(T,{header:"\u62D6\u52A8\u6821\u9A8C\u793A\u4F8B"},{default:E(()=>[P("div",we,[r(d,{ref:"el1",onSuccess:e.handleSuccess},null,8,["onSuccess"]),r(g,{type:"primary",class:"ml-2",onClick:t[0]||(t[0]=y=>e.handleBtnClick(e.el1))},{default:E(()=>[Te]),_:1})]),P("div",xe,[r(d,{ref:"el2",circle:"",onSuccess:e.handleSuccess},null,8,["onSuccess"]),r(g,{type:"primary",class:"ml-2",onClick:t[1]||(t[1]=y=>e.handleBtnClick(e.el2))},{default:E(()=>[De]),_:1})]),P("div",$e,[r(d,{ref:"el3",text:"\u62D6\u52A8\u4EE5\u8FDB\u884C\u6821\u9A8C","success-text":"\u6821\u9A8C\u6210\u529F","bar-style":{backgroundColor:"#018ffb"},onSuccess:e.handleSuccess},null,8,["onSuccess"]),r(g,{type:"primary",class:"ml-2",onClick:t[2]||(t[2]=y=>e.handleBtnClick(e.el3))},{default:E(()=>[Ee]),_:1})]),P("div",Fe,[r(d,{ref:"el4",onSuccess:e.handleSuccess},{actionIcon:E(y=>[y?(L(),z(p,{key:0,icon:"ant-design:bug-outlined"})):(L(),z(p,{key:1,icon:"ant-design:right-outlined"}))]),_:1},8,["onSuccess"]),r(g,{type:"primary",class:"ml-2",onClick:t[3]||(t[3]=y=>e.handleBtnClick(e.el4))},{default:E(()=>[ke]),_:1})]),P("div",Ce,[r(d,{ref:"el5",onSuccess:e.handleSuccess},{text:E(y=>[y?(L(),W("div",Re,[r(p,{icon:"ant-design:bug-outlined"}),Be])):(L(),W("div",Ie,[Me,r(p,{icon:"ant-design:right-outlined"})]))]),_:1},8,["onSuccess"]),r(g,{type:"primary",class:"ml-2",onClick:t[4]||(t[4]=y=>e.handleBtnClick(e.el5))},{default:E(()=>[Pe]),_:1})])]),_:1}),r(T,{header:"\u65CB\u8F6C\u793A\u4F8B"},{default:E(()=>[P("div",Ne,[r(k,{ref:"el",src:e.img,onSuccess:e.handleSuccess},null,8,["src","onSuccess"])])]),_:1})],64)}var Ze=ge(be,[["render",Ae],["__scopeId","data-v-7bf8f1b1"]]);export{Ze as default};
