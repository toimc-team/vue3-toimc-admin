import{d as D}from"./dayjs.min.954d66e7.js";import{t as ve,b as ge,d as ke,e as he,T as J,c as Se,f as Pe,g as Te,D as De,C as _e}from"./index.073c6967.js";import{s as Ve,x as Ce,e as W,av as we,A as Q,am as Re,B as T,g as X,o as xe,c as Ae,a as d,F as u,C as a,t as C,b as R,H as Ee,L as Me,bP as H,b4 as I,a6 as Oe,aH as ye,T as Be}from"./index.6b8e7d20.js";const He=Ve({...ve,parsedValue:{type:Ce(Array)}}),Ie=["disabled"],Fe=W({__name:"panel-time-range",props:He,emits:["pick","select-range","set-picker-option"],setup(f,{emit:r}){const l=f,b=(e,n)=>{const s=[];for(let o=e;o<=n;o++)s.push(o);return s},{t:S,lang:v}=we(),t=Q("time"),m=Q("picker"),x=Re("EP_PICKER_BASE"),{arrowControl:_,disabledHours:F,disabledMinutes:N,disabledSeconds:U,defaultValue:A}=x.props,g=T(()=>l.parsedValue[0]),k=T(()=>l.parsedValue[1]),Y=ge(l),Z=()=>{r("pick",Y.value,!1)},h=T(()=>l.format.includes("ss")),K=T(()=>l.format.includes("A")?"A":l.format.includes("a")?"a":""),ee=(e=!1)=>{r("pick",[g.value,k.value],e)},ne=e=>{L(e.millisecond(0),k.value)},ae=e=>{L(g.value,e.millisecond(0))},te=e=>{const n=e.map(o=>D(o).locale(v.value)),s=j(n);return n[0].isSame(s[0])&&n[1].isSame(s[1])},L=(e,n)=>{r("pick",[e,n],!0)},se=T(()=>g.value>k.value),V=X([0,2]),oe=(e,n)=>{r("select-range",e,n,"min"),V.value=[e,n]},$=T(()=>h.value?11:8),re=(e,n)=>{r("select-range",e,n,"max");const s=a($);V.value=[e+s,n+s]},le=e=>{const n=h.value?[0,3,6,11,14,17]:[0,3,8,11],s=["hours","minutes"].concat(h.value?["seconds"]:[]),c=(n.indexOf(V.value[0])+e+n.length)%n.length,i=n.length/2;c<i?y.start_emitSelectRange(s[c]):y.end_emitSelectRange(s[c-i])},ce=e=>{const n=e.code,{left:s,right:o,up:c,down:i}=Oe;if([s,o].includes(n)){le(n===s?-1:1),e.preventDefault();return}if([c,i].includes(n)){const p=n===c?-1:1,P=V.value[0]<$.value?"start":"end";y[`${P}_scrollDown`](p),e.preventDefault();return}},E=(e,n)=>{const s=F?F(e):[],o=e==="start",i=(n||(o?k.value:g.value)).hour(),p=o?b(i+1,23):b(0,i-1);return H(s,p)},M=(e,n,s)=>{const o=N?N(e,n):[],c=n==="start",i=s||(c?k.value:g.value),p=i.hour();if(e!==p)return o;const P=i.minute(),B=c?b(P+1,59):b(0,P-1);return H(o,B)},O=(e,n,s,o)=>{const c=U?U(e,n,s):[],i=s==="start",p=o||(i?k.value:g.value),P=p.hour(),B=p.minute();if(e!==P||n!==B)return c;const q=p.second(),be=i?b(q+1,59):b(0,q-1);return H(c,be)},j=([e,n])=>[z(e,"start",!0,n),z(n,"end",!1,e)],{getAvailableHours:ie,getAvailableMinutes:ue,getAvailableSeconds:pe}=ke(E,M,O),{timePickerOptions:y,getAvailableTime:z,onSetOption:G}=he({getAvailableHours:ie,getAvailableMinutes:ue,getAvailableSeconds:pe}),de=e=>e?I(e)?e.map(n=>D(n,l.format).locale(v.value)):D(e,l.format).locale(v.value):null,me=e=>e?I(e)?e.map(n=>n.format(l.format)):e.format(l.format):null,fe=()=>{if(I(A))return A.map(n=>D(n).locale(v.value));const e=D(A).locale(v.value);return[e,e.add(60,"m")]};return r("set-picker-option",["formatToString",me]),r("set-picker-option",["parseUserInput",de]),r("set-picker-option",["isValidValue",te]),r("set-picker-option",["handleKeydownInput",ce]),r("set-picker-option",["getDefaultValue",fe]),r("set-picker-option",["getRangeAvailableTime",j]),(e,n)=>e.actualVisible?(xe(),Ae("div",{key:0,class:u([a(t).b("range-picker"),a(m).b("panel")])},[d("div",{class:u(a(t).be("range-picker","content"))},[d("div",{class:u(a(t).be("range-picker","cell"))},[d("div",{class:u(a(t).be("range-picker","header"))},C(a(S)("el.datepicker.startTime")),3),d("div",{class:u([a(t).be("range-picker","body"),a(t).be("panel","content"),a(t).is("arrow",a(_)),{"has-seconds":a(h)}])},[R(J,{ref:"minSpinner",role:"start","show-seconds":a(h),"am-pm-mode":a(K),"arrow-control":a(_),"spinner-date":a(g),"disabled-hours":E,"disabled-minutes":M,"disabled-seconds":O,onChange:ne,onSetOption:a(G),onSelectRange:oe},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),d("div",{class:u(a(t).be("range-picker","cell"))},[d("div",{class:u(a(t).be("range-picker","header"))},C(a(S)("el.datepicker.endTime")),3),d("div",{class:u([a(t).be("range-picker","body"),a(t).be("panel","content"),a(t).is("arrow",a(_)),{"has-seconds":a(h)}])},[R(J,{ref:"maxSpinner",role:"end","show-seconds":a(h),"am-pm-mode":a(K),"arrow-control":a(_),"spinner-date":a(k),"disabled-hours":E,"disabled-minutes":M,"disabled-seconds":O,onChange:ae,onSetOption:a(G),onSelectRange:re},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),d("div",{class:u(a(t).be("panel","footer"))},[d("button",{type:"button",class:u([a(t).be("panel","btn"),"cancel"]),onClick:n[0]||(n[0]=s=>Z())},C(a(S)("el.datepicker.cancel")),3),d("button",{type:"button",class:u([a(t).be("panel","btn"),"confirm"]),disabled:a(se),onClick:n[1]||(n[1]=s=>ee())},C(a(S)("el.datepicker.confirm")),11,Ie)],2)],2)):Ee("v-if",!0)}});var Ne=Me(Fe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);D.extend(Se);var Ue=W({name:"ElTimePicker",install:null,props:{...Pe,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(f,r){const l=X(),[b,S]=f.isRange?["timerange",Ne]:["time",Te],v=t=>r.emit("update:modelValue",t);return ye("ElPopperOptions",f.popperOptions),r.expose({focus:t=>{var m;(m=l.value)==null||m.handleFocusInput(t)},blur:t=>{var m;(m=l.value)==null||m.handleBlurInput(t)}}),()=>{var t;const m=(t=f.format)!=null?t:De;return R(_e,Be(f,{ref:l,type:b,format:m,"onUpdate:modelValue":v}),{default:x=>R(S,x,null)})}}});const w=Ue;w.install=f=>{f.component(w.name,w)};const je=w;export{je as E};
