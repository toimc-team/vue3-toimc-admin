import{A as I,ed as K,b7 as P,K as E,B as k,aK as M,e as w,O,ax as L,R as z,aC as j,aF as x,az as F,g as A,h as N,a3 as H,ak as T,L as R,ai as p}from"./index.6b8e7d20.js";import{_ as b}from"./el-tree.1ec89225.js";const U=(e,{attrs:n},{tree:l,key:s})=>{const u=I("tree-select"),i={...K(P(e),Object.keys(E.props)),...n,valueKey:s,popperClass:k(()=>{const r=[u.e("popper")];return e.popperClass&&r.push(e.popperClass),r.join(" ")}),filterMethod:(r="")=>{e.filterMethod&&e.filterMethod(r),M(()=>{var h;(h=l.value)==null||h.filter(r)})},onVisibleChange:r=>{var h;(h=n.onVisibleChange)==null||h.call(n,r),e.filterable&&r&&i.filterMethod()}};return i},q=w({extends:O,setup(e,n){const l=O.setup(e,n);delete l.selectOptionClick;const s=L().proxy;return M(()=>{l.select.cachedOptions.get(s.value)||l.select.onOptionCreate(s)}),l},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function S(e){return e||e===0}function B(e){return Array.isArray(e)&&e.length}function V(e){return Array.isArray(e)?e:S(e)?[e]:[]}function C(e,n,l,s,u){for(let i=0;i<e.length;i++){const r=e[i];if(n(r,i,e,u))return s?s(r,i,e,u):r;{const h=l(r);if(B(h)){const o=C(h,n,l,s,r);if(o)return o}}}}const $=(e,{attrs:n,slots:l,emit:s},{select:u,tree:i,key:r})=>{z(()=>e.modelValue,()=>{e.showCheckbox&&M(()=>{const t=i.value;t&&!j(t.getCheckedKeys(),V(e.modelValue))&&t.setCheckedKeys(V(e.modelValue))})},{immediate:!0,deep:!0});const h=k(()=>({value:r.value,...e.props})),o=(t,a)=>{var c;const d=h.value[t];return F(d)?d(a,(c=i.value)==null?void 0:c.getNode(o("value",a))):a[d]},v=V(e.modelValue).map(t=>C(e.data||[],a=>o("value",a)===t,a=>o("children",a),(a,c,d,f)=>f&&o("value",f))).filter(t=>S(t));return{...K(P(e),Object.keys(b.props)),...n,nodeKey:r,expandOnClickNode:k(()=>!e.checkStrictly),defaultExpandedKeys:k(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(v):v),renderContent:(t,{node:a,data:c,store:d})=>t(q,{value:o("value",c),label:o("label",c),disabled:o("disabled",c)},e.renderContent?()=>e.renderContent(t,{node:a,data:c,store:d}):l.default?()=>l.default({node:a,data:c,store:d}):void 0),filterNodeMethod:(t,a,c)=>{var d;return e.filterNodeMethod?e.filterNodeMethod(t,a,c):t?(d=o("label",a))==null?void 0:d.includes(t):!0},onNodeClick:(t,a,c)=>{var d,f,y;if((d=n.onNodeClick)==null||d.call(n,t,a,c),!(e.showCheckbox&&e.checkOnClickNode))if(!e.showCheckbox&&(e.checkStrictly||a.isLeaf)){if(!o("disabled",t)){const _=(f=u.value)==null?void 0:f.options.get(o("value",t));(y=u.value)==null||y.handleOptionSelect(_,!0)}}else c.proxy.handleExpandIconClick()},onCheck:(t,a)=>{var c;(c=n.onCheck)==null||c.call(n,t,a);const d=o("value",t);if(e.checkStrictly)s(x,e.multiple?a.checkedKeys:a.checkedKeys.includes(d)?d:void 0);else if(e.multiple)s(x,i.value.getCheckedKeys(!0));else{const f=C([t],m=>!B(o("children",m))&&!o("disabled",m),m=>o("children",m)),y=f?o("value",f):void 0,_=S(e.modelValue)&&!!C([t],m=>o("value",m)===e.modelValue,m=>o("children",m));s(x,y===e.modelValue||_?void 0:y)}}}},G=w({name:"ElTreeSelect",inheritAttrs:!1,props:{...E.props,...b.props},setup(e,n){const{slots:l,expose:s}=n,u=A(),i=A(),r=k(()=>e.nodeKey||e.valueKey||"value"),h=U(e,n,{select:u,tree:i,key:r}),o=$(e,n,{select:u,tree:i,key:r}),v=N({});return s(v),H(()=>{Object.assign(v,{...K(i.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...K(u.value,["focus","blur"])})}),()=>T(E,N({...h,ref:t=>u.value=t}),{...l,default:()=>T(b,N({...o,ref:t=>i.value=t}))})}});var g=R(G,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue"]]);g.install=e=>{e.component(g.name,g)};const J=g,X=J;const Y=e=>new Promise(n=>{const l={authorization:"Bearer "+localStorage.getItem("token")};p.get("/api/sys/permission/list",{params:e,headers:l}).then(s=>{n(s.data)})}),Z=(e,n)=>{const l=n?"/api/sys/permission/edit":"/api/sys/permission/add",s={authorization:"Bearer "+localStorage.getItem("token")};return new Promise(u=>{p.post(l,e,{headers:s}).then(i=>{u(i.data)})})},D=e=>{const n={authorization:"Bearer "+localStorage.getItem("token")};return new Promise(l=>{p.delete("/api/sys/permission/delete",{params:e,headers:n}).then(s=>{l(s.data)})})},ee=e=>{const n={authorization:"Bearer "+localStorage.getItem("token")};return new Promise(l=>{p.delete("/api/sys/permission/deleteBatch",{data:e,headers:n}).then(s=>{l(s.data)})})};export{X as E,D as a,ee as d,Y as g,Z as s};
