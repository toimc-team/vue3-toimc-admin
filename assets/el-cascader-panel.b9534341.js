var wa=Object.defineProperty,Ea=Object.defineProperties;var Na=Object.getOwnPropertyDescriptors;var Ke=Object.getOwnPropertySymbols;var $a=Object.prototype.hasOwnProperty,Ta=Object.prototype.propertyIsEnumerable;var Re=(e,a,l)=>a in e?wa(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l,oe=(e,a)=>{for(var l in a||(a={}))$a.call(a,l)&&Re(e,l,a[l]);if(Ke)for(var l of Ke(a))Ta.call(a,l)&&Re(e,l,a[l]);return e},ve=(e,a)=>Ea(e,Na(a));import{e as re,A as ne,ak as De,D as Te,ar as Je,as as Xe,at as Ye,am as be,B as g,L as fe,r as $,o as b,c as I,H as R,j as O,a9 as ge,w as P,b as H,F as E,J as se,a as Y,au as Qe,av as Ve,g as M,aw as Va,I as ce,k as xe,t as W,ax as ea,ay as Se,az as qe,aA as Pa,aB as Ue,aC as me,aD as Da,aE as Sa,aF as ue,aG as pe,aH as La,h as Me,R as Z,aI as za,a3 as aa,aJ as Ma,aK as ie,ab as la,aL as Ia,a6 as U,aM as Ce,aN as na,M as ta,aO as _a,aP as Ha,z as Aa,aQ as Ba,aR as Fa,aS as Oa,aT as Ka,aU as Ra,aV as qa,aW as oa,aX as Ua,aY as sa,aZ as ja,a_ as Ga,a$ as Wa,b0 as Za,b1 as Ja,a7 as de,b2 as Xa,b3 as Ya,S as Qa,a8 as Ne,W as $e,b4 as ra,b5 as xa,l as el,b6 as al}from"./index.2df2d850.js";import{E as ia,a as ll}from"./el-checkbox.65bfa4a2.js";import{E as nl}from"./index2.61b9d74f.js";import{u as je,a as Ge}from"./index2.9c4a2a68.js";var tl=re({name:"NodeContent",setup(){return{ns:ne("cascader-node")}},render(){const{ns:e}=this,{node:a,panel:l}=this.$parent,{data:t,label:n}=a,{renderLabelFn:i}=l;return De("span",{class:e.e("label")},i?i({node:a,data:t}):n)}});const Ie=Symbol(),ol=re({name:"ElCascaderNode",components:{ElCheckbox:ia,ElRadio:nl,NodeContent:tl,ElIcon:Te,Check:Je,Loading:Xe,ArrowRight:Ye},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:a}){const l=be(Ie),t=ne("cascader-node"),n=g(()=>l.isHoverMenu),i=g(()=>l.config.multiple),r=g(()=>l.config.checkStrictly),d=g(()=>{var k;return(k=l.checkedNodes[0])==null?void 0:k.uid}),v=g(()=>e.node.isDisabled),p=g(()=>e.node.isLeaf),h=g(()=>r.value&&!p.value||!v.value),T=g(()=>m(l.expandingNode)),c=g(()=>r.value&&l.checkedNodes.some(m)),m=k=>{var B;const{level:Q,uid:te}=e.node;return((B=k==null?void 0:k.pathNodes[Q-1])==null?void 0:B.uid)===te},C=()=>{T.value||l.expandNode(e.node)},D=k=>{const{node:B}=e;k!==B.checked&&l.handleCheckChange(B,k)},s=()=>{l.lazyLoad(e.node,()=>{p.value||C()})},S=k=>{!n.value||(A(),!p.value&&a("expand",k))},A=()=>{const{node:k}=e;!h.value||k.loading||(k.loaded?C():s())},K=()=>{n.value&&!p.value||(p.value&&!v.value&&!r.value&&!i.value?q(!0):A())},G=k=>{r.value?(D(k),e.node.loaded&&C()):q(k)},q=k=>{e.node.loaded?(D(k),!r.value&&C()):s()};return{panel:l,isHoverMenu:n,multiple:i,checkStrictly:r,checkedNodeId:d,isDisabled:v,isLeaf:p,expandable:h,inExpandingPath:T,inCheckedPath:c,ns:t,handleHoverExpand:S,handleExpand:A,handleClick:K,handleCheck:q,handleSelectCheck:G}}}),sl=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],rl=Y("span",null,null,-1);function il(e,a,l,t,n,i){const r=$("el-checkbox"),d=$("el-radio"),v=$("check"),p=$("el-icon"),h=$("node-content"),T=$("loading"),c=$("arrow-right");return b(),I("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:E([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:a[2]||(a[2]=(...m)=>e.handleHoverExpand&&e.handleHoverExpand(...m)),onFocus:a[3]||(a[3]=(...m)=>e.handleHoverExpand&&e.handleHoverExpand(...m)),onClick:a[4]||(a[4]=(...m)=>e.handleClick&&e.handleClick(...m))},[R(" prefix "),e.multiple?(b(),O(r,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:a[0]||(a[0]=ge(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(b(),O(d,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:a[1]||(a[1]=ge(()=>{},["stop"]))},{default:P(()=>[R(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),rl]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(b(),O(p,{key:2,class:E(e.ns.e("prefix"))},{default:P(()=>[H(v)]),_:1},8,["class"])):R("v-if",!0),R(" content "),H(h),R(" postfix "),e.isLeaf?R("v-if",!0):(b(),I(se,{key:3},[e.node.loading?(b(),O(p,{key:0,class:E([e.ns.is("loading"),e.ns.e("postfix")])},{default:P(()=>[H(T)]),_:1},8,["class"])):(b(),O(p,{key:1,class:E(["arrow-right",e.ns.e("postfix")])},{default:P(()=>[H(c)]),_:1},8,["class"]))],64))],42,sl)}var dl=fe(ol,[["render",il],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const cl=re({name:"ElCascaderMenu",components:{Loading:Xe,ElIcon:Te,ElScrollbar:Qe,ElCascaderNode:dl},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const a=ea(),l=ne("cascader-menu"),{t}=Ve(),n=Va();let i=null,r=null;const d=be(Ie),v=M(null),p=g(()=>!e.nodes.length),h=g(()=>!d.initialLoaded),T=g(()=>`cascader-menu-${n}-${e.index}`),c=s=>{i=s.target},m=s=>{if(!(!d.isHoverMenu||!i||!v.value))if(i.contains(s.target)){C();const S=a.vnode.el,{left:A}=S.getBoundingClientRect(),{offsetWidth:K,offsetHeight:G}=S,q=s.clientX-A,k=i.offsetTop,B=k+i.offsetHeight;v.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${q} ${k} L${K} 0 V${k} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${q} ${B} L${K} ${G} V${B} Z" />
        `}else r||(r=window.setTimeout(D,d.config.hoverThreshold))},C=()=>{!r||(clearTimeout(r),r=null)},D=()=>{!v.value||(v.value.innerHTML="",C())};return{ns:l,panel:d,hoverZone:v,isEmpty:p,isLoading:h,menuId:T,t,handleExpand:c,handleMouseMove:m,clearHoverZone:D}}});function ul(e,a,l,t,n,i){const r=$("el-cascader-node"),d=$("loading"),v=$("el-icon"),p=$("el-scrollbar");return b(),O(p,{key:e.menuId,tag:"ul",role:"menu",class:E(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:P(()=>{var h;return[(b(!0),I(se,null,ce(e.nodes,T=>(b(),O(r,{key:T.uid,node:T,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(b(),I("div",{key:0,class:E(e.ns.e("empty-text"))},[H(v,{size:"14",class:E(e.ns.is("loading"))},{default:P(()=>[H(d)]),_:1},8,["class"]),xe(" "+W(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(b(),I("div",{key:1,class:E(e.ns.e("empty-text"))},W(e.t("el.cascader.noData")),3)):(h=e.panel)!=null&&h.isHoverMenu?(b(),I("svg",{key:2,ref:"hoverZone",class:E(e.ns.e("hover-zone"))},null,2)):R("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var pl=fe(cl,[["render",ul],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]),_e=(e=>(e.CLICK="click",e.HOVER="hover",e))(_e||{});let hl=0;const fl=e=>{const a=[e];let{parent:l}=e;for(;l;)a.unshift(l),l=l.parent;return a};class he{constructor(a,l,t,n=!1){this.data=a,this.config=l,this.parent=t,this.root=n,this.uid=hl++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:i,label:r,children:d}=l,v=a[d],p=fl(this);this.level=n?0:t?t.level+1:1,this.value=a[i],this.label=a[r],this.pathNodes=p,this.pathValues=p.map(h=>h.value),this.pathLabels=p.map(h=>h.label),this.childrenData=v,this.children=(v||[]).map(h=>new he(h,l,this)),this.loaded=!l.lazy||this.isLeaf||!Se(v)}get isDisabled(){const{data:a,parent:l,config:t}=this,{disabled:n,checkStrictly:i}=t;return(qe(n)?n(a,this):!!a[n])||!i&&(l==null?void 0:l.isDisabled)}get isLeaf(){const{data:a,config:l,childrenData:t,loaded:n}=this,{lazy:i,leaf:r}=l,d=qe(r)?r(a,this):a[r];return Pa(d)?i&&!n?!1:!(Array.isArray(t)&&t.length):!!d}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(a){const{childrenData:l,children:t}=this,n=new he(a,this.config,this);return Array.isArray(l)?l.push(a):this.childrenData=[a],t.push(n),n}calcText(a,l){const t=a?this.pathLabels.join(l):this.label;return this.text=t,t}broadcast(a,...l){const t=`onParent${Ue(a)}`;this.children.forEach(n=>{n&&(n.broadcast(a,...l),n[t]&&n[t](...l))})}emit(a,...l){const{parent:t}=this,n=`onChild${Ue(a)}`;t&&(t[n]&&t[n](...l),t.emit(a,...l))}onParentCheck(a){this.isDisabled||this.setCheckState(a)}onChildCheck(){const{children:a}=this,l=a.filter(n=>!n.isDisabled),t=l.length?l.every(n=>n.checked):!1;this.setCheckState(t)}setCheckState(a){const l=this.children.length,t=this.children.reduce((n,i)=>{const r=i.checked?1:i.indeterminate?.5:0;return n+r},0);this.checked=this.loaded&&this.children.filter(n=>!n.isDisabled).every(n=>n.loaded&&n.checked)&&a,this.indeterminate=this.loaded&&t!==l&&t>0}doCheck(a){if(this.checked===a)return;const{checkStrictly:l,multiple:t}=this.config;l||!t?this.checked=a:(this.broadcast("check",a),this.setCheckState(a),this.emit("check"))}}const Le=(e,a)=>e.reduce((l,t)=>(t.isLeaf?l.push(t):(!a&&l.push(t),l=l.concat(Le(t.children,a))),l),[]);class We{constructor(a,l){this.config=l;const t=(a||[]).map(n=>new he(n,this.config));this.nodes=t,this.allNodes=Le(t,!1),this.leafNodes=Le(t,!0)}getNodes(){return this.nodes}getFlattedNodes(a){return a?this.leafNodes:this.allNodes}appendNode(a,l){const t=l?l.appendChild(a):new he(a,this.config);l||this.nodes.push(t),this.allNodes.push(t),t.isLeaf&&this.leafNodes.push(t)}appendNodes(a,l){a.forEach(t=>this.appendNode(t,l))}getNodeByValue(a,l=!1){return!a&&a!==0?null:this.getFlattedNodes(l).find(n=>me(n.value,a)||me(n.pathValues,a))||null}getSameNode(a){return a&&this.getFlattedNodes(!1).find(({value:t,level:n})=>me(a.value,t)&&a.level===n)||null}}const da={modelValue:[Number,String,Array],options:{type:Array,default:()=>[]},props:{type:Object,default:()=>({})}},vl={expandTrigger:_e.CLICK,multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Da,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},gl=e=>g(()=>oe(oe({},vl),e.props)),Ze=e=>{if(!e)return 0;const a=e.id.split("-");return Number(a[a.length-2])},ml=e=>{if(!e)return;const a=e.querySelector("input");a?a.click():Sa(e)&&e.click()},bl=(e,a)=>{const l=a.slice(0),t=l.map(i=>i.uid),n=e.reduce((i,r)=>{const d=t.indexOf(r.uid);return d>-1&&(i.push(r),l.splice(d,1),t.splice(d,1)),i},[]);return n.push(...l),n},kl=re({name:"ElCascaderPanel",components:{ElCascaderMenu:pl},props:ve(oe({},da),{border:{type:Boolean,default:!0},renderLabel:Function}),emits:[ue,pe,"close","expand-change"],setup(e,{emit:a,slots:l}){let t=!1;const n=ne("cascader"),i=gl(e);let r=null;const d=M(!0),v=M([]),p=M(null),h=M([]),T=M(null),c=M([]),m=g(()=>i.value.expandTrigger===_e.HOVER),C=g(()=>e.renderLabel||l.default),D=()=>{const{options:f}=e,y=i.value;t=!1,r=new We(f,y),h.value=[r.getNodes()],y.lazy&&Se(e.options)?(d.value=!1,s(void 0,w=>{w&&(r=new We(w,y),h.value=[r.getNodes()]),d.value=!0,Q(!1,!0)})):Q(!1,!0)},s=(f,y)=>{const w=i.value;f=f||new he({},w,void 0,!0),f.loading=!0;const L=V=>{const z=f,J=z.root?null:z;V&&(r==null||r.appendNodes(V,J)),z.loading=!1,z.loaded=!0,z.childrenData=z.childrenData||[],y&&y(V)};w.lazyLoad(f,L)},S=(f,y)=>{var w;const{level:L}=f,V=h.value.slice(0,L);let z;f.isLeaf?z=f.pathNodes[L-2]:(z=f,V.push(f.children)),((w=T.value)==null?void 0:w.uid)!==(z==null?void 0:z.uid)&&(T.value=f,h.value=V,!y&&a("expand-change",(f==null?void 0:f.pathValues)||[]))},A=(f,y,w=!0)=>{const{checkStrictly:L,multiple:V}=i.value,z=c.value[0];t=!0,!V&&(z==null||z.doCheck(!1)),f.doCheck(y),B(),w&&!V&&!L&&a("close"),!w&&!V&&!L&&K(f)},K=f=>{!f||(f=f.parent,K(f),f&&S(f))},G=f=>r==null?void 0:r.getFlattedNodes(f),q=f=>{var y;return(y=G(f))==null?void 0:y.filter(w=>w.checked!==!1)},k=()=>{c.value.forEach(f=>f.doCheck(!1)),B()},B=()=>{var f;const{checkStrictly:y,multiple:w}=i.value,L=c.value,V=q(!y),z=bl(L,V),J=z.map(_=>_.valueByOption);c.value=z,p.value=w?J:(f=J[0])!=null?f:null},Q=(f=!1,y=!1)=>{const{modelValue:w}=e,{lazy:L,multiple:V,checkStrictly:z}=i.value,J=!z;if(!(!d.value||t||!y&&me(w,p.value)))if(L&&!f){const x=je(Ma(Ge(w))).map(j=>r==null?void 0:r.getNodeByValue(j)).filter(j=>!!j&&!j.loaded&&!j.loading);x.length?x.forEach(j=>{s(j,()=>Q(!1,y))}):Q(!0,y)}else{const _=V?Ge(w):[w],x=je(_.map(j=>r==null?void 0:r.getNodeByValue(j,J)));te(x,!1),p.value=w}},te=(f,y=!0)=>{const{checkStrictly:w}=i.value,L=c.value,V=f.filter(_=>!!_&&(w||_.isLeaf)),z=r==null?void 0:r.getSameNode(T.value),J=y&&z||V[0];J?J.pathNodes.forEach(_=>S(_,!0)):T.value=null,L.forEach(_=>_.doCheck(!1)),V.forEach(_=>_.doCheck(!0)),c.value=V,ie(ke)},ke=()=>{!la||v.value.forEach(f=>{const y=f==null?void 0:f.$el;if(y){const w=y.querySelector(`.${n.namespace.value}-scrollbar__wrap`),L=y.querySelector(`.${n.b("node")}.${n.is("active")}`)||y.querySelector(`.${n.b("node")}.in-active-path`);Ia(w,L)}})},ae=f=>{const y=f.target,{code:w}=f;switch(w){case U.up:case U.down:{f.preventDefault();const L=w===U.up?-1:1;Ce(na(y,L,`.${n.b("node")}[tabindex="-1"]`));break}case U.left:{f.preventDefault();const L=v.value[Ze(y)-1],V=L==null?void 0:L.$el.querySelector(`.${n.b("node")}[aria-expanded="true"]`);Ce(V);break}case U.right:{f.preventDefault();const L=v.value[Ze(y)+1],V=L==null?void 0:L.$el.querySelector(`.${n.b("node")}[tabindex="-1"]`);Ce(V);break}case U.enter:ml(y);break}};return La(Ie,Me({config:i,expandingNode:T,checkedNodes:c,isHoverMenu:m,initialLoaded:d,renderLabelFn:C,lazyLoad:s,expandNode:S,handleCheckChange:A})),Z([i,()=>e.options],D,{deep:!0,immediate:!0}),Z(()=>e.modelValue,()=>{t=!1,Q()}),Z(p,f=>{me(f,e.modelValue)||(a(ue,f),a(pe,f))}),za(()=>v.value=[]),aa(()=>!Se(e.modelValue)&&Q()),{ns:n,menuList:v,menus:h,checkedNodes:c,handleKeyDown:ae,handleCheckChange:A,getFlattedNodes:G,getCheckedNodes:q,clearCheckedNodes:k,calculateCheckedValue:B,scrollToExpandingNode:ke}}});function Cl(e,a,l,t,n,i){const r=$("el-cascader-menu");return b(),I("div",{class:E([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:a[0]||(a[0]=(...d)=>e.handleKeyDown&&e.handleKeyDown(...d))},[(b(!0),I(se,null,ce(e.menus,(d,v)=>(b(),O(r,{key:v,ref_for:!0,ref:p=>e.menuList[v]=p,index:v,nodes:[...d]},null,8,["index","nodes"]))),128))],34)}var ye=fe(kl,[["render",Cl],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);ye.install=e=>{e.component(ye.name,ye)};const yl=ye,wl=40,El={large:36,default:32,small:28},Nl={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:a,placement:l}=e;["right","left","bottom","top"].includes(l)||(a.arrow.x=35)},requires:["arrow"]}]},$l="ElCascader",Tl=re({name:$l,components:{ElCascaderPanel:yl,ElInput:ta,ElTooltip:_a,ElScrollbar:Qe,ElTag:Ha,ElIcon:Te,CircleClose:Aa,Check:Je,ArrowDown:Ba},directives:{Clickoutside:Fa},props:ve(oe({},da),{size:{type:String,validator:Oa},placeholder:{type:String},disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Function,default:(e,a)=>e.text.includes(a)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:Function,default:()=>!0},popperClass:{type:String,default:""},teleported:Ka.teleported,tagType:ve(oe({},Ra.type),{default:"info"})}),emits:[ue,pe,"focus","blur","visible-change","expand-change","remove-tag"],setup(e,{emit:a}){let l=0,t=0;const n=ne("cascader"),i=ne("input"),{t:r}=Ve(),d=be(qa,{}),v=be(oa,{}),p=M(null),h=M(null),T=M(null),c=M(null),m=M(null),C=M(!1),D=M(!1),s=M(!1),S=M(""),A=M(""),K=M([]),G=M([]),q=M([]),k=M(!1),B=g(()=>e.disabled||d.disabled),Q=g(()=>e.placeholder||r("el.cascader.placeholder")),te=Ua(),ke=g(()=>["small"].includes(te.value)?"small":"default"),ae=g(()=>!!e.props.multiple),f=g(()=>!e.filterable||ae.value),y=g(()=>ae.value?A.value:S.value),w=g(()=>{var o;return((o=c.value)==null?void 0:o.checkedNodes)||[]}),L=g(()=>!e.clearable||B.value||s.value||!D.value?!1:!!w.value.length),V=g(()=>{const{showAllLevels:o,separator:u}=e,N=w.value;return N.length?ae.value?" ":N[0].calcText(o,u):""}),z=g({get(){return e.modelValue},set(o){var u;a(ue,o),a(pe,o),(u=v.validate)==null||u.call(v,"change").catch(N=>sa())}}),J=g(()=>{var o,u;return(u=(o=p.value)==null?void 0:o.popperRef)==null?void 0:u.contentRef}),_=o=>{var u,N,F;if(!B.value&&(o=o!=null?o:!C.value,o!==C.value)){if(C.value=o,(N=(u=h.value)==null?void 0:u.input)==null||N.setAttribute("aria-expanded",`${o}`),o)x(),ie((F=c.value)==null?void 0:F.scrollToExpandingNode);else if(e.filterable){const{value:ee}=V;S.value=ee,A.value=ee}a("visible-change",o)}},x=()=>{ie(()=>{var o;(o=p.value)==null||o.updatePopper()})},j=()=>{s.value=!1},Pe=o=>{const{showAllLevels:u,separator:N}=e;return{node:o,key:o.uid,text:o.calcText(u,N),hitState:!1,closable:!B.value&&!o.isDisabled,isCollapseTag:!1}},He=o=>{var u;const N=o.node;N.doCheck(!1),(u=c.value)==null||u.calculateCheckedValue(),a("remove-tag",N.valueByOption)},pa=()=>{if(!ae.value)return;const o=w.value,u=[],N=[];if(o.forEach(F=>N.push(Pe(F))),G.value=N,o.length){const[F,...ee]=o,le=ee.length;u.push(Pe(F)),le&&(e.collapseTags?u.push({key:-1,text:`+ ${le}`,closable:!1,isCollapseTag:!0}):ee.forEach(X=>u.push(Pe(X))))}K.value=u},Ae=()=>{var o,u;const{filterMethod:N,showAllLevels:F,separator:ee}=e,le=(u=(o=c.value)==null?void 0:o.getFlattedNodes(!e.props.checkStrictly))==null?void 0:u.filter(X=>X.isDisabled?!1:(X.calcText(F,ee),N(X,y.value)));ae.value&&(K.value.forEach(X=>{X.hitState=!1}),G.value.forEach(X=>{X.hitState=!1})),s.value=!0,q.value=le,x()},Be=()=>{var o;let u;s.value&&m.value?u=m.value.$el.querySelector(`.${n.e("suggestion-item")}`):u=(o=c.value)==null?void 0:o.$el.querySelector(`.${n.b("node")}[tabindex="-1"]`),u&&(u.focus(),!s.value&&u.click())},Fe=()=>{var o,u;const N=(o=h.value)==null?void 0:o.input,F=T.value,ee=(u=m.value)==null?void 0:u.$el;if(!(!la||!N)){if(ee){const le=ee.querySelector(`.${n.e("suggestion-list")}`);le.style.minWidth=`${N.offsetWidth}px`}if(F){const{offsetHeight:le}=F,X=K.value.length>0?`${Math.max(le+6,l)}px`:`${l}px`;N.style.height=X,x()}}},ha=o=>{var u;return(u=c.value)==null?void 0:u.getCheckedNodes(o)},fa=o=>{x(),a("expand-change",o)},va=o=>{var u;const N=(u=o.target)==null?void 0:u.value;if(o.type==="compositionend")k.value=!1,ie(()=>Oe(N));else{const F=N[N.length-1]||"";k.value=!Za(F)}},ga=o=>{if(!k.value)switch(o.code){case U.enter:_();break;case U.down:_(!0),ie(Be),o.preventDefault();break;case U.esc:C.value===!0&&(o.preventDefault(),o.stopPropagation(),_(!1));break;case U.tab:_(!1);break}},ma=()=>{var o;(o=c.value)==null||o.clearCheckedNodes(),_(!1)},ba=o=>{var u,N;const{checked:F}=o;ae.value?(u=c.value)==null||u.handleCheckChange(o,!F,!1):(!F&&((N=c.value)==null||N.handleCheckChange(o,!0,!1)),_(!1))},ka=o=>{const u=o.target,{code:N}=o;switch(N){case U.up:case U.down:{const F=N===U.up?-1:1;Ce(na(u,F,`.${n.e("suggestion-item")}[tabindex="-1"]`));break}case U.enter:u.click();break}},Ca=()=>{const o=K.value,u=o[o.length-1];t=A.value?0:t+1,!(!u||!t)&&(u.hitState?He(u):u.hitState=!0)},ya=ja(()=>{const{value:o}=y;if(!o)return;const u=e.beforeFilter(o);Ga(u)?u.then(Ae).catch(()=>{}):u!==!1?Ae():j()},e.debounce),Oe=(o,u)=>{!C.value&&_(!0),!(u!=null&&u.isComposing)&&(o?ya():j())};return Z(s,x),Z([w,B],pa),Z(K,()=>{ie(()=>Fe())}),Z(V,o=>S.value=o,{immediate:!0}),aa(()=>{var o;const u=(o=h.value)==null?void 0:o.$el;l=(u==null?void 0:u.offsetHeight)||El[te.value]||wl,Wa(u,Fe)}),{popperOptions:Nl,tooltipRef:p,popperPaneRef:J,input:h,tagWrapper:T,panel:c,suggestionPanel:m,popperVisible:C,inputHover:D,inputPlaceholder:Q,filtering:s,presentText:V,checkedValue:z,inputValue:S,searchInputValue:A,presentTags:K,allPresentTags:G,suggestions:q,isDisabled:B,isOnComposition:k,realSize:te,tagSize:ke,multiple:ae,readonly:f,clearBtnVisible:L,nsCascader:n,nsInput:i,t:r,togglePopperVisible:_,hideSuggestionPanel:j,deleteTag:He,focusFirstNode:Be,getCheckedNodes:ha,handleExpandChange:fa,handleKeyDown:ga,handleComposition:va,handleClear:ma,handleSuggestionClick:ba,handleSuggestionKeyDown:ka,handleDelete:Ca,handleInput:Oe}}}),Vl={key:0},Pl={class:"el-cascader__collapse-tags"},Dl=["placeholder"],Sl=["onClick"];function Ll(e,a,l,t,n,i){const r=$("circle-close"),d=$("el-icon"),v=$("arrow-down"),p=$("el-input"),h=$("el-tag"),T=$("el-tooltip"),c=$("el-cascader-panel"),m=$("check"),C=$("el-scrollbar"),D=Ja("clickoutside");return b(),O(T,{ref:"tooltipRef",visible:e.popperVisible,"onUpdate:visible":a[17]||(a[17]=s=>e.popperVisible=s),teleported:e.teleported,"popper-class":[e.nsCascader.e("dropdown"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${e.nsCascader.namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:e.hideSuggestionPanel},{default:P(()=>[de((b(),I("div",{class:E([e.nsCascader.b(),e.nsCascader.m(e.realSize),e.nsCascader.is("disabled",e.isDisabled),e.$attrs.class]),style:Qa(e.$attrs.style),onClick:a[11]||(a[11]=()=>e.togglePopperVisible(e.readonly?void 0:!0)),onKeydown:a[12]||(a[12]=(...s)=>e.handleKeyDown&&e.handleKeyDown(...s)),onMouseenter:a[13]||(a[13]=s=>e.inputHover=!0),onMouseleave:a[14]||(a[14]=s=>e.inputHover=!1)},[H(p,{ref:"input",modelValue:e.inputValue,"onUpdate:modelValue":a[1]||(a[1]=s=>e.inputValue=s),placeholder:e.searchInputValue?"":e.inputPlaceholder,readonly:e.readonly,disabled:e.isDisabled,"validate-event":!1,size:e.realSize,class:E(e.nsCascader.is("focus",e.popperVisible)),onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onFocus:a[2]||(a[2]=s=>e.$emit("focus",s)),onBlur:a[3]||(a[3]=s=>e.$emit("blur",s)),onInput:e.handleInput},{suffix:P(()=>[e.clearBtnVisible?(b(),O(d,{key:"clear",class:E([e.nsInput.e("icon"),"icon-circle-close"]),onClick:ge(e.handleClear,["stop"])},{default:P(()=>[H(r)]),_:1},8,["class","onClick"])):(b(),O(d,{key:"arrow-down",class:E([e.nsInput.e("icon"),"icon-arrow-down",e.nsCascader.is("reverse",e.popperVisible)]),onClick:a[0]||(a[0]=ge(s=>e.togglePopperVisible(),["stop"]))},{default:P(()=>[H(v)]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","onCompositionstart","onCompositionupdate","onCompositionend","onInput"]),e.multiple?(b(),I("div",{key:0,ref:"tagWrapper",class:E(e.nsCascader.e("tags"))},[(b(!0),I(se,null,ce(e.presentTags,s=>(b(),O(h,{key:s.key,type:e.tagType,size:e.tagSize,hit:s.hitState,closable:s.closable,"disable-transitions":"",onClose:S=>e.deleteTag(s)},{default:P(()=>[s.isCollapseTag===!1?(b(),I("span",Vl,W(s.text),1)):(b(),O(T,{key:1,teleported:!1,disabled:e.popperVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:P(()=>[Y("span",null,W(s.text),1)]),content:P(()=>[Y("div",Pl,[(b(!0),I(se,null,ce(e.allPresentTags,(S,A)=>(b(),I("div",{key:A,class:"el-cascader__collapse-tag"},[(b(),O(h,{key:S.key,class:"in-tooltip",type:e.tagType,size:e.tagSize,hit:S.hitState,closable:S.closable,"disable-transitions":"",onClose:K=>e.deleteTag(S)},{default:P(()=>[Y("span",null,W(S.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))]))),128))])]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),e.filterable&&!e.isDisabled?de((b(),I("input",{key:0,"onUpdate:modelValue":a[4]||(a[4]=s=>e.searchInputValue=s),type:"text",class:E(e.nsCascader.e("search-input")),placeholder:e.presentText?"":e.inputPlaceholder,onInput:a[5]||(a[5]=s=>e.handleInput(e.searchInputValue,s)),onClick:a[6]||(a[6]=ge(s=>e.togglePopperVisible(!0),["stop"])),onKeydown:a[7]||(a[7]=Xa((...s)=>e.handleDelete&&e.handleDelete(...s),["delete"])),onCompositionstart:a[8]||(a[8]=(...s)=>e.handleComposition&&e.handleComposition(...s)),onCompositionupdate:a[9]||(a[9]=(...s)=>e.handleComposition&&e.handleComposition(...s)),onCompositionend:a[10]||(a[10]=(...s)=>e.handleComposition&&e.handleComposition(...s))},null,42,Dl)),[[Ya,e.searchInputValue]]):R("v-if",!0)],2)):R("v-if",!0)],38)),[[D,()=>e.togglePopperVisible(!1),e.popperPaneRef]])]),content:P(()=>[de(H(c,{ref:"panel",modelValue:e.checkedValue,"onUpdate:modelValue":a[15]||(a[15]=s=>e.checkedValue=s),options:e.options,props:e.props,border:!1,"render-label":e.$slots.default,onExpandChange:e.handleExpandChange,onClose:a[16]||(a[16]=s=>e.$nextTick(()=>e.togglePopperVisible(!1)))},null,8,["modelValue","options","props","render-label","onExpandChange"]),[[Ne,!e.filtering]]),e.filterable?de((b(),O(C,{key:0,ref:"suggestionPanel",tag:"ul",class:E(e.nsCascader.e("suggestion-panel")),"view-class":e.nsCascader.e("suggestion-list"),onKeydown:e.handleSuggestionKeyDown},{default:P(()=>[e.suggestions.length?(b(!0),I(se,{key:0},ce(e.suggestions,s=>(b(),I("li",{key:s.uid,class:E([e.nsCascader.e("suggestion-item"),e.nsCascader.is("checked",s.checked)]),tabindex:-1,onClick:S=>e.handleSuggestionClick(s)},[Y("span",null,W(s.text),1),s.checked?(b(),O(d,{key:0},{default:P(()=>[H(m)]),_:1})):R("v-if",!0)],10,Sl))),128)):$e(e.$slots,"empty",{key:1},()=>[Y("li",{class:E(e.nsCascader.e("empty-text"))},W(e.t("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class","onKeydown"])),[[Ne,e.filtering]]):R("v-if",!0)]),_:3},8,["visible","teleported","popper-class","popper-options","transition","onHide"])}var we=fe(Tl,[["render",Ll],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/index.vue"]]);we.install=e=>{e.component(we.name,we)};const zl=we,Yl=zl,ze="checked-change",Ml={data:{type:Array,default(){return[]}},optionRender:Function,placeholder:String,title:String,filterable:Boolean,format:Object,filterMethod:Function,defaultChecked:Array,props:Object},Il=(e,a)=>{const{emit:l}=ea(),t=g(()=>e.props.label||"label"),n=g(()=>e.props.key||"key"),i=g(()=>e.props.disabled||"disabled"),r=g(()=>e.data.filter(c=>typeof e.filterMethod=="function"?e.filterMethod(a.query,c):(c[t.value]||c[n.value].toString()).toLowerCase().includes(a.query.toLowerCase()))),d=g(()=>r.value.filter(c=>!c[i.value])),v=g(()=>{const c=a.checked.length,m=e.data.length,{noChecked:C,hasChecked:D}=e.format;return C&&D?c>0?D.replace(/\${checked}/g,c.toString()).replace(/\${total}/g,m.toString()):C.replace(/\${total}/g,m.toString()):`${c}/${m}`}),p=g(()=>{const c=a.checked.length;return c>0&&c<d.value.length}),h=()=>{const c=d.value.map(m=>m[n.value]);a.allChecked=c.length>0&&c.every(m=>a.checked.includes(m))},T=c=>{a.checked=c?d.value.map(m=>m[n.value]):[]};return Z(()=>a.checked,(c,m)=>{if(h(),a.checkChangeByUser){const C=c.concat(m).filter(D=>!c.includes(D)||!m.includes(D));l(ze,c,C)}else l(ze,c),a.checkChangeByUser=!0}),Z(d,()=>{h()}),Z(()=>e.data,()=>{const c=[],m=r.value.map(C=>C[n.value]);a.checked.forEach(C=>{m.includes(C)&&c.push(C)}),a.checkChangeByUser=!1,a.checked=c}),Z(()=>e.defaultChecked,(c,m)=>{if(m&&c.length===m.length&&c.every(s=>m.includes(s)))return;const C=[],D=d.value.map(s=>s[n.value]);c.forEach(s=>{D.includes(s)&&C.push(s)}),a.checkChangeByUser=!1,a.checked=C},{immediate:!0}),{labelProp:t,keyProp:n,disabledProp:i,filteredData:r,checkableData:d,checkedSummary:v,isIndeterminate:p,updateAllChecked:h,handleAllCheckedChange:T}},_l=re({name:"ElTransferPanel",components:{ElCheckboxGroup:ll,ElCheckbox:ia,ElInput:ta,OptionContent:({option:e})=>e},props:Ml,emits:[ze],setup(e,{slots:a}){const{t:l}=Ve(),t=ne("transfer"),n=Me({checked:[],allChecked:!1,query:"",inputHover:!1,checkChangeByUser:!0}),{labelProp:i,keyProp:r,disabledProp:d,filteredData:v,checkedSummary:p,isIndeterminate:h,handleAllCheckedChange:T}=Il(e,n),c=g(()=>n.query.length>0&&v.value.length===0),m=g(()=>!!a.default()[0].children.length),{checked:C,allChecked:D,query:s,inputHover:S,checkChangeByUser:A}=ra(n);return{ns:t,labelProp:i,keyProp:r,disabledProp:d,filteredData:v,checkedSummary:p,isIndeterminate:h,handleAllCheckedChange:T,checked:C,allChecked:D,query:s,inputHover:S,checkChangeByUser:A,hasNoMatch:c,SearchIcon:xa,hasFooter:m,t:l}}});function Hl(e,a,l,t,n,i){const r=$("el-checkbox"),d=$("el-input"),v=$("option-content"),p=$("el-checkbox-group");return b(),I("div",{class:E(e.ns.b("panel"))},[Y("p",{class:E(e.ns.be("panel","header"))},[H(r,{modelValue:e.allChecked,"onUpdate:modelValue":a[0]||(a[0]=h=>e.allChecked=h),indeterminate:e.isIndeterminate,onChange:e.handleAllCheckedChange},{default:P(()=>[xe(W(e.title)+" ",1),Y("span",null,W(e.checkedSummary),1)]),_:1},8,["modelValue","indeterminate","onChange"])],2),Y("div",{class:E([e.ns.be("panel","body"),e.ns.is("with-footer",e.hasFooter)])},[e.filterable?(b(),O(d,{key:0,modelValue:e.query,"onUpdate:modelValue":a[1]||(a[1]=h=>e.query=h),class:E(e.ns.be("panel","filter")),size:"default",placeholder:e.placeholder,"prefix-icon":e.SearchIcon,clearable:"",onMouseenter:a[2]||(a[2]=h=>e.inputHover=!0),onMouseleave:a[3]||(a[3]=h=>e.inputHover=!1)},null,8,["modelValue","class","placeholder","prefix-icon"])):R("v-if",!0),de(H(p,{modelValue:e.checked,"onUpdate:modelValue":a[4]||(a[4]=h=>e.checked=h),class:E([e.ns.is("filterable",e.filterable),e.ns.be("panel","list")])},{default:P(()=>[(b(!0),I(se,null,ce(e.filteredData,h=>(b(),O(r,{key:h[e.keyProp],class:E(e.ns.be("panel","item")),label:h[e.keyProp],disabled:h[e.disabledProp]},{default:P(()=>[H(v,{option:e.optionRender(h)},null,8,["option"])]),_:2},1032,["class","label","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[Ne,!e.hasNoMatch&&e.data.length>0]]),de(Y("p",{class:E(e.ns.be("panel","empty"))},W(e.hasNoMatch?e.t("el.transfer.noMatch"):e.t("el.transfer.noData")),3),[[Ne,e.hasNoMatch||e.data.length===0]])],2),e.hasFooter?(b(),I("p",{key:0,class:E(e.ns.be("panel","footer"))},[$e(e.$slots,"default")],2)):R("v-if",!0)],2)}var Al=fe(_l,[["render",Hl],["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer-panel.vue"]]);const Bl=e=>{const a=g(()=>e.props.key),l=g(()=>e.data.reduce((i,r)=>(i[r[a.value]]=r)&&i,{})),t=g(()=>e.data.filter(i=>!e.modelValue.includes(i[a.value]))),n=g(()=>e.targetOrder==="original"?e.data.filter(i=>e.modelValue.includes(i[a.value])):e.modelValue.reduce((i,r)=>{const d=l.value[r];return d&&i.push(d),i},[]));return{propsKey:a,sourceData:t,targetData:n}},ca="left-check-change",ua="right-check-change",Fl=(e,a)=>({onSourceCheckedChange:(n,i)=>{e.leftChecked=n,i!==void 0&&a(ca,n,i)},onTargetCheckedChange:(n,i)=>{e.rightChecked=n,i!==void 0&&a(ua,n,i)}}),Ol=(e,a,l,t)=>{const n=(d,v,p)=>{t(ue,d),t(pe,d,v,p)};return{addToLeft:()=>{const d=e.modelValue.slice();a.rightChecked.forEach(v=>{const p=d.indexOf(v);p>-1&&d.splice(p,1)}),n(d,"left",a.rightChecked)},addToRight:()=>{let d=e.modelValue.slice();const v=e.data.filter(p=>{const h=p[l.value];return a.leftChecked.includes(h)&&!e.modelValue.includes(h)}).map(p=>p[l.value]);d=e.targetOrder==="unshift"?v.concat(d):d.concat(v),e.targetOrder==="original"&&(d=e.data.filter(p=>d.includes(p[l.value])).map(p=>p[l.value])),n(d,"right",a.leftChecked)}}},Kl=re({name:"ElTransfer",components:{TransferPanel:Al,ElButton:el,ElIcon:Te,ArrowLeft:al,ArrowRight:Ye},props:{data:{type:Array,default:()=>[]},titles:{type:Array,default:()=>[]},buttonTexts:{type:Array,default:()=>[]},filterPlaceholder:{type:String,default:""},filterMethod:Function,leftDefaultChecked:{type:Array,default:()=>[]},rightDefaultChecked:{type:Array,default:()=>[]},renderContent:Function,modelValue:{type:Array,default:()=>[]},format:{type:Object,default:()=>({})},filterable:{type:Boolean,default:!1},props:{type:Object,default:()=>({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,default:"original",validator:e=>["original","push","unshift"].includes(e)}},emits:[ue,pe,ca,ua],setup(e,{emit:a,slots:l}){const{t}=Ve(),n=ne("transfer"),i=be(oa,{}),r=Me({leftChecked:[],rightChecked:[]}),{propsKey:d,sourceData:v,targetData:p}=Bl(e),{onSourceCheckedChange:h,onTargetCheckedChange:T}=Fl(r,a),{addToLeft:c,addToRight:m}=Ol(e,r,d,a),C=M(),D=M(),s=k=>{switch(k){case"left":C.value.query="";break;case"right":D.value.query="";break}},S=g(()=>e.buttonTexts.length===2),A=g(()=>e.titles[0]||t("el.transfer.titles.0")),K=g(()=>e.titles[1]||t("el.transfer.titles.1")),G=g(()=>e.filterPlaceholder||t("el.transfer.filterPlaceholder"));Z(()=>e.modelValue,()=>{var k;(k=i.validate)==null||k.call(i,"change").catch(B=>sa())});const q=g(()=>k=>e.renderContent?e.renderContent(De,k):l.default?l.default({option:k}):De("span",k[e.props.label]||k[e.props.key]));return ve(oe({ns:n,sourceData:v,targetData:p,onSourceCheckedChange:h,onTargetCheckedChange:T,addToLeft:c,addToRight:m},ra(r)),{hasButtonTexts:S,leftPanelTitle:A,rightPanelTitle:K,panelFilterPlaceholder:G,clearQuery:s,leftPanel:C,rightPanel:D,optionRender:q})}}),Rl={key:0},ql={key:0};function Ul(e,a,l,t,n,i){const r=$("transfer-panel"),d=$("arrow-left"),v=$("el-icon"),p=$("el-button"),h=$("arrow-right");return b(),I("div",{class:E(e.ns.b())},[H(r,{ref:"leftPanel",data:e.sourceData,"option-render":e.optionRender,placeholder:e.panelFilterPlaceholder,title:e.leftPanelTitle,filterable:e.filterable,format:e.format,"filter-method":e.filterMethod,"default-checked":e.leftDefaultChecked,props:e.props,onCheckedChange:e.onSourceCheckedChange},{default:P(()=>[$e(e.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),Y("div",{class:E(e.ns.e("buttons"))},[H(p,{type:"primary",class:E([e.ns.e("button"),e.ns.is("with-texts",e.hasButtonTexts)]),disabled:e.rightChecked.length===0,onClick:e.addToLeft},{default:P(()=>[H(v,null,{default:P(()=>[H(d)]),_:1}),e.buttonTexts[0]!==void 0?(b(),I("span",Rl,W(e.buttonTexts[0]),1)):R("v-if",!0)]),_:1},8,["class","disabled","onClick"]),H(p,{type:"primary",class:E([e.ns.e("button"),e.ns.is("with-texts",e.hasButtonTexts)]),disabled:e.leftChecked.length===0,onClick:e.addToRight},{default:P(()=>[e.buttonTexts[1]!==void 0?(b(),I("span",ql,W(e.buttonTexts[1]),1)):R("v-if",!0),H(v,null,{default:P(()=>[H(h)]),_:1})]),_:1},8,["class","disabled","onClick"])],2),H(r,{ref:"rightPanel",data:e.targetData,"option-render":e.optionRender,placeholder:e.panelFilterPlaceholder,filterable:e.filterable,format:e.format,"filter-method":e.filterMethod,title:e.rightPanelTitle,"default-checked":e.rightDefaultChecked,props:e.props,onCheckedChange:e.onTargetCheckedChange},{default:P(()=>[$e(e.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2)}var Ee=fe(Kl,[["render",Ul],["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/index.vue"]]);Ee.install=e=>{e.component(Ee.name,Ee)};const jl=Ee,Ql=jl;export{Yl as E,Ql as a};
