var A=Object.defineProperty,I=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var S=(e,t,l)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,d=(e,t)=>{for(var l in t||(t={}))j.call(t,l)&&S(e,l,t[l]);if(N)for(var l of N(t))L.call(t,l)&&S(e,l,t[l]);return e},m=(e,t)=>I(e,z(t));import{A as D,eb as _,b4 as V,K as x,B as k,aK as T,e as w,O as E,R as F,aC as H,aF as R,az as U,g as M,h as C,a3 as q,ak as O,L as $,ai as y}from"./index.26463cbc.js";import{_ as K}from"./el-tree.35d50e0b.js";const G=(e,{attrs:t},{tree:l,key:i})=>{const u=D("tree-select"),a=m(d(d({},_(V(e),Object.keys(x.props))),t),{valueKey:i,popperClass:k(()=>{const c=[u.e("popper")];return e.popperClass&&c.push(e.popperClass),c.join(" ")}),filterMethod:(c="")=>{e.filterMethod&&e.filterMethod(c),T(()=>{var f;(f=l.value)==null||f.filter(c)})},onVisibleChange:c=>{var f;(f=t.onVisibleChange)==null||f.call(t,c),e.filterable&&c&&a.filterMethod()}});return a},J=w({extends:E,setup(e,t){const l=E.setup(e,t);return delete l.selectOptionClick,l},methods:{selectOptionClick(){this.$el.parentElement.click()}}}),Q=(e,{attrs:t,slots:l,emit:i},{select:u,tree:a,key:c})=>{F(()=>e.modelValue,()=>{e.showCheckbox&&T(()=>{const n=a.value;n&&!H(n.getCheckedKeys(),b(e.modelValue))&&n.setCheckedKeys(b(e.modelValue))})},{immediate:!0,deep:!0});const f=k(()=>d({value:c.value},e.props)),h=(n,o)=>{var r;const s=f.value[n];return U(s)?s(o,(r=a.value)==null?void 0:r.getNode(h("value",o))):o[s]};return m(d(d({},_(V(e),Object.keys(K.props))),t),{nodeKey:c,expandOnClickNode:k(()=>!e.checkStrictly),defaultExpandedKeys:k(()=>{const n=b(e.modelValue),o=a.value?n.map(r=>{var s,v,p;return(p=(v=(s=a.value)==null?void 0:s.getNode(r))==null?void 0:v.parent)==null?void 0:p.key}).filter(r=>B(r)):n;return e.defaultExpandedKeys?e.defaultExpandedKeys.concat(o):o}),renderContent:(n,{node:o,data:r,store:s})=>n(J,{value:h("value",r),label:h("label",r),disabled:h("disabled",r)},e.renderContent?()=>e.renderContent(n,{node:o,data:r,store:s}):l.default?()=>l.default({node:o,data:r,store:s}):void 0),filterNodeMethod:(n,o,r)=>{var s;return e.filterNodeMethod?e.filterNodeMethod(n,o,r):n?(s=h("label",o))==null?void 0:s.includes(n):!0},onNodeClick:(n,o,r)=>{var s,v,p;if((s=t.onNodeClick)==null||s.call(t,n,o,r),(e.checkStrictly&&e.showCheckbox?e.checkOnClickNode:e.checkStrictly)||o.isLeaf){if(!h("disabled",n)){const P=(v=u.value)==null?void 0:v.options.get(h("value",n));(p=u.value)==null||p.handleOptionSelect(P,!0)}}else r.proxy.handleExpandIconClick()},onCheck:(n,o)=>{var r,s;(r=t.onCheck)==null||r.call(t,n,o);const v=e.checkStrictly?o.checkedKeys:(s=a.value)==null?void 0:s.getCheckedKeys(!0),p=h("value",n);i(R,e.multiple?v:v.includes(p)?p:void 0)}})};function B(e){return e||e===0}function b(e){return Array.isArray(e)?e:B(e)?[e]:[]}const W=w({name:"ElTreeSelect",inheritAttrs:!1,props:d(d({},x.props),K.props),setup(e,t){const{slots:l,expose:i}=t,u=M(),a=M(),c=k(()=>e.nodeKey||e.valueKey||"value"),f=G(e,t,{select:u,tree:a,key:c}),h=Q(e,t,{select:u,tree:a,key:c}),n=C({});return i(n),q(()=>{Object.assign(n,d(d({},_(a.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"])),_(u.value,["focus","blur"])))}),()=>O(x,C(m(d({},f),{ref:o=>u.value=o})),m(d({},l),{default:()=>O(K,C(m(d({},h),{ref:o=>a.value=o})))}))}});var g=$(W,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue"]]);g.install=e=>{e.component(g.name,g)};const X=g,te=X;const le=e=>new Promise(t=>{const l={authorization:"Bearer "+localStorage.getItem("token")};y.get("/api/sys/permission/list",{params:e,headers:l}).then(i=>{t(i.data)})}),ne=(e,t)=>{const l=t?"/api/sys/permission/edit":"/api/sys/permission/add",i={authorization:"Bearer "+localStorage.getItem("token")};return new Promise(u=>{y.post(l,e,{headers:i}).then(a=>{u(a.data)})})},oe=e=>{const t={authorization:"Bearer "+localStorage.getItem("token")};return new Promise(l=>{y.delete("/api/sys/permission/delete",{params:e,headers:t}).then(i=>{l(i.data)})})},re=e=>{const t={authorization:"Bearer "+localStorage.getItem("token")};return new Promise(l=>{y.delete("/api/sys/permission/deleteBatch",{data:e,headers:t}).then(i=>{l(i.data)})})};export{te as E,oe as a,re as d,le as g,ne as s};
