var Le=Object.defineProperty,Ee=Object.defineProperties;var Ce=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var Me=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var fe=(e,l,n)=>l in e?Le(e,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[l]=n,ge=(e,l)=>{for(var n in l||(l={}))Me.call(l,n)&&fe(e,n,l[n]);if(ve)for(var n of ve(l))Te.call(l,n)&&fe(e,n,l[n]);return e},ce=(e,l)=>Ee(e,Ce(l));import{E as Ne}from"./index2.555b200a.js";import{am as oe,g as G,B as f,R as x,aZ as be,aF as q,aK as le,a6 as Pe,e as se,aO as Ie,A as ie,h as Se,b4 as re,L as ue,r as _,o as S,c as M,b as he,w as ye,a as H,t as Fe,F as T,S as j,ak as ze,aV as $e,aW as Ke,bn as We,bD as de,aG as ke,aS as Ve,av as Xe,b7 as Ye,aX as Re,aH as Ae,a3 as Ue,bq as Oe,be as pe,aY as we,j as ae,H as Q,J as D,I as te}from"./index.26463cbc.js";const{left:je,down:He,right:Ge,up:qe,home:Je,end:Ze,pageUp:Qe,pageDown:De}=Pe,xe=(e,l,n)=>{const v=G(),d=G(!1),m=f(()=>l.value instanceof Function),s=f(()=>m.value&&l.value(e.modelValue)||e.modelValue),o=be(()=>{n.value&&(d.value=!0)},50),g=be(()=>{n.value&&(d.value=!1)},50);return{tooltip:v,tooltipVisible:d,formatValue:s,displayTooltip:o,hideTooltip:g}},_e=(e,l,n)=>{const{disabled:v,min:d,max:m,step:s,showTooltip:o,precision:g,sliderSize:a,formatTooltip:i,emitChange:t,resetSize:w,updateDragging:N}=oe("SliderProvider"),{tooltip:L,tooltipVisible:P,formatValue:I,displayTooltip:z,hideTooltip:$}=xe(e,i,o),X=G(),F=f(()=>`${(e.modelValue-d.value)/(m.value-d.value)*100}%`),Y=f(()=>e.vertical?{bottom:F.value}:{left:F.value}),R=()=>{l.hovering=!0,z()},A=()=>{l.hovering=!1,l.dragging||$()},J=r=>{v.value||(r.preventDefault(),C(r),window.addEventListener("mousemove",k),window.addEventListener("touchmove",k),window.addEventListener("mouseup",V),window.addEventListener("touchend",V),window.addEventListener("contextmenu",V),X.value.focus())},E=r=>{v.value||(l.newPosition=Number.parseFloat(F.value)+r/(m.value-d.value)*100,B(l.newPosition),t())},Z=()=>{E(-s.value)},u=()=>{E(s.value)},c=()=>{E(-s.value*4)},y=()=>{E(s.value*4)},U=()=>{v.value||(B(0),t())},O=()=>{v.value||(B(100),t())},p=r=>{let b=!0;[je,He].includes(r.key)?Z():[Ge,qe].includes(r.key)?u():r.key===Je?U():r.key===Ze?O():r.key===De?c():r.key===Qe?y():b=!1,b&&r.preventDefault()},K=r=>{let b,h;return r.type.startsWith("touch")?(h=r.touches[0].clientY,b=r.touches[0].clientX):(h=r.clientY,b=r.clientX),{clientX:b,clientY:h}},C=r=>{l.dragging=!0,l.isClick=!0;const{clientX:b,clientY:h}=K(r);e.vertical?l.startY=h:l.startX=b,l.startPosition=Number.parseFloat(F.value),l.newPosition=l.startPosition},k=r=>{if(l.dragging){l.isClick=!1,z(),w();let b;const{clientX:h,clientY:W}=K(r);e.vertical?(l.currentY=W,b=(l.startY-l.currentY)/a.value*100):(l.currentX=h,b=(l.currentX-l.startX)/a.value*100),l.newPosition=l.startPosition+b,B(l.newPosition)}},V=()=>{l.dragging&&(setTimeout(()=>{l.dragging=!1,l.hovering||$(),l.isClick||(B(l.newPosition),t())},0),window.removeEventListener("mousemove",k),window.removeEventListener("touchmove",k),window.removeEventListener("mouseup",V),window.removeEventListener("touchend",V),window.removeEventListener("contextmenu",V))},B=async r=>{if(r===null||Number.isNaN(+r))return;r<0?r=0:r>100&&(r=100);const b=100/((m.value-d.value)/s.value);let W=Math.round(r/b)*b*(m.value-d.value)*.01+d.value;W=Number.parseFloat(W.toFixed(g.value)),n(q,W),!l.dragging&&e.modelValue!==l.oldValue&&(l.oldValue=e.modelValue),await le(),l.dragging&&z(),L.value.updatePopper()};return x(()=>l.dragging,r=>{N(r)}),{button:X,tooltip:L,tooltipVisible:P,showTooltip:o,wrapperStyle:Y,formatValue:I,handleMouseEnter:R,handleMouseLeave:A,onButtonDown:J,onKeyDown:p,setPosition:B}},el=se({name:"ElSliderButton",components:{ElTooltip:Ie},props:{modelValue:{type:Number,default:0},vertical:{type:Boolean,default:!1},tooltipClass:{type:String,default:""}},emits:[q],setup(e,{emit:l}){const n=ie("slider"),v=Se({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:e.modelValue}),{button:d,tooltip:m,showTooltip:s,tooltipVisible:o,wrapperStyle:g,formatValue:a,handleMouseEnter:i,handleMouseLeave:t,onButtonDown:w,onKeyDown:N,setPosition:L}=_e(e,v,l),{hovering:P,dragging:I}=re(v);return{ns:n,button:d,tooltip:m,tooltipVisible:o,showTooltip:s,wrapperStyle:g,formatValue:a,handleMouseEnter:i,handleMouseLeave:t,onButtonDown:w,onKeyDown:N,setPosition:L,hovering:P,dragging:I}}});function ll(e,l,n,v,d,m){const s=_("el-tooltip");return S(),M("div",{ref:"button",class:T([e.ns.e("button-wrapper"),{hover:e.hovering,dragging:e.dragging}]),style:j(e.wrapperStyle),tabindex:"0",onMouseenter:l[1]||(l[1]=(...o)=>e.handleMouseEnter&&e.handleMouseEnter(...o)),onMouseleave:l[2]||(l[2]=(...o)=>e.handleMouseLeave&&e.handleMouseLeave(...o)),onMousedown:l[3]||(l[3]=(...o)=>e.onButtonDown&&e.onButtonDown(...o)),onTouchstart:l[4]||(l[4]=(...o)=>e.onButtonDown&&e.onButtonDown(...o)),onFocus:l[5]||(l[5]=(...o)=>e.handleMouseEnter&&e.handleMouseEnter(...o)),onBlur:l[6]||(l[6]=(...o)=>e.handleMouseLeave&&e.handleMouseLeave(...o)),onKeydown:l[7]||(l[7]=(...o)=>e.onKeyDown&&e.onKeyDown(...o))},[he(s,{ref:"tooltip",visible:e.tooltipVisible,"onUpdate:visible":l[0]||(l[0]=o=>e.tooltipVisible=o),placement:"top","stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!e.showTooltip,persistent:""},{content:ye(()=>[H("span",null,Fe(e.formatValue),1)]),default:ye(()=>[H("div",{class:T([e.ns.e("button"),{hover:e.hovering,dragging:e.dragging}])},null,2)]),_:1},8,["visible","popper-class","disabled"])],38)}var nl=ue(el,[["render",ll],["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue"]]);const al=se({name:"ElMarker",props:{mark:{type:[String,Object],default:()=>{}}},setup(e){const l=ie("slider"),n=f(()=>typeof e.mark=="string"?e.mark:e.mark.label);return{ns:l,label:n}},render(){var e;return ze("div",{class:this.ns.e("marks-text"),style:(e=this.mark)==null?void 0:e.style},this.label)}});var tl=ue(al,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/marker.vue"]]);const ol=e=>f(()=>e.marks?Object.keys(e.marks).map(parseFloat).sort((n,v)=>n-v).filter(n=>n<=e.max&&n>=e.min).map(n=>({point:n,position:(n-e.min)*100/(e.max-e.min),mark:e.marks[n]})):[]),rl=(e,l,n)=>{const v=oe($e,{}),d=oe(Ke,{}),m=We(),s=G(),o=G(),g={firstButton:s,secondButton:o},a=f(()=>e.disabled||v.disabled||!1),i=f(()=>Math.min(l.firstValue,l.secondValue)),t=f(()=>Math.max(l.firstValue,l.secondValue)),w=f(()=>e.range?`${100*(t.value-i.value)/(e.max-e.min)}%`:`${100*(l.firstValue-e.min)/(e.max-e.min)}%`),N=f(()=>e.range?`${100*(i.value-e.min)/(e.max-e.min)}%`:"0%"),L=f(()=>e.vertical?{height:e.height}:{}),P=f(()=>e.vertical?{height:w.value,bottom:N.value}:{width:w.value,left:N.value}),I=()=>{m.value&&(l.sliderSize=m.value[`client${e.vertical?"Height":"Width"}`])},z=u=>{const c=e.min+u*(e.max-e.min)/100;if(!e.range)return s;let y;return Math.abs(i.value-c)<Math.abs(t.value-c)?y=l.firstValue<l.secondValue?"firstButton":"secondButton":y=l.firstValue>l.secondValue?"firstButton":"secondButton",g[y]},$=u=>{const c=z(u);return c.value.setPosition(u),c},X=u=>{l.firstValue=u,Y(e.range?[i.value,t.value]:u)},F=u=>{l.secondValue=u,e.range&&Y([i.value,t.value])},Y=u=>{n(q,u),n(de,u)},R=async()=>{await le(),n(ke,e.range?[i.value,t.value]:e.modelValue)},A=u=>{var c,y,U,O,p,K;if(a.value||l.dragging)return;I();let C=0;if(e.vertical){const k=(U=(y=(c=u.touches)==null?void 0:c.item(0))==null?void 0:y.clientY)!=null?U:u.clientY;C=(m.value.getBoundingClientRect().bottom-k)/l.sliderSize*100}else{const k=(K=(p=(O=u.touches)==null?void 0:O.item(0))==null?void 0:p.clientX)!=null?K:u.clientX,V=m.value.getBoundingClientRect().left;C=(k-V)/l.sliderSize*100}if(!(C<0||C>100))return $(C)};return{elFormItem:d,slider:m,firstButton:s,secondButton:o,sliderDisabled:a,minValue:i,maxValue:t,runwayStyle:L,barStyle:P,resetSize:I,setPosition:$,emitChange:R,onSliderWrapperPrevent:u=>{var c,y;(((c=g.firstButton.value)==null?void 0:c.dragging)||((y=g.secondButton.value)==null?void 0:y.dragging))&&u.preventDefault()},onSliderClick:u=>{A(u)&&R()},onSliderDown:async u=>{const c=A(u);c&&(await le(),c.value.onButtonDown(u))},setFirstValue:X,setSecondValue:F}},sl=(e,l,n,v)=>({stops:f(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const s=(e.max-e.min)/e.step,o=100*e.step/(e.max-e.min),g=Array.from({length:s-1}).map((a,i)=>(i+1)*o);return e.range?g.filter(a=>a<100*(n.value-e.min)/(e.max-e.min)||a>100*(v.value-e.min)/(e.max-e.min)):g.filter(a=>a>100*(l.firstValue-e.min)/(e.max-e.min))}),getStopStyle:s=>e.vertical?{bottom:`${s}%`}:{left:`${s}%`}}),il=se({name:"ElSlider",components:{ElInputNumber:Ne,SliderButton:nl,SliderMarker:tl},props:{modelValue:{type:[Number,Array],default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:{type:Boolean,default:!1},showInputControls:{type:Boolean,default:!0},size:{type:String,validator:Ve},inputSize:{type:String,validator:Ve},showStops:{type:Boolean,default:!1},showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Function,default:void 0},disabled:{type:Boolean,default:!1},range:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},height:{type:String,default:""},debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:Function,default:void 0},tooltipClass:{type:String,default:void 0},marks:Object},emits:[q,ke,de],setup(e,{emit:l}){const n=ie("slider"),{t:v}=Xe(),d=Se({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:m,slider:s,firstButton:o,secondButton:g,sliderDisabled:a,minValue:i,maxValue:t,runwayStyle:w,barStyle:N,resetSize:L,emitChange:P,onSliderWrapperPrevent:I,onSliderClick:z,onSliderDown:$,setFirstValue:X,setSecondValue:F}=rl(e,d,l),{stops:Y,getStopStyle:R}=sl(e,d,i,t),{inputId:A,isLabeledByFormItem:J}=Ye(e,{formItemContext:m}),E=Re(),Z=f(()=>e.inputSize||E.value),u=f(()=>e.label||v("el.slider.defaultLabel",{min:e.min,max:e.max})),c=f(()=>e.range?e.rangeStartLabel||v("el.slider.defaultRangeStartLabel"):u.value),y=f(()=>e.formatValueText?e.formatValueText(V.value):`${V.value}`),U=f(()=>e.rangeEndLabel||v("el.slider.defaultRangeEndLabel")),O=f(()=>e.formatValueText?e.formatValueText(B.value):`${B.value}`),p=f(()=>[n.b(),n.m(E.value),n.is("vertical",e.vertical),{[n.m("with-input")]:e.showInput}]),K=ol(e);ul(e,d,i,t,l,m);const C=f(()=>{const ne=[e.min,e.max,e.step].map(Be=>{const me=`${Be}`.split(".")[1];return me?me.length:0});return Math.max.apply(null,ne)}),{sliderWrapper:k}=dl(e,d,L),{firstValue:V,secondValue:B,oldValue:r,dragging:b,sliderSize:h}=re(d),W=ne=>{d.dragging=ne};return Ae("SliderProvider",ce(ge({},re(e)),{sliderSize:h,disabled:a,precision:C,emitChange:P,resetSize:L,updateDragging:W})),{ns:n,firstValue:V,secondValue:B,oldValue:r,dragging:b,sliderSize:h,inputId:A,isLabeledByFormItem:J,elFormItem:m,slider:s,groupLabel:u,firstButton:o,firstButtonLabel:c,firstValueText:y,secondButton:g,secondButtonLabel:U,secondValueText:O,sliderDisabled:a,runwayStyle:w,barStyle:N,emitChange:P,onSliderClick:z,onSliderWrapperPrevent:I,onSliderDown:$,getStopStyle:R,setFirstValue:X,setSecondValue:F,stops:Y,markList:K,sliderWrapper:k,sliderWrapperSize:E,sliderInputSize:Z,sliderKls:p}}}),ul=(e,l,n,v,d,m)=>{const s=a=>{d(q,a),d(de,a)},o=()=>e.range?![n.value,v.value].every((a,i)=>a===l.oldValue[i]):e.modelValue!==l.oldValue,g=()=>{var a,i;if(e.min>e.max){pe("Slider","min should not be greater than max.");return}const t=e.modelValue;e.range&&Array.isArray(t)?t[1]<e.min?s([e.min,e.min]):t[0]>e.max?s([e.max,e.max]):t[0]<e.min?s([e.min,t[1]]):t[1]>e.max?s([t[0],e.max]):(l.firstValue=t[0],l.secondValue=t[1],o()&&((a=m.validate)==null||a.call(m,"change").catch(w=>we()),l.oldValue=t.slice())):!e.range&&typeof t=="number"&&!Number.isNaN(t)&&(t<e.min?s(e.min):t>e.max?s(e.max):(l.firstValue=t,o()&&((i=m.validate)==null||i.call(m,"change").catch(w=>we()),l.oldValue=t)))};g(),x(()=>l.dragging,a=>{a||g()}),x(()=>e.modelValue,(a,i)=>{l.dragging||Array.isArray(a)&&Array.isArray(i)&&a.every((t,w)=>t===i[w])&&l.firstValue===a[0]&&l.secondValue===a[1]||g()},{deep:!0}),x(()=>[e.min,e.max],()=>{g()})},dl=(e,l,n)=>{const v=G();return Ue(async()=>{e.range?(Array.isArray(e.modelValue)?(l.firstValue=Math.max(e.min,e.modelValue[0]),l.secondValue=Math.min(e.max,e.modelValue[1])):(l.firstValue=e.min,l.secondValue=e.max),l.oldValue=[l.firstValue,l.secondValue]):(typeof e.modelValue!="number"||Number.isNaN(e.modelValue)?l.firstValue=e.min:l.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),l.oldValue=l.firstValue),window.addEventListener("resize",n),await le(),n()}),Oe(()=>{window.removeEventListener("resize",n)}),{sliderWrapper:v}},ml=["id","role","aria-label","aria-labelledby"],vl={key:1};function fl(e,l,n,v,d,m){const s=_("slider-button"),o=_("slider-marker"),g=_("el-input-number");return S(),M("div",{id:e.range?e.inputId:void 0,ref:"sliderWrapper",class:T(e.sliderKls),role:e.range?"group":void 0,"aria-label":e.range&&!e.isLabeledByFormItem?e.groupLabel:void 0,"aria-labelledby":e.range&&e.isLabeledByFormItem?e.elFormItem.labelId:void 0,onTouchstart:l[2]||(l[2]=(...a)=>e.onSliderWrapperPrevent&&e.onSliderWrapperPrevent(...a)),onTouchmove:l[3]||(l[3]=(...a)=>e.onSliderWrapperPrevent&&e.onSliderWrapperPrevent(...a))},[H("div",{ref:"slider",class:T([e.ns.e("runway"),{"show-input":e.showInput&&!e.range},e.ns.is("disabled",e.sliderDisabled)]),style:j(e.runwayStyle),onMousedown:l[0]||(l[0]=(...a)=>e.onSliderDown&&e.onSliderDown(...a)),onTouchstart:l[1]||(l[1]=(...a)=>e.onSliderDown&&e.onSliderDown(...a))},[H("div",{class:T(e.ns.e("bar")),style:j(e.barStyle)},null,6),he(s,{id:e.range?void 0:e.inputId,ref:"firstButton","model-value":e.firstValue,vertical:e.vertical,"tooltip-class":e.tooltipClass,role:"slider","aria-label":e.range||!e.isLabeledByFormItem?e.firstButtonLabel:void 0,"aria-labelledby":!e.range&&e.isLabeledByFormItem?e.elFormItem.labelId:void 0,"aria-valuemin":e.min,"aria-valuemax":e.range?e.secondValue:e.max,"aria-valuenow":e.firstValue,"aria-valuetext":e.firstValueText,"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":e.sliderDisabled,"onUpdate:modelValue":e.setFirstValue},null,8,["id","model-value","vertical","tooltip-class","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),e.range?(S(),ae(s,{key:0,ref:"secondButton","model-value":e.secondValue,vertical:e.vertical,"tooltip-class":e.tooltipClass,role:"slider","aria-label":e.secondButtonLabel,"aria-valuemin":e.firstValue,"aria-valuemax":e.max,"aria-valuenow":e.secondValue,"aria-valuetext":e.secondValueText,"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":e.sliderDisabled,"onUpdate:modelValue":e.setSecondValue},null,8,["model-value","vertical","tooltip-class","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):Q("v-if",!0),e.showStops?(S(),M("div",vl,[(S(!0),M(D,null,te(e.stops,(a,i)=>(S(),M("div",{key:i,class:T(e.ns.e("stop")),style:j(e.getStopStyle(a))},null,6))),128))])):Q("v-if",!0),e.markList.length>0?(S(),M(D,{key:2},[H("div",null,[(S(!0),M(D,null,te(e.markList,(a,i)=>(S(),M("div",{key:i,style:j(e.getStopStyle(a.position)),class:T([e.ns.e("stop"),e.ns.e("marks-stop")])},null,6))),128))]),H("div",{class:T(e.ns.e("marks"))},[(S(!0),M(D,null,te(e.markList,(a,i)=>(S(),ae(o,{key:i,mark:a.mark,style:j(e.getStopStyle(a.position))},null,8,["mark","style"]))),128))],2)],64)):Q("v-if",!0)],38),e.showInput&&!e.range?(S(),ae(g,{key:0,ref:"input","model-value":e.firstValue,class:T(e.ns.e("input")),step:e.step,disabled:e.sliderDisabled,controls:e.showInputControls,min:e.min,max:e.max,debounce:e.debounce,size:e.sliderInputSize,"onUpdate:modelValue":e.setFirstValue,onChange:e.emitChange},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):Q("v-if",!0)],42,ml)}var ee=ue(il,[["render",fl],["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/index.vue"]]);ee.install=e=>{e.component(ee.name,ee)};const gl=ee,Vl=gl;export{Vl as E};
