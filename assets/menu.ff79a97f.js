var w=Object.defineProperty,I=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var E=(e,t,n)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))j.call(t,n)&&E(e,n,t[n]);if(S)for(var n of S(t))L.call(t,n)&&E(e,n,t[n]);return e},k=(e,t)=>I(e,z(t));import{z as D,dP as g,b1 as O,s as N,A as y,aF as T,e as P,K as M,N as F,ax as H,aA as U,au as q,g as x,h as _,a1 as R,ah as V,B as $}from"./index.61ed0768.js";import{_ as b}from"./el-tree.1dbafdad.js";import{a as p}from"./index.cf99b79d.js";const G=(e,{attrs:t},{tree:n,key:i})=>{const d=D("tree-select"),r=k(u(u({},g(O(e),Object.keys(N.props))),t),{valueKey:i,popperClass:y(()=>{const c=[d.e("popper")];return e.popperClass&&c.push(e.popperClass),c.join(" ")}),filterMethod:(c="")=>{e.filterMethod&&e.filterMethod(c),T(()=>{var f;(f=n.value)==null||f.filter(c)})},onVisibleChange:c=>{var f;(f=t.onVisibleChange)==null||f.call(t,c),e.filterable&&c&&r.filterMethod()}});return r},J=P({extends:M,setup(e,t){const n=M.setup(e,t);return delete n.selectOptionClick,n},methods:{selectOptionClick(){this.$el.parentElement.click()}}}),Q=(e,{attrs:t,slots:n,emit:i},{select:d,tree:r,key:c})=>{F(()=>e.modelValue,()=>{e.showCheckbox&&T(()=>{const l=r.value;l&&!H(l.getCheckedKeys(),K(e.modelValue))&&l.setCheckedKeys(K(e.modelValue))})},{immediate:!0,deep:!0});const f=y(()=>u({value:c.value},e.props)),h=(l,s)=>{var a;const o=f.value[l];return q(o)?o(s,(a=r.value)==null?void 0:a.getNode(h("value",s))):s[o]};return k(u(u({},g(O(e),Object.keys(b.props))),t),{nodeKey:c,expandOnClickNode:y(()=>!e.checkStrictly),defaultExpandedKeys:y(()=>{const l=K(e.modelValue),s=r.value?l.map(a=>{var o,v,m;return(m=(v=(o=r.value)==null?void 0:o.getNode(a))==null?void 0:v.parent)==null?void 0:m.key}).filter(a=>A(a)):l;return e.defaultExpandedKeys?e.defaultExpandedKeys.concat(s):s}),renderContent:(l,{node:s,data:a,store:o})=>l(J,{value:h("value",a),label:h("label",a),disabled:h("disabled",a)},e.renderContent?()=>e.renderContent(l,{node:s,data:a,store:o}):n.default?()=>n.default({node:s,data:a,store:o}):void 0),filterNodeMethod:(l,s,a)=>{var o;return e.filterNodeMethod?e.filterNodeMethod(l,s,a):l?(o=h("label",s))==null?void 0:o.includes(l):!0},onNodeClick:(l,s,a)=>{var o,v,m;if((o=t.onNodeClick)==null||o.call(t,l,s,a),(e.checkStrictly&&e.showCheckbox?e.checkOnClickNode:e.checkStrictly)||s.isLeaf){if(!h("disabled",l)){const B=(v=d.value)==null?void 0:v.options.get(h("value",l));(m=d.value)==null||m.handleOptionSelect(B,!0)}}else a.proxy.handleExpandIconClick()},onCheck:(l,s)=>{var a,o;(a=t.onCheck)==null||a.call(t,l,s);const v=e.checkStrictly?s.checkedKeys:(o=r.value)==null?void 0:o.getCheckedKeys(!0),m=h("value",l);i(U,e.multiple?v:v.includes(m)?m:void 0)}})};function A(e){return e||e===0}function K(e){return Array.isArray(e)?e:A(e)?[e]:[]}const W=P({name:"ElTreeSelect",inheritAttrs:!1,props:u(u({},N.props),b.props),setup(e,t){const{slots:n,expose:i}=t,d=x(),r=x(),c=y(()=>e.nodeKey||e.valueKey||"value"),f=G(e,t,{select:d,tree:r,key:c}),h=Q(e,t,{select:d,tree:r,key:c}),l=_({});return i(l),R(()=>{Object.assign(l,u(u({},g(r.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"])),g(d.value,["focus","blur"])))}),()=>V(N,_(k(u({},f),{ref:s=>d.value=s})),k(u({},n),{default:()=>V(b,_(k(u({},h),{ref:s=>r.value=s})))}))}});var C=$(W,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue"]]);C.install=e=>{e.component(C.name,C)};const X=C,ne=X;const le=e=>new Promise(t=>{const n={authorization:"Bearer "+localStorage.getItem("token")};p.get("/api/sys/permission/list",{params:e,headers:n}).then(i=>{t(i.data)})}),se=(e,t)=>{const n=t?"/api/sys/permission/edit":"/api/sys/permission/add",i={authorization:"Bearer "+localStorage.getItem("token")};return new Promise(d=>{p.post(n,e,{headers:i}).then(r=>{d(r.data)})})},ae=e=>{const t={authorization:"Bearer "+localStorage.getItem("token")};return new Promise(n=>{p.delete("/api/sys/permission/delete",{params:e,headers:t}).then(i=>{n(i.data)})})},oe=e=>{const t={authorization:"Bearer "+localStorage.getItem("token")};return new Promise(n=>{p.delete("/api/sys/permission/deleteBatch",{data:e,headers:t}).then(i=>{n(i.data)})})};export{ne as E,ae as a,oe as d,le as g,se as s};
