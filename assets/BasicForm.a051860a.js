import{s as Z,v as x,x as L,y as ee,z as le,e as Q,A as oe,g as H,B as k,o as u,j as f,w as p,C as h,D as ae,F as E,G as V,H as $,c as T,I as C,J as N,K as G,L as ne,M as se,N as te,O as re,P as ue,Q as q,R as pe,_ as de,b as z,S as ce,t as P,T as v,U as j,k as O,V as D,W as m,X as M,a as ie,l as fe,Y as me,Z as be,$ as ve,a0 as ye}from"./index.6b8e7d20.js";import{E as ge}from"./el-col.dddf495b.js";import{E as X,a as ke}from"./el-cascader-panel.921fa0a3.js";import{E as Se,a as he,b as Ee}from"./el-checkbox.2f84ff2b.js";/* empty css                 */import{E as Y}from"./el-upload.d752c630.js";import"./el-progress.9ee01ca6.js";import{_ as Ve}from"./TInput.268107bf.js";import{c as $e,E as Te}from"./index.073c6967.js";import{E as Ce}from"./index.23de40b8.js";import{E as Fe,a as Ie,b as we}from"./index.b365a39d.js";import{E as Be}from"./index.b515aba7.js";import{E as Ue}from"./index.99bf0e70.js";import{E as _e}from"./index.72600d57.js";import{d as J}from"./dayjs.min.954d66e7.js";const Pe=Z({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:String,default:"light"},clearable:{type:Boolean,default:!0},size:x,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,name:String,prefixIcon:{type:L([String,Object]),default:()=>ee},clearIcon:{type:L([String,Object]),default:()=>le}}),y=l=>{const c=(l||"").split(":");if(c.length>=2){let n=Number.parseInt(c[0],10);const r=Number.parseInt(c[1],10),d=l.toUpperCase();return d.includes("AM")&&n===12?n=0:d.includes("PM")&&n!==12&&(n+=12),{hours:n,minutes:r}}return null},A=(l,c)=>{const n=y(l);if(!n)return-1;const r=y(c);if(!r)return-1;const d=n.minutes+n.hours*60,i=r.minutes+r.hours*60;return d===i?0:d>i?1:-1},K=l=>`${l}`.padStart(2,"0"),F=l=>`${K(l.hours)}:${K(l.minutes)}`,Ne=(l,c)=>{const n=y(l);if(!n)return"";const r=y(c);if(!r)return"";const d={hours:n.hours,minutes:n.minutes};return d.minutes+=r.minutes,d.hours+=r.hours,d.hours+=Math.floor(d.minutes/60),d.minutes=d.minutes%60,F(d)},ze={name:"ElTimeSelect"},je=Q({...ze,props:Pe,emits:["change","blur","focus","update:modelValue"],setup(l,{expose:c}){const n=l;J.extend($e);const{Option:r}=G,d=oe("input"),i=H(),I=k(()=>n.modelValue),g=k(()=>{const e=y(n.start);return e?F(e):null}),S=k(()=>{const e=y(n.end);return e?F(e):null}),w=k(()=>{const e=y(n.step);return e?F(e):null}),B=k(()=>{const e=y(n.minTime||"");return e?F(e):null}),U=k(()=>{const e=y(n.maxTime||"");return e?F(e):null}),a=k(()=>{const e=[];if(n.start&&n.end&&n.step){let t=g.value,o;for(;t&&S.value&&A(t,S.value)<=0;)o=J(t,"HH:mm").format(n.format),e.push({value:o,disabled:A(t,B.value||"-1:-1")<=0||A(t,U.value||"100:100")>=0}),t=Ne(t,w.value)}return e});return c({blur:()=>{var e,t;(t=(e=i.value)==null?void 0:e.blur)==null||t.call(e)},focus:()=>{var e,t;(t=(e=i.value)==null?void 0:e.focus)==null||t.call(e)}}),(e,t)=>(u(),f(h(G),{ref_key:"select",ref:i,"model-value":h(I),disabled:e.disabled,clearable:e.clearable,"clear-icon":e.clearIcon,size:e.size,effect:e.effect,placeholder:e.placeholder,"default-first-option":"",filterable:e.editable,"onUpdate:modelValue":t[0]||(t[0]=o=>e.$emit("update:modelValue",o)),onChange:t[1]||(t[1]=o=>e.$emit("change",o)),onBlur:t[2]||(t[2]=o=>e.$emit("blur",o)),onFocus:t[3]||(t[3]=o=>e.$emit("focus",o))},{prefix:p(()=>[e.prefixIcon?(u(),f(h(ae),{key:0,class:E(h(d).e("prefix-icon"))},{default:p(()=>[(u(),f(V(e.prefixIcon)))]),_:1},8,["class"])):$("v-if",!0)]),default:p(()=>[(u(!0),T(N,null,C(h(a),o=>(u(),f(h(r),{key:o.value,label:o.value,value:o.value,disabled:o.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable"]))}});var R=ne(je,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-select/src/time-select.vue"]]);R.install=l=>{l.component(R.name,R)};const Oe=R,De=Oe,He=Q({name:"DForm",components:{ElInput:se,ElCascader:X,ElCheckbox:Se,ElCheckboxGroup:he,ElCheckboxButton:Ee,ElColorPicker:te,ElDatePicker:Te,ElInputNumber:Ce,ElRadio:Fe,ElRadioButton:Ie,ElRate:Be,ElRadioGroup:we,ElSelect:G,ElOption:re,ElSlider:Ue,ElSwitch:ue,ElTimePicker:_e,ElTimeSelect:De,ElTransfer:ke,ElUpload:Y},props:{schemas:{type:Array,default:()=>[],required:!0},labelWidth:{type:String,default:"80px"},action:{type:Boolean,default:!0},inline:{type:Boolean,default:!1},actionClass:{type:String,default:""},submitText:{type:String,default:"\u63D0\u4EA4"},cancelText:{type:String,default:"\u91CD\u7F6E"}},emits:["change","submit","reset","error"],setup(l,{emit:c,expose:n}){const r=H(),d=H({...q(l.schemas.reduce((a,s)=>(a[s.prop]=s.rules,a),{}))}),i=H({...q(l.schemas.reduce((a,s)=>(a[s.prop]=s.value,a),{}))});pe(()=>i,()=>{c("change",i.value)},{deep:!0});const I=()=>{!r.value||r.value.validate(a=>{if(a)c("submit",i.value);else return c("error",i.value),!1})},g=()=>{!r.value||(r.value.resetFields(),c("reset",i.value))},S=a=>!!a&&typeof a!="string"&&!!a.length&&a.length>0,w=a=>typeof(a==null?void 0:a.itemSlot)=="string"&&(a==null?void 0:a.itemSlot)||"defalut",B=a=>{let s=[];return typeof(a==null?void 0:a.itemSlot)=="object"&&(s=Object.keys(a.itemSlot)),s},U=a=>{const s=["cascader","checkbox","checkbox-group","checkbox-button","color-picker","date-picker","input","input-number","radio","radio-group","radio-button","rate","select","option","slider","switch","time-picker","time-select","transfer","upload","editor"];return!!(typeof a.component=="string"&&s.includes(a.component))};return n({validate:async function(a){var s;return(s=r.value)==null?void 0:s.validate(a)},validateField:function(a,s){var _;return(_=r.value)==null?void 0:_.validateField(a,s)},clearValidate:function(a){var s;return(s=r.value)==null?void 0:s.clearValidate(a)},scrollToField:function(a){var s;return(s=r.value)==null?void 0:s.scrollToField(a)}}),{model:i,rules:d,form:r,submitForm:I,resetForm:g,resetFields:g,showSlot:S,getSlotName:w,getSlotItemNames:B,isElemComp:U,getFieldsValue:()=>i.value,getFieldValue:a=>i.value[a]||void 0}}});function Re(l,c,n,r,d,i){const I=Ve,g=fe,S=me,w=Y,B=X,U=be,a=ge,s=ve,_=ye;return l.model?(u(),f(_,v({key:0,ref:"form","label-width":l.labelWidth,"validate-on-rule-change":!1,model:l.model,rules:l.rules,inline:l.inline},l.$attrs),{default:p(()=>[z(s,null,{default:p(()=>[(u(!0),T(N,null,C(l.schemas,(e,t)=>(u(),f(a,{key:t,span:l.inline?(e==null?void 0:e.span)||-1:24},{default:p(()=>[z(U,{modelValue:l.model,"onUpdate:modelValue":c[0]||(c[0]=o=>l.model=o),prop:e.prop,label:e.label,class:E(e.class)},{default:p(()=>[e.component==="innerText"?(u(),T("div",{key:0,class:E(e.class),style:ce(e.style)},P(e.value||l.model[e.prop]),7)):typeof e.component=="object"||!l.isElemComp(e)?(u(),f(V(e.component),v({key:1},e.attrs,j(e.events||{})),null,16)):typeof e.component=="string"&&l.isElemComp(e)&&["radio-group","checkbox-group"].includes(e.component)?(u(),f(V("el-"+e.component),v({key:2,modelValue:l.model[e.prop],"onUpdate:modelValue":o=>l.model[e.prop]=o},e.attrs,j(e.events||{})),{default:p(()=>[(u(!0),T(N,null,C(e.children,(o,b)=>(u(),f(V("el-"+o.component),{key:b,label:o.value},{default:p(()=>[O(P(o.label),1)]),_:2},1032,["label"]))),128))]),_:2},1040,["modelValue","onUpdate:modelValue"])):e.component==="input"?(u(),f(I,v({key:3,modelValue:l.model[e.prop],"onUpdate:modelValue":o=>l.model[e.prop]=o},e.attrs,j(e.events||{})),D({_:2},[C(l.getSlotItemNames(e),(o,b)=>({name:o,fn:p(()=>[e.itemSlot&&e.itemSlot[o]?m(l.$slots,e.itemSlot[o],{key:b}):$("",!0)])}))]),1040,["modelValue","onUpdate:modelValue"])):e.component==="upload"?(u(),f(w,M(v({key:4},e==null?void 0:e.upload)),D({default:p(()=>[m(l.$slots,e.slot?e.slot+"-trigger":"trigger"),m(l.$slots,e.slot?e.slot+"tip":"tip"),m(l.$slots,e.slot?e.slot+"file":"file")]),_:2},[e.upload&&e.upload.type?{name:"trigger",fn:p(()=>{var o,b,W;return[((o=e.upload)==null?void 0:o.type)==="button"?(u(),f(g,{key:0,type:e.upload.btnType||"primary",class:E(e.upload.class)},{default:p(()=>[m(l.$slots,e.slot?e.slot+"prefix":"prefix"),m(l.$slots,"default",{},()=>[O(P(e.upload.text),1)]),m(l.$slots,e.slot?e.slot+"suffix":"suffix")]),_:2},1032,["type","class"])):(u(),f(S,{key:1,icon:((b=e.upload)==null?void 0:b.icon)||"ep:upload",class:E((W=e.upload)==null?void 0:W.class)},null,8,["icon","class"]))]})}:void 0]),1040)):e.component==="cascader"?(u(),f(B,v({key:5},e.attrs,{modelValue:l.model[e.prop],"onUpdate:modelValue":o=>l.model[e.prop]=o,label:e.label}),D({_:2},[e.slot?{name:"default",fn:p(({data:o})=>[l.showSlot(e.slot)?m(l.$slots,e.slot&&(e==null?void 0:e.slot[0]),M(v({key:0},o))):m(l.$slots,e.slot,M(v({key:1},o)))])}:void 0]),1040,["modelValue","onUpdate:modelValue","label"])):(u(),f(V("el-"+e.component),v({key:6,modelValue:l.model[e.prop],"onUpdate:modelValue":o=>l.model[e.prop]=o},e.attrs,j(e.events||{})),D({_:2},[e.children&&e.children.length?{name:"default",fn:p(()=>[(u(!0),T(N,null,C(e.children,(o,b)=>(u(),f(V("el-"+o.component),v({key:b,label:o.label,value:o.value},e.attrs),null,16,["label","value"]))),128))])}:l.showSlot(e.slot)?{name:"default",fn:p(()=>[(u(!0),T(N,null,C(e.slot,(o,b)=>m(l.$slots,o,{key:b,scope:l.$scope})),128))])}:e.itemSlot?{name:l.getSlotName(e),fn:p(()=>[e.slot?m(l.$slots,e.slot,{key:0}):$("",!0)])}:{name:"default",fn:p(()=>[e.slot?m(l.$slots,e.slot,{key:0}):$("",!0)])}]),1040,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["modelValue","prop","label","class"])]),_:2},1032,["span"]))),128))]),_:3}),l.action?m(l.$slots,"action",{key:0,form:l.form,model:l.model,validate:l.form&&l.form.validate},()=>[ie("div",{class:E(l.actionClass)},[z(g,{type:"primary",onClick:l.submitForm},{default:p(()=>[O(P(l.submitText),1)]),_:1},8,["onClick"]),z(g,{onClick:l.resetForm},{default:p(()=>[O(P(l.cancelText),1)]),_:1},8,["onClick"])],2)]):$("",!0)]),_:3},16,["label-width","model","rules","inline"])):$("",!0)}const ol=de(He,[["render",Re]]);export{ol as _};
