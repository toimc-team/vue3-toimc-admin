import{e as de,A as re,ak as Ie,D as Ce,ar as aa,as as ta,at as na,am as Te,B as C,L as me,r as q,o as b,c as z,H as W,j,a9 as ke,w as S,b as K,F as T,J as ie,a as ee,au as la,av as Se,g as B,aw as Ta,I as he,k as sa,t as X,ax as Va,ay as ne,az as Ae,aA as He,aB as Je,aC as be,aD as Pa,aE as Da,aF as fe,aG as ve,aH as Sa,h as Ke,R as Q,aI as La,a3 as oa,aJ as Ma,aK as ue,ab as ra,aL as Ia,a6 as Z,aM as Ne,aN as ia,M as da,aO as Aa,aP as Ha,z as Ba,aQ as za,aR as Fa,aS as Oa,aT as Ka,aU as Ra,aV as qa,aW as Ua,aX as ja,aY as ua,aZ as Ga,a_ as Wa,a$ as Za,b0 as Ja,b1 as Xa,a7 as pe,b2 as Qa,b3 as Ya,S as _a,a8 as Ve,W as Pe,s as ca,x,al as xa,b4 as De,b5 as et,b6 as pa,b7 as at,C as c,b8 as Me,b9 as tt,ba as nt,bb as lt,l as Xe,aq as st}from"./index.6b8e7d20.js";import{E as Be,a as ot}from"./el-checkbox.2f84ff2b.js";import{E as rt}from"./index.b365a39d.js";import{u as Qe,a as Ye}from"./index.073c6967.js";var it=de({name:"NodeContent",setup(){return{ns:re("cascader-node")}},render(){const{ns:e}=this,{node:a,panel:n}=this.$parent,{data:t,label:l}=a,{renderLabelFn:o}=n;return Ie("span",{class:e.e("label")},o?o({node:a,data:t}):l)}});const Re=Symbol(),dt=de({name:"ElCascaderNode",components:{ElCheckbox:Be,ElRadio:rt,NodeContent:it,ElIcon:Ce,Check:aa,Loading:ta,ArrowRight:na},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:a}){const n=Te(Re),t=re("cascader-node"),l=C(()=>n.isHoverMenu),o=C(()=>n.config.multiple),i=C(()=>n.config.checkStrictly),d=C(()=>{var m;return(m=n.checkedNodes[0])==null?void 0:m.uid}),v=C(()=>e.node.isDisabled),f=C(()=>e.node.isLeaf),u=C(()=>i.value&&!f.value||!v.value),g=C(()=>w(n.expandingNode)),k=C(()=>i.value&&n.checkedNodes.some(w)),w=m=>{var A;const{level:y,uid:le}=e.node;return((A=m==null?void 0:m.pathNodes[y-1])==null?void 0:A.uid)===le},$=()=>{g.value||n.expandNode(e.node)},G=m=>{const{node:A}=e;m!==A.checked&&n.handleCheckChange(A,m)},r=()=>{n.lazyLoad(e.node,()=>{f.value||$()})},P=m=>{!l.value||(F(),!f.value&&a("expand",m))},F=()=>{const{node:m}=e;!u.value||m.loading||(m.loaded?$():r())},R=()=>{l.value&&!f.value||(f.value&&!v.value&&!i.value&&!o.value?L(!0):F())},I=m=>{i.value?(G(m),e.node.loaded&&$()):L(m)},L=m=>{e.node.loaded?(G(m),!i.value&&$()):r()};return{panel:n,isHoverMenu:l,multiple:o,checkStrictly:i,checkedNodeId:d,isDisabled:v,isLeaf:f,expandable:u,inExpandingPath:g,inCheckedPath:k,ns:t,handleHoverExpand:P,handleExpand:F,handleClick:R,handleCheck:L,handleSelectCheck:I}}}),ut=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],ct=ee("span",null,null,-1);function pt(e,a,n,t,l,o){const i=q("el-checkbox"),d=q("el-radio"),v=q("check"),f=q("el-icon"),u=q("node-content"),g=q("loading"),k=q("arrow-right");return b(),z("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:T([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:a[2]||(a[2]=(...w)=>e.handleHoverExpand&&e.handleHoverExpand(...w)),onFocus:a[3]||(a[3]=(...w)=>e.handleHoverExpand&&e.handleHoverExpand(...w)),onClick:a[4]||(a[4]=(...w)=>e.handleClick&&e.handleClick(...w))},[W(" prefix "),e.multiple?(b(),j(i,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:a[0]||(a[0]=ke(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(b(),j(d,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:a[1]||(a[1]=ke(()=>{},["stop"]))},{default:S(()=>[W(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ct]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(b(),j(f,{key:2,class:T(e.ns.e("prefix"))},{default:S(()=>[K(v)]),_:1},8,["class"])):W("v-if",!0),W(" content "),K(u),W(" postfix "),e.isLeaf?W("v-if",!0):(b(),z(ie,{key:3},[e.node.loading?(b(),j(f,{key:0,class:T([e.ns.is("loading"),e.ns.e("postfix")])},{default:S(()=>[K(g)]),_:1},8,["class"])):(b(),j(f,{key:1,class:T(["arrow-right",e.ns.e("postfix")])},{default:S(()=>[K(k)]),_:1},8,["class"]))],64))],42,ut)}var ht=me(dt,[["render",pt],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const ft=de({name:"ElCascaderMenu",components:{Loading:ta,ElIcon:Ce,ElScrollbar:la,ElCascaderNode:ht},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const a=Va(),n=re("cascader-menu"),{t}=Se(),l=Ta();let o=null,i=null;const d=Te(Re),v=B(null),f=C(()=>!e.nodes.length),u=C(()=>!d.initialLoaded),g=C(()=>`cascader-menu-${l}-${e.index}`),k=r=>{o=r.target},w=r=>{if(!(!d.isHoverMenu||!o||!v.value))if(o.contains(r.target)){$();const P=a.vnode.el,{left:F}=P.getBoundingClientRect(),{offsetWidth:R,offsetHeight:I}=P,L=r.clientX-F,m=o.offsetTop,A=m+o.offsetHeight;v.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${L} ${m} L${R} 0 V${m} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${L} ${A} L${R} ${I} V${A} Z" />
        `}else i||(i=window.setTimeout(G,d.config.hoverThreshold))},$=()=>{!i||(clearTimeout(i),i=null)},G=()=>{!v.value||(v.value.innerHTML="",$())};return{ns:n,panel:d,hoverZone:v,isEmpty:f,isLoading:u,menuId:g,t,handleExpand:k,handleMouseMove:w,clearHoverZone:G}}});function vt(e,a,n,t,l,o){const i=q("el-cascader-node"),d=q("loading"),v=q("el-icon"),f=q("el-scrollbar");return b(),j(f,{key:e.menuId,tag:"ul",role:"menu",class:T(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:S(()=>{var u;return[(b(!0),z(ie,null,he(e.nodes,g=>(b(),j(i,{key:g.uid,node:g,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(b(),z("div",{key:0,class:T(e.ns.e("empty-text"))},[K(v,{size:"14",class:T(e.ns.is("loading"))},{default:S(()=>[K(d)]),_:1},8,["class"]),sa(" "+X(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(b(),z("div",{key:1,class:T(e.ns.e("empty-text"))},X(e.t("el.cascader.noData")),3)):(u=e.panel)!=null&&u.isHoverMenu?(b(),z("svg",{key:2,ref:"hoverZone",class:T(e.ns.e("hover-zone"))},null,2)):W("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var gt=me(ft,[["render",vt],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]),qe=(e=>(e.CLICK="click",e.HOVER="hover",e))(qe||{});let mt=0;const kt=e=>{const a=[e];let{parent:n}=e;for(;n;)a.unshift(n),n=n.parent;return a};class ge{constructor(a,n,t,l=!1){this.data=a,this.config=n,this.parent=t,this.root=l,this.uid=mt++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:o,label:i,children:d}=n,v=a[d],f=kt(this);this.level=l?0:t?t.level+1:1,this.value=a[o],this.label=a[i],this.pathNodes=f,this.pathValues=f.map(u=>u.value),this.pathLabels=f.map(u=>u.label),this.childrenData=v,this.children=(v||[]).map(u=>new ge(u,n,this)),this.loaded=!n.lazy||this.isLeaf||!ne(v)}get isDisabled(){const{data:a,parent:n,config:t}=this,{disabled:l,checkStrictly:o}=t;return(Ae(l)?l(a,this):!!a[l])||!o&&(n==null?void 0:n.isDisabled)}get isLeaf(){const{data:a,config:n,childrenData:t,loaded:l}=this,{lazy:o,leaf:i}=n,d=Ae(i)?i(a,this):a[i];return He(d)?o&&!l?!1:!(Array.isArray(t)&&t.length):!!d}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(a){const{childrenData:n,children:t}=this,l=new ge(a,this.config,this);return Array.isArray(n)?n.push(a):this.childrenData=[a],t.push(l),l}calcText(a,n){const t=a?this.pathLabels.join(n):this.label;return this.text=t,t}broadcast(a,...n){const t=`onParent${Je(a)}`;this.children.forEach(l=>{l&&(l.broadcast(a,...n),l[t]&&l[t](...n))})}emit(a,...n){const{parent:t}=this,l=`onChild${Je(a)}`;t&&(t[l]&&t[l](...n),t.emit(a,...n))}onParentCheck(a){this.isDisabled||this.setCheckState(a)}onChildCheck(){const{children:a}=this,n=a.filter(l=>!l.isDisabled),t=n.length?n.every(l=>l.checked):!1;this.setCheckState(t)}setCheckState(a){const n=this.children.length,t=this.children.reduce((l,o)=>{const i=o.checked?1:o.indeterminate?.5:0;return l+i},0);this.checked=this.loaded&&this.children.filter(l=>!l.isDisabled).every(l=>l.loaded&&l.checked)&&a,this.indeterminate=this.loaded&&t!==n&&t>0}doCheck(a){if(this.checked===a)return;const{checkStrictly:n,multiple:t}=this.config;n||!t?this.checked=a:(this.broadcast("check",a),this.setCheckState(a),this.emit("check"))}}const ze=(e,a)=>e.reduce((n,t)=>(t.isLeaf?n.push(t):(!a&&n.push(t),n=n.concat(ze(t.children,a))),n),[]);class _e{constructor(a,n){this.config=n;const t=(a||[]).map(l=>new ge(l,this.config));this.nodes=t,this.allNodes=ze(t,!1),this.leafNodes=ze(t,!0)}getNodes(){return this.nodes}getFlattedNodes(a){return a?this.leafNodes:this.allNodes}appendNode(a,n){const t=n?n.appendChild(a):new ge(a,this.config);n||this.nodes.push(t),this.allNodes.push(t),t.isLeaf&&this.leafNodes.push(t)}appendNodes(a,n){a.forEach(t=>this.appendNode(t,n))}getNodeByValue(a,n=!1){return!a&&a!==0?null:this.getFlattedNodes(n).find(l=>be(l.value,a)||be(l.pathValues,a))||null}getSameNode(a){return a&&this.getFlattedNodes(!1).find(({value:t,level:l})=>be(a.value,t)&&a.level===l)||null}}const ha={modelValue:[Number,String,Array],options:{type:Array,default:()=>[]},props:{type:Object,default:()=>({})}},bt={expandTrigger:qe.CLICK,multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Pa,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Ct=e=>C(()=>({...bt,...e.props})),xe=e=>{if(!e)return 0;const a=e.id.split("-");return Number(a[a.length-2])},yt=e=>{if(!e)return;const a=e.querySelector("input");a?a.click():Da(e)&&e.click()},Et=(e,a)=>{const n=a.slice(0),t=n.map(o=>o.uid),l=e.reduce((o,i)=>{const d=t.indexOf(i.uid);return d>-1&&(o.push(i),n.splice(d,1),t.splice(d,1)),o},[]);return l.push(...n),l},Nt=de({name:"ElCascaderPanel",components:{ElCascaderMenu:gt},props:{...ha,border:{type:Boolean,default:!0},renderLabel:Function},emits:[fe,ve,"close","expand-change"],setup(e,{emit:a,slots:n}){let t=!1;const l=re("cascader"),o=Ct(e);let i=null;const d=B(!0),v=B([]),f=B(null),u=B([]),g=B(null),k=B([]),w=C(()=>o.value.expandTrigger===qe.HOVER),$=C(()=>e.renderLabel||n.default),G=()=>{const{options:h}=e,E=o.value;t=!1,i=new _e(h,E),u.value=[i.getNodes()],E.lazy&&ne(e.options)?(d.value=!1,r(void 0,N=>{N&&(i=new _e(N,E),u.value=[i.getNodes()]),d.value=!0,y(!1,!0)})):y(!1,!0)},r=(h,E)=>{const N=o.value;h=h||new ge({},N,void 0,!0),h.loading=!0;const M=D=>{const H=h,Y=H.root?null:H;D&&(i==null||i.appendNodes(D,Y)),H.loading=!1,H.loaded=!0,H.childrenData=H.childrenData||[],E&&E(D)};N.lazyLoad(h,M)},P=(h,E)=>{var N;const{level:M}=h,D=u.value.slice(0,M);let H;h.isLeaf?H=h.pathNodes[M-2]:(H=h,D.push(h.children)),((N=g.value)==null?void 0:N.uid)!==(H==null?void 0:H.uid)&&(g.value=h,u.value=D,!E&&a("expand-change",(h==null?void 0:h.pathValues)||[]))},F=(h,E,N=!0)=>{const{checkStrictly:M,multiple:D}=o.value,H=k.value[0];t=!0,!D&&(H==null||H.doCheck(!1)),h.doCheck(E),A(),N&&!D&&!M&&a("close"),!N&&!D&&!M&&R(h)},R=h=>{!h||(h=h.parent,R(h),h&&P(h))},I=h=>i==null?void 0:i.getFlattedNodes(h),L=h=>{var E;return(E=I(h))==null?void 0:E.filter(N=>N.checked!==!1)},m=()=>{k.value.forEach(h=>h.doCheck(!1)),A()},A=()=>{var h;const{checkStrictly:E,multiple:N}=o.value,M=k.value,D=L(!E),H=Et(M,D),Y=H.map(O=>O.valueByOption);k.value=H,f.value=N?Y:(h=Y[0])!=null?h:null},y=(h=!1,E=!1)=>{const{modelValue:N}=e,{lazy:M,multiple:D,checkStrictly:H}=o.value,Y=!H;if(!(!d.value||t||!E&&be(N,f.value)))if(M&&!h){const ae=Qe(Ma(Ye(N))).map(J=>i==null?void 0:i.getNodeByValue(J)).filter(J=>!!J&&!J.loaded&&!J.loading);ae.length?ae.forEach(J=>{r(J,()=>y(!1,E))}):y(!0,E)}else{const O=D?Ye(N):[N],ae=Qe(O.map(J=>i==null?void 0:i.getNodeByValue(J,Y)));le(ae,!1),f.value=N}},le=(h,E=!0)=>{const{checkStrictly:N}=o.value,M=k.value,D=h.filter(O=>!!O&&(N||O.isLeaf)),H=i==null?void 0:i.getSameNode(g.value),Y=E&&H||D[0];Y?Y.pathNodes.forEach(O=>P(O,!0)):g.value=null,M.forEach(O=>O.doCheck(!1)),D.forEach(O=>O.doCheck(!0)),k.value=D,ue(Ee)},Ee=()=>{!ra||v.value.forEach(h=>{const E=h==null?void 0:h.$el;if(E){const N=E.querySelector(`.${l.namespace.value}-scrollbar__wrap`),M=E.querySelector(`.${l.b("node")}.${l.is("active")}`)||E.querySelector(`.${l.b("node")}.in-active-path`);Ia(N,M)}})},se=h=>{const E=h.target,{code:N}=h;switch(N){case Z.up:case Z.down:{h.preventDefault();const M=N===Z.up?-1:1;Ne(ia(E,M,`.${l.b("node")}[tabindex="-1"]`));break}case Z.left:{h.preventDefault();const M=v.value[xe(E)-1],D=M==null?void 0:M.$el.querySelector(`.${l.b("node")}[aria-expanded="true"]`);Ne(D);break}case Z.right:{h.preventDefault();const M=v.value[xe(E)+1],D=M==null?void 0:M.$el.querySelector(`.${l.b("node")}[tabindex="-1"]`);Ne(D);break}case Z.enter:yt(E);break}};return Sa(Re,Ke({config:o,expandingNode:g,checkedNodes:k,isHoverMenu:w,initialLoaded:d,renderLabelFn:$,lazyLoad:r,expandNode:P,handleCheckChange:F})),Q([o,()=>e.options],G,{deep:!0,immediate:!0}),Q(()=>e.modelValue,()=>{t=!1,y()}),Q(f,h=>{be(h,e.modelValue)||(a(fe,h),a(ve,h))}),La(()=>v.value=[]),oa(()=>!ne(e.modelValue)&&y()),{ns:l,menuList:v,menus:u,checkedNodes:k,handleKeyDown:se,handleCheckChange:F,getFlattedNodes:I,getCheckedNodes:L,clearCheckedNodes:m,calculateCheckedValue:A,scrollToExpandingNode:Ee}}});function wt(e,a,n,t,l,o){const i=q("el-cascader-menu");return b(),z("div",{class:T([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:a[0]||(a[0]=(...d)=>e.handleKeyDown&&e.handleKeyDown(...d))},[(b(!0),z(ie,null,he(e.menus,(d,v)=>(b(),j(i,{key:v,ref_for:!0,ref:f=>e.menuList[v]=f,index:v,nodes:[...d]},null,8,["index","nodes"]))),128))],34)}var we=me(Nt,[["render",wt],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);we.install=e=>{e.component(we.name,we)};const $t=we,Tt=40,Vt={large:36,default:32,small:28},Pt={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:a,placement:n}=e;["right","left","bottom","top"].includes(n)||(a.arrow.x=35)},requires:["arrow"]}]},Dt="ElCascader",St=de({name:Dt,components:{ElCascaderPanel:$t,ElInput:da,ElTooltip:Aa,ElScrollbar:la,ElTag:Ha,ElIcon:Ce,CircleClose:Ba,Check:aa,ArrowDown:za},directives:{Clickoutside:Fa},props:{...ha,size:{type:String,validator:Oa},placeholder:{type:String},disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Function,default:(e,a)=>e.text.includes(a)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:Function,default:()=>!0},popperClass:{type:String,default:""},teleported:Ka.teleported,tagType:{...Ra.type,default:"info"},validateEvent:{type:Boolean,default:!0}},emits:[fe,ve,"focus","blur","visible-change","expand-change","remove-tag"],setup(e,{emit:a}){let n=0,t=0;const l=re("cascader"),o=re("input"),{t:i}=Se(),d=Te(qa,{}),v=Te(Ua,{}),f=B(null),u=B(null),g=B(null),k=B(null),w=B(null),$=B(!1),G=B(!1),r=B(!1),P=B(""),F=B(""),R=B([]),I=B([]),L=B([]),m=B(!1),A=C(()=>e.disabled||d.disabled),y=C(()=>e.placeholder||i("el.cascader.placeholder")),le=ja(),Ee=C(()=>["small"].includes(le.value)?"small":"default"),se=C(()=>!!e.props.multiple),h=C(()=>!e.filterable||se.value),E=C(()=>se.value?F.value:P.value),N=C(()=>{var s;return((s=k.value)==null?void 0:s.checkedNodes)||[]}),M=C(()=>!e.clearable||A.value||r.value||!G.value?!1:!!N.value.length),D=C(()=>{const{showAllLevels:s,separator:p}=e,V=N.value;return V.length?se.value?" ":V[0].calcText(s,p):""}),H=C({get(){return e.modelValue},set(s){var p;a(fe,s),a(ve,s),e.validateEvent&&((p=v.validate)==null||p.call(v,"change").catch(V=>ua()))}}),Y=C(()=>{var s,p;return(p=(s=f.value)==null?void 0:s.popperRef)==null?void 0:p.contentRef}),O=s=>{var p,V,U;if(!A.value&&(s=s!=null?s:!$.value,s!==$.value)){if($.value=s,(V=(p=u.value)==null?void 0:p.input)==null||V.setAttribute("aria-expanded",`${s}`),s)ae(),ue((U=k.value)==null?void 0:U.scrollToExpandingNode);else if(e.filterable){const{value:te}=D;P.value=te,F.value=te}a("visible-change",s)}},ae=()=>{ue(()=>{var s;(s=f.value)==null||s.updatePopper()})},J=()=>{r.value=!1},Le=s=>{const{showAllLevels:p,separator:V}=e;return{node:s,key:s.uid,text:s.calcText(p,V),hitState:!1,closable:!A.value&&!s.isDisabled,isCollapseTag:!1}},Ue=s=>{var p;const V=s.node;V.doCheck(!1),(p=k.value)==null||p.calculateCheckedValue(),a("remove-tag",V.valueByOption)},ga=()=>{if(!se.value)return;const s=N.value,p=[],V=[];if(s.forEach(U=>V.push(Le(U))),I.value=V,s.length){const[U,...te]=s,oe=te.length;p.push(Le(U)),oe&&(e.collapseTags?p.push({key:-1,text:`+ ${oe}`,closable:!1,isCollapseTag:!0}):te.forEach(_=>p.push(Le(_))))}R.value=p},je=()=>{var s,p;const{filterMethod:V,showAllLevels:U,separator:te}=e,oe=(p=(s=k.value)==null?void 0:s.getFlattedNodes(!e.props.checkStrictly))==null?void 0:p.filter(_=>_.isDisabled?!1:(_.calcText(U,te),V(_,E.value)));se.value&&(R.value.forEach(_=>{_.hitState=!1}),I.value.forEach(_=>{_.hitState=!1})),r.value=!0,L.value=oe,ae()},Ge=()=>{var s;let p;r.value&&w.value?p=w.value.$el.querySelector(`.${l.e("suggestion-item")}`):p=(s=k.value)==null?void 0:s.$el.querySelector(`.${l.b("node")}[tabindex="-1"]`),p&&(p.focus(),!r.value&&p.click())},We=()=>{var s,p;const V=(s=u.value)==null?void 0:s.input,U=g.value,te=(p=w.value)==null?void 0:p.$el;if(!(!ra||!V)){if(te){const oe=te.querySelector(`.${l.e("suggestion-list")}`);oe.style.minWidth=`${V.offsetWidth}px`}if(U){const{offsetHeight:oe}=U,_=R.value.length>0?`${Math.max(oe+6,n)}px`:`${n}px`;V.style.height=_,ae()}}},ma=s=>{var p;return(p=k.value)==null?void 0:p.getCheckedNodes(s)},ka=s=>{ae(),a("expand-change",s)},ba=s=>{var p;const V=(p=s.target)==null?void 0:p.value;if(s.type==="compositionend")m.value=!1,ue(()=>Ze(V));else{const U=V[V.length-1]||"";m.value=!Ja(U)}},Ca=s=>{if(!m.value)switch(s.code){case Z.enter:O();break;case Z.down:O(!0),ue(Ge),s.preventDefault();break;case Z.esc:$.value===!0&&(s.preventDefault(),s.stopPropagation(),O(!1));break;case Z.tab:O(!1);break}},ya=()=>{var s;(s=k.value)==null||s.clearCheckedNodes(),O(!1)},Ea=s=>{var p,V;const{checked:U}=s;se.value?(p=k.value)==null||p.handleCheckChange(s,!U,!1):(!U&&((V=k.value)==null||V.handleCheckChange(s,!0,!1)),O(!1))},Na=s=>{const p=s.target,{code:V}=s;switch(V){case Z.up:case Z.down:{const U=V===Z.up?-1:1;Ne(ia(p,U,`.${l.e("suggestion-item")}[tabindex="-1"]`));break}case Z.enter:p.click();break}},wa=()=>{const s=R.value,p=s[s.length-1];t=F.value?0:t+1,!(!p||!t)&&(p.hitState?Ue(p):p.hitState=!0)},$a=Ga(()=>{const{value:s}=E;if(!s)return;const p=e.beforeFilter(s);Wa(p)?p.then(je).catch(()=>{}):p!==!1?je():J()},e.debounce),Ze=(s,p)=>{!$.value&&O(!0),!(p!=null&&p.isComposing)&&(s?$a():J())};return Q(r,ae),Q([N,A],ga),Q(R,()=>{ue(()=>We())}),Q(D,s=>P.value=s,{immediate:!0}),oa(()=>{var s;const p=(s=u.value)==null?void 0:s.$el;n=(p==null?void 0:p.offsetHeight)||Vt[le.value]||Tt,Za(p,We)}),{popperOptions:Pt,tooltipRef:f,popperPaneRef:Y,input:u,tagWrapper:g,panel:k,suggestionPanel:w,popperVisible:$,inputHover:G,inputPlaceholder:y,filtering:r,presentText:D,checkedValue:H,inputValue:P,searchInputValue:F,presentTags:R,allPresentTags:I,suggestions:L,isDisabled:A,isOnComposition:m,realSize:le,tagSize:Ee,multiple:se,readonly:h,clearBtnVisible:M,nsCascader:l,nsInput:o,t:i,togglePopperVisible:O,hideSuggestionPanel:J,deleteTag:Ue,focusFirstNode:Ge,getCheckedNodes:ma,handleExpandChange:ka,handleKeyDown:Ca,handleComposition:ba,handleClear:ya,handleSuggestionClick:Ea,handleSuggestionKeyDown:Na,handleDelete:wa,handleInput:Ze}}}),Lt={key:0},Mt={class:"el-cascader__collapse-tags"},It=["placeholder"],At=["onClick"];function Ht(e,a,n,t,l,o){const i=q("circle-close"),d=q("el-icon"),v=q("arrow-down"),f=q("el-input"),u=q("el-tag"),g=q("el-tooltip"),k=q("el-cascader-panel"),w=q("check"),$=q("el-scrollbar"),G=Xa("clickoutside");return b(),j(g,{ref:"tooltipRef",visible:e.popperVisible,"onUpdate:visible":a[17]||(a[17]=r=>e.popperVisible=r),teleported:e.teleported,"popper-class":[e.nsCascader.e("dropdown"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${e.nsCascader.namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:e.hideSuggestionPanel},{default:S(()=>[pe((b(),z("div",{class:T([e.nsCascader.b(),e.nsCascader.m(e.realSize),e.nsCascader.is("disabled",e.isDisabled),e.$attrs.class]),style:_a(e.$attrs.style),onClick:a[11]||(a[11]=()=>e.togglePopperVisible(e.readonly?void 0:!0)),onKeydown:a[12]||(a[12]=(...r)=>e.handleKeyDown&&e.handleKeyDown(...r)),onMouseenter:a[13]||(a[13]=r=>e.inputHover=!0),onMouseleave:a[14]||(a[14]=r=>e.inputHover=!1)},[K(f,{ref:"input",modelValue:e.inputValue,"onUpdate:modelValue":a[1]||(a[1]=r=>e.inputValue=r),placeholder:e.searchInputValue?"":e.inputPlaceholder,readonly:e.readonly,disabled:e.isDisabled,"validate-event":!1,size:e.realSize,class:T(e.nsCascader.is("focus",e.popperVisible)),onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onFocus:a[2]||(a[2]=r=>e.$emit("focus",r)),onBlur:a[3]||(a[3]=r=>e.$emit("blur",r)),onInput:e.handleInput},{suffix:S(()=>[e.clearBtnVisible?(b(),j(d,{key:"clear",class:T([e.nsInput.e("icon"),"icon-circle-close"]),onClick:ke(e.handleClear,["stop"])},{default:S(()=>[K(i)]),_:1},8,["class","onClick"])):(b(),j(d,{key:"arrow-down",class:T([e.nsInput.e("icon"),"icon-arrow-down",e.nsCascader.is("reverse",e.popperVisible)]),onClick:a[0]||(a[0]=ke(r=>e.togglePopperVisible(),["stop"]))},{default:S(()=>[K(v)]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","onCompositionstart","onCompositionupdate","onCompositionend","onInput"]),e.multiple?(b(),z("div",{key:0,ref:"tagWrapper",class:T(e.nsCascader.e("tags"))},[(b(!0),z(ie,null,he(e.presentTags,r=>(b(),j(u,{key:r.key,type:e.tagType,size:e.tagSize,hit:r.hitState,closable:r.closable,"disable-transitions":"",onClose:P=>e.deleteTag(r)},{default:S(()=>[r.isCollapseTag===!1?(b(),z("span",Lt,X(r.text),1)):(b(),j(g,{key:1,teleported:!1,disabled:e.popperVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:S(()=>[ee("span",null,X(r.text),1)]),content:S(()=>[ee("div",Mt,[(b(!0),z(ie,null,he(e.allPresentTags,(P,F)=>(b(),z("div",{key:F,class:"el-cascader__collapse-tag"},[(b(),j(u,{key:P.key,class:"in-tooltip",type:e.tagType,size:e.tagSize,hit:P.hitState,closable:P.closable,"disable-transitions":"",onClose:R=>e.deleteTag(P)},{default:S(()=>[ee("span",null,X(P.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))]))),128))])]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),e.filterable&&!e.isDisabled?pe((b(),z("input",{key:0,"onUpdate:modelValue":a[4]||(a[4]=r=>e.searchInputValue=r),type:"text",class:T(e.nsCascader.e("search-input")),placeholder:e.presentText?"":e.inputPlaceholder,onInput:a[5]||(a[5]=r=>e.handleInput(e.searchInputValue,r)),onClick:a[6]||(a[6]=ke(r=>e.togglePopperVisible(!0),["stop"])),onKeydown:a[7]||(a[7]=Qa((...r)=>e.handleDelete&&e.handleDelete(...r),["delete"])),onCompositionstart:a[8]||(a[8]=(...r)=>e.handleComposition&&e.handleComposition(...r)),onCompositionupdate:a[9]||(a[9]=(...r)=>e.handleComposition&&e.handleComposition(...r)),onCompositionend:a[10]||(a[10]=(...r)=>e.handleComposition&&e.handleComposition(...r))},null,42,It)),[[Ya,e.searchInputValue]]):W("v-if",!0)],2)):W("v-if",!0)],38)),[[G,()=>e.togglePopperVisible(!1),e.popperPaneRef]])]),content:S(()=>[pe(K(k,{ref:"panel",modelValue:e.checkedValue,"onUpdate:modelValue":a[15]||(a[15]=r=>e.checkedValue=r),options:e.options,props:e.props,border:!1,"render-label":e.$slots.default,onExpandChange:e.handleExpandChange,onClose:a[16]||(a[16]=r=>e.$nextTick(()=>e.togglePopperVisible(!1)))},null,8,["modelValue","options","props","render-label","onExpandChange"]),[[Ve,!e.filtering]]),e.filterable?pe((b(),j($,{key:0,ref:"suggestionPanel",tag:"ul",class:T(e.nsCascader.e("suggestion-panel")),"view-class":e.nsCascader.e("suggestion-list"),onKeydown:e.handleSuggestionKeyDown},{default:S(()=>[e.suggestions.length?(b(!0),z(ie,{key:0},he(e.suggestions,r=>(b(),z("li",{key:r.uid,class:T([e.nsCascader.e("suggestion-item"),e.nsCascader.is("checked",r.checked)]),tabindex:-1,onClick:P=>e.handleSuggestionClick(r)},[ee("span",null,X(r.text),1),r.checked?(b(),j(d,{key:0},{default:S(()=>[K(w)]),_:1})):W("v-if",!0)],10,At))),128)):Pe(e.$slots,"empty",{key:1},()=>[ee("li",{class:T(e.nsCascader.e("empty-text"))},X(e.t("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class","onKeydown"])),[[Ve,e.filtering]]):W("v-if",!0)]),_:3},8,["visible","teleported","popper-class","popper-options","transition","onHide"])}var $e=me(St,[["render",Ht],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/index.vue"]]);$e.install=e=>{e.component($e.name,$e)};const Bt=$e,an=Bt,fa="left-check-change",va="right-check-change",ce=ca({data:{type:x(Array),default:()=>[]},titles:{type:x(Array),default:()=>[]},buttonTexts:{type:x(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:x(Function)},leftDefaultChecked:{type:x(Array),default:()=>[]},rightDefaultChecked:{type:x(Array),default:()=>[]},renderContent:{type:x(Function)},modelValue:{type:x(Array),default:()=>[]},format:{type:x(Object),default:()=>({})},filterable:Boolean,props:{type:x(Object),default:()=>xa({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),Fe=(e,a)=>[e,a].every(De)||De(e)&&et(a),zt={[ve]:(e,a,n)=>[e,n].every(De)&&["left","right"].includes(a),[fe]:e=>De(e),[fa]:Fe,[va]:Fe},Oe="checked-change",Ft=ca({data:ce.data,optionRender:{type:x(Function)},placeholder:String,title:String,filterable:Boolean,format:ce.format,filterMethod:ce.filterMethod,defaultChecked:ce.leftDefaultChecked,props:ce.props}),Ot={[Oe]:Fe},ye=e=>{const a={label:"label",key:"key",disabled:"disabled"};return C(()=>({...a,...e.props}))},Kt=(e,a,n)=>{const t=ye(e),l=C(()=>e.data.filter(u=>Ae(e.filterMethod)?e.filterMethod(a.query,u):String(u[t.value.label]||u[t.value.key]).toLowerCase().includes(a.query.toLowerCase()))),o=C(()=>l.value.filter(u=>!u[t.value.disabled])),i=C(()=>{const u=a.checked.length,g=e.data.length,{noChecked:k,hasChecked:w}=e.format;return k&&w?u>0?w.replace(/\${checked}/g,u.toString()).replace(/\${total}/g,g.toString()):k.replace(/\${total}/g,g.toString()):`${u}/${g}`}),d=C(()=>{const u=a.checked.length;return u>0&&u<o.value.length}),v=()=>{const u=o.value.map(g=>g[t.value.key]);a.allChecked=u.length>0&&u.every(g=>a.checked.includes(g))},f=u=>{a.checked=u?o.value.map(g=>g[t.value.key]):[]};return Q(()=>a.checked,(u,g)=>{if(v(),a.checkChangeByUser){const k=u.concat(g).filter(w=>!u.includes(w)||!g.includes(w));n(Oe,u,k)}else n(Oe,u),a.checkChangeByUser=!0}),Q(o,()=>{v()}),Q(()=>e.data,()=>{const u=[],g=l.value.map(k=>k[t.value.key]);a.checked.forEach(k=>{g.includes(k)&&u.push(k)}),a.checkChangeByUser=!1,a.checked=u}),Q(()=>e.defaultChecked,(u,g)=>{if(g&&u.length===g.length&&u.every($=>g.includes($)))return;const k=[],w=o.value.map($=>$[t.value.key]);u.forEach($=>{w.includes($)&&k.push($)}),a.checkChangeByUser=!1,a.checked=k},{immediate:!0}),{filteredData:l,checkableData:o,checkedSummary:i,isIndeterminate:d,updateAllChecked:v,handleAllCheckedChange:f}},Rt=(e,a)=>({onSourceCheckedChange:(l,o)=>{e.leftChecked=l,o&&a(fa,l,o)},onTargetCheckedChange:(l,o)=>{e.rightChecked=l,o&&a(va,l,o)}}),qt=e=>{const a=ye(e),n=C(()=>e.data.reduce((o,i)=>(o[i[a.value.key]]=i)&&o,{})),t=C(()=>e.data.filter(o=>!e.modelValue.includes(o[a.value.key]))),l=C(()=>e.targetOrder==="original"?e.data.filter(o=>e.modelValue.includes(o[a.value.key])):e.modelValue.reduce((o,i)=>{const d=n.value[i];return d&&o.push(d),o},[]));return{sourceData:t,targetData:l}},Ut=(e,a,n)=>{const t=ye(e),l=(d,v,f)=>{n(fe,d),n(ve,d,v,f)};return{addToLeft:()=>{const d=e.modelValue.slice();a.rightChecked.forEach(v=>{const f=d.indexOf(v);f>-1&&d.splice(f,1)}),l(d,"left",a.rightChecked)},addToRight:()=>{let d=e.modelValue.slice();const v=e.data.filter(f=>{const u=f[t.value.key];return a.leftChecked.includes(u)&&!e.modelValue.includes(u)}).map(f=>f[t.value.key]);d=e.targetOrder==="unshift"?v.concat(d):d.concat(v),e.targetOrder==="original"&&(d=e.data.filter(f=>d.includes(f[t.value.key])).map(f=>f[t.value.key])),l(d,"right",a.leftChecked)}}},jt={name:"ElTransferPanel"},Gt=de({...jt,props:Ft,emits:Ot,setup(e,{expose:a,emit:n}){const t=e,l=pa(),o=({option:I})=>I,{t:i}=Se(),d=re("transfer"),v=Ke({checked:[],allChecked:!1,query:"",inputHover:!1,checkChangeByUser:!0}),f=ye(t),{filteredData:u,checkedSummary:g,isIndeterminate:k,handleAllCheckedChange:w}=Kt(t,v,n),$=C(()=>!ne(v.query)&&ne(u.value)),G=C(()=>!ne(l.default()[0].children)),{checked:r,allChecked:P,query:F,inputHover:R}=at(v);return a({query:F}),(I,L)=>(b(),z("div",{class:T(c(d).b("panel"))},[ee("p",{class:T(c(d).be("panel","header"))},[K(c(Be),{modelValue:c(P),"onUpdate:modelValue":L[0]||(L[0]=m=>Me(P)?P.value=m:null),indeterminate:c(k),onChange:c(w)},{default:S(()=>[sa(X(I.title)+" ",1),ee("span",null,X(c(g)),1)]),_:1},8,["modelValue","indeterminate","onChange"])],2),ee("div",{class:T([c(d).be("panel","body"),c(d).is("with-footer",c(G))])},[I.filterable?(b(),j(c(da),{key:0,modelValue:c(F),"onUpdate:modelValue":L[1]||(L[1]=m=>Me(F)?F.value=m:null),class:T(c(d).be("panel","filter")),size:"default",placeholder:I.placeholder,"prefix-icon":c(tt),clearable:"",onMouseenter:L[2]||(L[2]=m=>R.value=!0),onMouseleave:L[3]||(L[3]=m=>R.value=!1)},null,8,["modelValue","class","placeholder","prefix-icon"])):W("v-if",!0),pe(K(c(ot),{modelValue:c(r),"onUpdate:modelValue":L[4]||(L[4]=m=>Me(r)?r.value=m:null),class:T([c(d).is("filterable",I.filterable),c(d).be("panel","list")])},{default:S(()=>[(b(!0),z(ie,null,he(c(u),m=>(b(),j(c(Be),{key:m[c(f).key],class:T(c(d).be("panel","item")),label:m[c(f).key],disabled:m[c(f).disabled]},{default:S(()=>{var A;return[K(o,{option:(A=I.optionRender)==null?void 0:A.call(I,m)},null,8,["option"])]}),_:2},1032,["class","label","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[Ve,!c($)&&!c(ne)(I.data)]]),pe(ee("p",{class:T(c(d).be("panel","empty"))},X(c($)?c(i)("el.transfer.noMatch"):c(i)("el.transfer.noData")),3),[[Ve,c($)||c(ne)(I.data)]])],2),c(G)?(b(),z("p",{key:0,class:T(c(d).be("panel","footer"))},[Pe(I.$slots,"default")],2)):W("v-if",!0)],2))}});var ea=me(Gt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer-panel.vue"]]);const Wt={key:0},Zt={key:0},Jt={name:"ElTransfer"},Xt=de({...Jt,props:ce,emits:zt,setup(e,{expose:a,emit:n}){const t=e,l=pa(),{t:o}=Se(),i=re("transfer"),{formItem:d}=nt(),v=Ke({leftChecked:[],rightChecked:[]}),f=ye(t),{sourceData:u,targetData:g}=qt(t),{onSourceCheckedChange:k,onTargetCheckedChange:w}=Rt(v,n),{addToLeft:$,addToRight:G}=Ut(t,v,n),r=B(),P=B(),F=y=>{switch(y){case"left":r.value.query="";break;case"right":P.value.query="";break}},R=C(()=>t.buttonTexts.length===2),I=C(()=>t.titles[0]||o("el.transfer.titles.0")),L=C(()=>t.titles[1]||o("el.transfer.titles.1")),m=C(()=>t.filterPlaceholder||o("el.transfer.filterPlaceholder"));Q(()=>t.modelValue,()=>{var y;t.validateEvent&&((y=d==null?void 0:d.validate)==null||y.call(d,"change").catch(le=>ua()))});const A=C(()=>y=>t.renderContent?t.renderContent(Ie,y):l.default?l.default({option:y}):Ie("span",y[f.value.label]||y[f.value.key]));return a({clearQuery:F,leftPanel:r,rightPanel:P}),(y,le)=>(b(),z("div",{class:T(c(i).b())},[K(ea,{ref_key:"leftPanel",ref:r,data:c(u),"option-render":c(A),placeholder:c(m),title:c(I),filterable:y.filterable,format:y.format,"filter-method":y.filterMethod,"default-checked":y.leftDefaultChecked,props:t.props,onCheckedChange:c(k)},{default:S(()=>[Pe(y.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),ee("div",{class:T(c(i).e("buttons"))},[K(c(Xe),{type:"primary",class:T([c(i).e("button"),c(i).is("with-texts",c(R))]),disabled:c(ne)(v.rightChecked),onClick:c($)},{default:S(()=>[K(c(Ce),null,{default:S(()=>[K(c(lt))]),_:1}),c(He)(y.buttonTexts[0])?W("v-if",!0):(b(),z("span",Wt,X(y.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),K(c(Xe),{type:"primary",class:T([c(i).e("button"),c(i).is("with-texts",c(R))]),disabled:c(ne)(v.leftChecked),onClick:c(G)},{default:S(()=>[c(He)(y.buttonTexts[1])?W("v-if",!0):(b(),z("span",Zt,X(y.buttonTexts[1]),1)),K(c(Ce),null,{default:S(()=>[K(c(na))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),K(ea,{ref_key:"rightPanel",ref:P,data:c(g),"option-render":c(A),placeholder:c(m),filterable:y.filterable,format:y.format,"filter-method":y.filterMethod,title:c(L),"default-checked":y.rightDefaultChecked,props:t.props,onCheckedChange:c(w)},{default:S(()=>[Pe(y.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var Qt=me(Xt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer.vue"]]);const tn=st(Qt);export{an as E,tn as a};
